(this["webpackJsonpchetandr.github.io.src"]=this["webpackJsonpchetandr.github.io.src"]||[]).push([[0],{42:function(e,t,n){},43:function(e,t,n){},62:function(e,t,n){"use strict";n.r(t);n(42),n(43);var c=n(5),r=n(81),a=n(25),i=n.n(a),s=n(32),o=n(36),d=n(0),u=n.n(d),h=n(82),l=n(37),g=n.n(l),b=n(3),j=function(e){var t=[];if(e.debugData)for(var n in e.debugData)t.push(Object(b.jsxs)("div",{className:"debugRow",children:[Object(b.jsxs)("span",{className:"debugLabel",children:[n," : "]}),Object(b.jsx)("span",{className:"debugValue",children:e.debugData[n]})]}));return t},p=function(){var e=u.a.useRef(),t=u.a.useRef(),n=u.a.useRef(),c=u.a.useRef(),r=u.a.useState({}),a=Object(o.a)(r,2),l=a[0],p=a[1],m=u.a.useState({}),x=Object(o.a)(m,2),f=x[0],v=x[1];function w(){return O.apply(this,arguments)}function O(){return(O=Object(s.a)(i.a.mark((function e(){var t,n,c,r,a,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,e.prev=1,e.prev=2,e.next=5,navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:{exact:"environment"}}});case 5:t=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:{exact:"user"}}});case 12:t=e.sent;case 13:return e.next=15,t.getVideoTracks();case 15:return n=e.sent,c=n[0],r=n[0].getCapabilities(),a=c.getSettings(),console.log(r,a),s={width:{ideal:r.width.max},height:{ideal:r.height.max}},e.prev=21,e.next=24,c.applyConstraints(s);case 24:e.next=29;break;case 26:e.prev=26,e.t1=e.catch(21),alert(e.t1);case 29:return o=c.getSettings(),p(o),e.abrupt("return",{stream:t,settings:o});case 34:e.prev=34,e.t2=e.catch(1),console.error(e.t2);case 37:case"end":return e.stop()}}),e,null,[[1,34],[2,8],[21,26]])})))).apply(this,arguments)}Object(d.useEffect)(Object(s.a)(i.a.mark((function c(){var r,a,s,o,d,u,h,g,b,j;return i.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,w();case 2:r=c.sent,e.current&&("srcObject"in e.current?e.current.srcObject=r.stream:e.src=window.URL.createObjectURL(r.stream),a=r.settings.width,s=r.settings.height,o=document.documentElement.clientWidth,d=document.documentElement.clientHeight,l.aspectRatio,u=o/a,h=d/s,t.current.width=o,t.current.height=d,n.current.width=o,n.current.height=d,n.current.style.width="".concat(window.innerWidth,"px"),n.current.style.height="".concat(window.innerHeight,"px"),(g=t.current.getContext("2d")).transform(u,0,0,h,0,0),g.scale(u,h),(b=n.current.getContext("2d")).transform(u,0,0,h,0,0),b.scale(u,h),j={media:"".concat(r.settings.width,"x").concat(r.settings.height),video:"".concat(r.settings.width,"x").concat(r.settings.height),window:"".concat(window.innerWidth,"x").concat(window.innerHeight),target:"".concat(o,"x").concat(d),scale:"".concat(u,":").concat(h)},v(j));case 4:case"end":return c.stop()}}),c)}))),[e,t,n]);var y=function n(){requestAnimationFrame(n);var c=t.current.getContext("2d");c.restore();var r=l.width,a=l.height,i=document.documentElement.clientWidth-30,s=document.documentElement.clientHeight-30,o=l.aspectRatio,d=0,u=0;r>a?(d=(a-i/o)/2,u=(r-i)/2):(u=(a-s*o)/2,d=(r-s)/2),requestAnimationFrame((function(){return c.drawImage(e.current,u,d)}))};return Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{id:"debug",children:Object(b.jsx)(j,{debugData:f})}),Object(b.jsx)("div",{style:{marginBottom:"16px",display:"none"},children:Object(b.jsx)("video",{ref:e,autoPlay:!0,playsInline:!0,onLoadedMetadata:function(e){y()}})}),Object(b.jsxs)("div",{children:[Object(b.jsx)("canvas",{ref:t,style:{border:"solid 2px red"}}),Object(b.jsx)("canvas",{ref:n,style:{border:"solid 2px red",display:"none"}})]}),Object(b.jsx)("a",{id:"downloadAnchor",href:"http://chetandr.github.com",ref:c,style:{display:"none"},children:"image"}),Object(b.jsx)("div",{id:"changeVideo",children:Object(b.jsx)(h.a,{color:"primary","aria-label":"upload picture",component:"span",variant:"contained",onClick:function(){var r,a,i=n.current.getContext("2d"),s=l.width,o=l.height,d=document.documentElement.clientWidth,u=document.documentElement.clientHeight,h=l.aspectRatio,g=0,b=0;s>o?(r=t.current.width,a=t.current.width/h,g=(t.current.height-a)/2):(r=t.current.height,a=t.current.height*h,b=(t.current.width-r)/2),s>o?(g=(o-(a=d/h))/2,b=(s-(r=d))/2):(b=(o-(a=u*h))/2,g=(s-(r=u))/2),i.drawImage(e.current,b,g);var j=n.current.toDataURL("image/png");c.current.href=j,c.current.download="MyPhoto.png",c.current.click(),window.URL.revokeObjectURL(j)},children:Object(b.jsx)(g.a,{style:{fontSize:100}})})}),Object(b.jsx)("a",{id:"downloadAnchor",href:"http://chetandr.github.com",ref:c,style:{display:"none"},children:"image"})]})},m=n(31),x=n(39);var f=function(){return Object(b.jsx)(m.a,{children:Object(b.jsx)(c.c,{children:Object(b.jsx)(c.a,{exact:!0,path:"/",children:Object(b.jsx)("div",{className:"App",children:Object(b.jsx)("header",{className:"App-header",children:Object(b.jsx)(r.a,{backend:x.a,options:{enableMouseEvents:!0},children:Object(b.jsx)(p,{})})})})})})})},v=n(19),w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,83)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))};n.n(v).a.render(Object(b.jsx)(u.a.StrictMode,{children:Object(b.jsx)(f,{})}),document.getElementById("root")),w()}},[[62,1,2]]]);
//# sourceMappingURL=main.74b64cc0.chunk.js.map