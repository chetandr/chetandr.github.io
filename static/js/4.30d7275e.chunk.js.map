{"version":3,"sources":["components/Logos/index.jsx","components/Car/index.js","APIConfig/Axios.js","APIConfig/CompanySettings/index.js","APIConfig/AssessmentId/index.js","APIConfig/UpdateAssessmentType/index.js","components/Journey/Onboard/Login/index.jsx","components/OverlayWindow/index.js","components/OverlayMessageBox/index.jsx","components/RoundedButton/index.js","APIConfig/GeneratePresignedUrl/index.js","APIConfig/UploadImageToS3/index.js","APIConfig/UpdateImageFileMetaDataBarcode/index.js","CarDataContext.js","components/MediaStream/helper.js","components/Journey/Onboard/License/index.jsx","components/CaptureIcon/index.jsx","components/CaptureButton/index.jsx","APIConfig/UpdateImageFileMetaDataArea/index.js","components/MediaStream/index.jsx","components/MediaStreamWithDnD/index.js","components/OverlayImage/index.jsx","components/Journey/Inspection/Front/index.jsx","components/Journey/Inspection/Driverside/index.jsx","components/Journey/Inspection/Passengerside/index.jsx","components/Journey/Inspection/Rear/index.jsx","APIConfig/FinalAsessmentSubmission/index.js","components/Journey/Summary/Report/index.jsx","mockconfig/journey1.js","Theme/index.js","components/ErrorBoundary/index.js","Journey/index.jsx","utils/geoLocation.js"],"names":["TheUnlimited","props","Box","p","src","imageURL","alt","style","marginLeft","marginRight","display","width","defaultProps","Car","axios","defaults","headers","post","Axios","create","baseURL","process","REACT_APP_CARDATA_API","timeout","CompanySettings$","otp","from","get","AssessmentId$","fieldOne","UpdateAssessmentType$","assessmentId","deviceId","patch","useStyles","makeStyles","theme","backdrop","zIndex","drawer","color","palette","primary","main","Login","t","useTranslation","React","useState","checked","setChecked","companyData","setCompanyData","setFieldOne","errors","setErrors","swipeButton","useRef","openTermsAndConditions","setOpenTermsAndConditions","useEffect","subscribe","response","data","e","console","log","Fragment","logo","pt","px","Typography","textAlign","company_name","TextField","id","placeholder","fullWidth","margin","variant","onChange","target","value","InputProps","borderRadius","pl","FormGroup","FormLabel","Checkbox","name","float","cursor","onClick","text","onSuccess","push","length","current","reset","toggleWaiting","assessment_id","nextAction","ref","Dialog","open","fullScreen","DialogTitle","DialogContent","overflow","padding","paddingLeft","terms_and_conditions_url","height","border","DialogActions","Button","maxWidth","map","error","Alert","severity","prevAction","OverlayWindow","Grid","container","item","xs","className","windowSize","borderColor","OverlayMessageBox","Styled","position","backgroundColor","maxSize","RoundedButton","size","textTransform","paddingRight","label","GeneratePresignedUrl$","fileExtension","md5","UploadImageToS3$","uploadURL","contentType","params","request","method","url","UpdateImageFileMetaDataArea$","imageRequestId","gps","originalImageResolution","tags","uploadDone","put","CarDataContext","createContext","getReso","getMedia","a","stream","supportedConstraints","navigator","mediaDevices","getSupportedConstraints","getUserMedia","audio","video","facingMode","exact","getVideoTracks","videoTracks","videoTrack","getCapabilities","getSettings","reso","platform","indexOf","constraints","ideal","applyConstraints","alert","updatedSettings","settings","getMD5","blob","Promise","resolve","reject","fileReader","FileReader","onloadend","file","Uint8Array","result","hash","btoa","sparkMD5","ArrayBuffer","readAsArrayBuffer","Divider","styled","License","licenseData","setlicenseData","codeReader","BrowserMultiFormatReader","carData","useContext","Object","keys","constructor","login","JSON","parse","sessionStorage","getItem","geoLocation","videoInputDevices","decodeFromConstraints","err","decodeFromVideoDevice","res","carInfo","split","captureCanvas","toBlob","md5Data","uploadUrl","uploadResponse","status","tag_type","make","model","license_number","registration_number","engine_number","vin_number","UpdateImageFileMetaDataBarcode$","stopStreams","NotFoundException","top","left","disableTypography","m","CaptureIcon","Icon","CaptureButton","right","IconButton","ItemTypes","MediaStream","videoRef","videoWrapper","imageRef","thumbnail","bboxWrapper","canvasRef","imageCanvasRef","currentBBox","setCurrentBBox","downloadAnchor","mediaSettings","setMediaSettings","setDebugData","setCapturing","bboxProperties","setBboxProperties","stage","setStage","monitor","useDragDropManager","getMonitor","imageBboxRef","x","y","currentPosition","setCurrentPosition","dragInitPositionDiff","setDragInitPositionDiff","useDrag","type","collect","isDragging","bbox","useDrop","accept","drop","moveBox","isOver","cbbox","cp","diff","rbox","getClientRects","x1","y1","newBboxProperties","MyPreview","usePreview","itemType","getTargetDimensions","useCallback","ms","videoWidth","videoHeight","toImgWidth","toImgHeight","Math","floor","toWidth","offsetWidth","toHeight","offsetHeight","scaleRatioX","scaleRatioY","scaleImageX","scaleImageY","toX","document","documentElement","clientWidth","toImgX","toY","toImgY","renderMedia","media","srcObject","window","URL","createObjectURL","transform","offsetLeft","offsetTop","transformOrigin","getContext","scale","newDebugData","targetXY","addEventListener","event","captureImage","ctx","pause","drawImage","toDataURL","getImageData","ctxt","thumbnailUrl","href","side","subscribeToOffsetChange","offset","getClientOffset","initialClientOffset","getInitialClientOffset","initialSourceClientOffset","getInitialSourceClientOffset","autoPlay","playsInline","bottom","onTouchStart","onMouseDown","opacity","MediaStreamWithDnD","DndProvider","backend","TouchBackend","options","enableMouseEvents","LinearProgress","OverlayImage","imageName","image","Front","FinalAsessmentSubmission$","assessmentLocation","preferredLocation","StyledPaper","Paper","StyledCard","Card","Report","license","front","driverside","passengerside","rear","ackOpen","setAckOpen","CardHeader","title","titleTypographyProps","align","CardContent","spacing","Intl","DateTimeFormat","format","Date","CardMedia","component","mb","justifyContent","mockJourney","step","contained","CSAItheme","createMuiTheme","typography","fontFamily","join","secondary","overrides","MuiButton","textSecondary","MuiCardMedia","img","borderTopLeftRadius","borderTopRightRadius","ErrorBoundary","state","errorInfo","this","setState","children","Component","Journey","classes","setCarData","useParams","waiting","setWaiting","nextIndex","setItem","stringify","toLowerCase","history","getComposed","startCase","newComponent","createElement","JourneyModule","default","useHistory","Loader","Backdrop","CircularProgress","thickness","currentIndex","findIndex","mj","getCurrentAndNext","geolocation","getCurrentPosition","latitude","coords","longitude","lat","long","info","then","geoData","currentAction","CssBaseline","Provider","Container"],"mappings":"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","file":"static/js/4.30d7275e.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nimport { Box } from '@material-ui/core';\r\n\r\nconst TheUnlimited = (props) => {\r\n\treturn (\r\n\t\t<Box p={4}>\r\n\t\t\t<img\r\n\t\t\t\tsrc={props.imageURL}\r\n\t\t\t\talt={props.alt}\r\n\t\t\t\tstyle={{ marginLeft: 'auto', marginRight: 'auto', display: 'block', width: '80vw' }}\r\n\t\t\t></img>\r\n\t\t</Box>\r\n\t);\r\n};\r\n\r\nTheUnlimited.defaultProps = {\r\n\timageURL: '/logos/carScan_logo.png',\r\n\talt: \"Carscan\"\r\n}\r\nexport default TheUnlimited;\r\n","import React from \"react\"\r\n\r\nconst Car = () => {\r\n    return <img src=\"/images/car.png\" style={{width:'95vw'}}/>;\r\n}\r\n\r\nexport default Car;","import axios from 'axios';\r\n\r\n// axios.defaults.baseURL = ;\r\n// axios.defaults.headers.common['Authorization'] = AUTH_TOKEN;\r\naxios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';\r\n\r\nconst  Axios = axios.create({\r\n    baseURL: process.env.REACT_APP_CARDATA_API || \"https://cardata.devinternal.carscan.ai​​\",\r\n    timeout: 30000,\r\n  });\r\n\r\nexport default Axios;\r\n","import Axios from '../Axios';\r\nimport { from } from 'rxjs';\r\n\r\nconst CompanySettings$ = (otp) => from(Axios.get(`/cardata/companies/${otp}/settings`));\r\n\r\nexport default CompanySettings$;\r\n","import Axios from '../Axios';\r\nimport { from } from 'rxjs';\r\n\r\nconst AssessmentId$ = (otp, fieldOne) => from(Axios.post(`/cardata/companies/${otp}/assessments`, {\r\n    \"captcha_id\": \"60cb91e6a1673b6e53f595fa\",\r\n    \"captcha_token\": \"cu2wy\",\r\n    \"device_id\": \"b04d837c-3539-430e-b9ae-159dcbe1e96b\",\r\n    \"field_one\": fieldOne || \"9876567654\",\r\n    \"notification_reg_id\": \"123456789\"\r\n}));\r\n\r\nexport default AssessmentId$;\r\n","import Axios from '../Axios';\r\nimport { from } from 'rxjs';\r\n\r\nconst UpdateAssessmentType$ = (otp, assessmentId, deviceId) => from(Axios.patch(`/cardata/external/companies/${otp}/assessments/${assessmentId}`, {\r\n    \"assessment_type\": \"PRE_INSPECTION\"\r\n}, { headers: { 'device-id': deviceId }, 'Content-Type': 'application/json' }));\r\n\r\nexport default UpdateAssessmentType$;\r\n","import Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport React from \"react\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Logo from \"../../../Logos\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport FormLabel from \"@material-ui/core/FormLabel\";\r\nimport FormGroup from \"@material-ui/core/FormGroup\";\r\nimport Car from \"../../../Car\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport ReactSwipeButton from \"react-swipe-button\";\r\nimport CompanySettings$ from \"../../../../APIConfig/CompanySettings\";\r\nimport AssessmentId$ from \"../../../../APIConfig/AssessmentId\";\r\nimport UpdateAssessmentType$ from \"../../../../APIConfig/UpdateAssessmentType\";\r\nimport Alert from \"@material-ui/lab/Alert\";\r\nimport { useEffect } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    color: theme.palette.primary.main,\r\n  },\r\n}));\r\n\r\nconst Login = (props) => {\r\n  const { t } = useTranslation();\r\n  const classes = useStyles();\r\n  const [checked, setChecked] = React.useState(false);\r\n  const [companyData, setCompanyData] = React.useState(null);\r\n  const [fieldOne, setFieldOne] = React.useState(null);\r\n  const [errors, setErrors] = React.useState([]);\r\n  const swipeButton = React.useRef();\r\n  const [waiting, setWaiting] = React.useState(false);\r\n  const [openTermsAndConditions, setOpenTermsAndConditions] =\r\n    React.useState(false);\r\n  const handleChange = () => {\r\n    setChecked(!checked);\r\n  };\r\n  // Load Company Details for the component to get data\r\n  useEffect(() => {\r\n    try {\r\n      CompanySettings$(9994).subscribe((response) =>\r\n        setCompanyData(response.data)\r\n      );\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n  }, []);\r\n\r\n  // When the Login Button is swiped take this action\r\n  const handleClicked = () => {\r\n    const errors = [];\r\n    // If the contact number is not set, Register an error\r\n    if (fieldOne === null) {\r\n      errors.push(t(\"Enter the Contact number\"));\r\n    }\r\n\r\n    // If the terms and conditions are not checked, Register an error\r\n    if (!checked) {\r\n      errors.push(\r\n        t(\"Agree to the terms and coditions by selecting the checkbox below\")\r\n      );\r\n    }\r\n\r\n    if (!errors.length) {\r\n      // If there are no errors\r\n      // Fetch the assessment ID and execute the Update the assessment id with the default type as pre inspection.\r\n      if(props.toggleWaiting) {\r\n        props.toggleWaiting()\r\n      }\r\n      AssessmentId$(9994, fieldOne).subscribe((response) =>\r\n        UpdateAssessmentType$(\r\n          9994,\r\n          response.data.assessment_id,\r\n          \"b04d837c-3539-430e-b9ae-159dcbe1e96b\"\r\n        ).subscribe(() => {\r\n          if(props.toggleWaiting) {\r\n            props.toggleWaiting()\r\n          }\r\n          props.nextAction(response.data);\r\n        })\r\n      );\r\n    } else {\r\n      // Set the errors object\r\n      setErrors(errors);\r\n\r\n      // reset the swipe button;\r\n      swipeButton.current.reset();\r\n    }\r\n  };\r\n  return (\r\n    <React.Fragment>\r\n      \r\n      {companyData !== null && <Logo imageURL={companyData?.logo} />}\r\n\r\n      <Box pt={2} px={4}>\r\n        <Typography style={{ textAlign: \"center\" }}>\r\n          {t(\"welcome\", {\r\n            company_name:\r\n              companyData !== null ? companyData.company_name : \"our Shop\",\r\n          })}\r\n        </Typography>\r\n      </Box>\r\n      <Box pt={2} px={4}>\r\n        <TextField\r\n          id=\"standard-full-width\"\r\n          placeholder={t(\"Enter Your Contact Number\")}\r\n          fullWidth\r\n          margin=\"normal\"\r\n          variant=\"outlined\"\r\n          onChange={(e) => setFieldOne(e.target.value)}\r\n          InputProps={{\r\n            style: { borderRadius: \"28px\" },\r\n          }}\r\n        />\r\n      </Box>\r\n      <Box pt={4} pl={4}>\r\n        <FormGroup>\r\n          <FormLabel>\r\n            <Checkbox\r\n              color=\"primary\"\r\n              checked={checked}\r\n              onChange={handleChange}\r\n              name=\"Agreed\"\r\n              style={{ float: \"left\" }}\r\n            />\r\n            <Typography variant=\"caption\">\r\n              {t(\"I have read, understood and agreed with your\")}{\" \"}\r\n              <Typography\r\n                color=\"primary\"\r\n                variant=\"caption\"\r\n                style={{ cursor: \"pointer\", display: \"inline-block\" }}\r\n                onClick={() => setOpenTermsAndConditions(true)}\r\n              >\r\n                {\" \"}\r\n                {t(\"Terms and Conditions\")}\r\n              </Typography>\r\n            </Typography>\r\n          </FormLabel>\r\n        </FormGroup>\r\n      </Box>\r\n\r\n      <Box p={2}>\r\n        <Car />\r\n      </Box>\r\n      <Box pt={4} px={4}>\r\n        <ReactSwipeButton\r\n          text={t(\"Swipe to Login\")}\r\n          color=\"#EDA03A\"\r\n          onSuccess={handleClicked}\r\n          ref={swipeButton}\r\n        />\r\n      </Box>\r\n      {companyData !== null && (\r\n        <Dialog\r\n          open={openTermsAndConditions}\r\n          //   maxWidth=\"lg\"\r\n          fullScreen\r\n          fullWidth\r\n          //   style={{ width: \"90vw\", height: \"90vh\" }}\r\n        >\r\n          <DialogTitle>{t(\"Terms and Conditions\")}</DialogTitle>\r\n          <DialogContent\r\n            style={{ overflow: \"hidden\", padding: 0, paddingLeft: 16 }}\r\n          >\r\n            <iframe\r\n              src={companyData.terms_and_conditions_url}\r\n              style={{ width: \"100%\", height: \"100%\", border: \"none\" }}\r\n            ></iframe>\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={() => setOpenTermsAndConditions(false)}\r\n            >\r\n              {t(\"Close\")}\r\n            </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n      )}\r\n      {errors.length !== 0 && (\r\n        <Dialog\r\n          open={errors.length}\r\n          maxWidth=\"lg\"\r\n          style={{ width: \"80vw\", height: \"60vw\" }}\r\n        >\r\n          <DialogTitle>Error!!</DialogTitle>\r\n          <DialogContent style={{ overflow: \"hidden\" }}>\r\n            {errors.map((error) => (\r\n              <Box p={1}>\r\n                <Alert severity=\"error\">{error}</Alert>\r\n              </Box>\r\n            ))}\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={() => setErrors([])}\r\n            >\r\n              Ok\r\n            </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nLogin.defaultProps = {\r\n  nextAction: () => {},\r\n  prevAction: () => {},\r\n};\r\nexport default Login;\r\n","import React from \"react\";\r\nimport Backdrop from '@material-ui/core/Backdrop';\r\nimport Grid from '@material-ui/core/Grid';\r\nconst OverlayWindow =(props) => {\r\n    return (\r\n        <React.Fragment>\r\n            <Grid container  style={{ height:\"100vh\"}}>\r\n            <Grid item xs={12} className=\"translucent\" style={{height:`${(100 - props.windowSize)/2}%`}}></Grid>\r\n            <Grid item xs={12}  style={{height:`${props.windowSize}%`}}>\r\n                <Grid container  style={{height:\"100%\"}}>\r\n                    <Grid item xs={1} className=\"translucent\">\r\n                    </Grid>\r\n                    <Grid item xs={10} className=\"window\" style={{borderColor: props.borderColor}}>\r\n                        <div className=\"windowCorner topLeftWindowCorner\" style={{borderColor: props.borderColor}}></div>\r\n                        <div className=\"windowCorner topRightWindowCorner\" style={{borderColor: props.borderColor}}></div>\r\n                        <div className=\"windowCorner bottomLeftWindowCorner\" style={{borderColor: props.borderColor}}></div>\r\n                        <div className=\"windowCorner bottomRightWindowCorner\" style={{borderColor: props.borderColor}}></div>\r\n                    </Grid>\r\n                    <Grid item xs={1} className=\"translucent\">\r\n                    </Grid>\r\n                </Grid>    \r\n            </Grid>\r\n            <Grid item xs={12} className=\"translucent\" style={{height:`${(100 - props.windowSize)/2}%`}}></Grid>\r\n            </Grid>\r\n        </React.Fragment>\r\n    )\r\n    // return <Backdrop open={true}></Backdrop>\r\n}\r\nOverlayWindow.defaultProps = {\r\n    windowSize: 15,\r\n    borderColor : '#7EF424',\r\n}\r\n\r\nexport default OverlayWindow;\r\n","import Styled from '@material-ui/core/styles/styled';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nconst OverlayMessageBox = Styled(Box)({\r\n\tposition: 'relative',\r\n\t// margin: 16,\r\n\twidth: '100%',\r\n\ttextAlign: 'center',\r\n\tcolor: '#fff',\r\n\tzIndex: 2002,\r\n\tbackgroundColor: '#000',\r\n\tmaxSize: '640px',\r\n    borderRadius: '8px'\r\n});\r\n\r\nexport default OverlayMessageBox;\r\n","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nconst RoundedButton = (props) => {\r\n\tconst handleClick = () => {\r\n\t\tprops.onClick();\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Button\r\n\t\t\tvariant={props.variant}\r\n\t\t\tcolor={props.color}\r\n\t\t\tfullWidth={props.fullWidth}\r\n\t\t\tsize={props.size}\r\n\t\t\tstyle={{ borderRadius: '28px', height: '0.05%', textTransform: 'none', paddingLeft: '16px',  paddingRight: '16px'  }}\r\n\t\t\tonClick={handleClick}\r\n\t\t>\r\n\t\t\t{props.label}\r\n\t\t</Button>\r\n\t);\r\n};\r\n\r\nRoundedButton.defaultProps = {\r\n\tlabel: '',\r\n\tcolor: 'primary',\r\n\tonClick: () => {},\r\n\tfullWidth: true,\r\n\tsize: 'medium',\r\n\tvariant: 'contained',\r\n};\r\n\r\nexport default RoundedButton;\r\n","import Axios from '../Axios';\r\nimport { from } from 'rxjs';\r\n\r\nconst GeneratePresignedUrl$ = (otp, assessmentId, deviceId, fileExtension, md5) => from(Axios.post(`/cardata/external/companies/${otp}/assessments/${assessmentId}/files`, {\r\n  \"fileExtension\": fileExtension,\r\n  \"md5s\": md5\r\n}, { headers: { \"device-id\": deviceId }, 'Content-Type': 'application/json' }));\r\n\r\nexport default GeneratePresignedUrl$;\r\n","import Axios from \"../Axios\";\r\nimport { from } from \"rxjs\";\r\n\r\nconst UploadImageToS3$ = (uploadURL, data, md5, contentType, params) => {\r\n  console.log(\"IMGMD5 UPLOAD\", data);\r\n//   var formData = new FormData();\r\n//   formData.append('file', data, 'someFileName.png');\r\n  return from(\r\n    Axios.request({\r\n      method: \"PUT\",\r\n      url: uploadURL,\r\n      data: data,\r\n      headers: {\r\n        // \"Access-Control-Allow-Origin\": \"*\",\r\n        \"Content-MD5\": md5,\r\n        \"Content-Type\": contentType\r\n      },\r\n    })\r\n  );\r\n};\r\n\r\nexport default UploadImageToS3$;\r\n","import Axios from \"../Axios\";\r\nimport { from } from \"rxjs\";\r\n\r\n// {{url}}/cardata/external/companies/{{otp}}/assessments/{{assessment_id}}/files/{{image_request_id}}\r\nconst UpdateImageFileMetaDataArea$ = (\r\n  otp,\r\n  assessmentId,\r\n  deviceId,\r\n  imageRequestId,\r\n  gps,\r\n  originalImageResolution,\r\n  tags,\r\n  uploadDone\r\n) =>\r\n  from(\r\n    Axios.put(\r\n      `/cardata/external/companies/${otp}/assessments/${assessmentId}/files/${imageRequestId}`,\r\n      {\r\n        \"gps\": gps,\r\n        \"original_image_resolution\" : originalImageResolution,\r\n        \"tags\" : tags,\r\n        \"upload_done\" : uploadDone\r\n      },\r\n      { headers: { \"device-id\": deviceId }, \"Content-Type\": \"application/json\" }\r\n    )\r\n  );\r\n\r\nexport default UpdateImageFileMetaDataArea$;\r\n","import React from 'react';\r\n\r\nconst CarDataContext = React.createContext([]);\r\n\r\nexport default CarDataContext;","import md5 from \"crypto-js/md5\";\r\nimport encLatin1 from \"crypto-js/enc-latin1\";\r\nimport encBase64 from \"crypto-js/enc-base64\";\r\nimport sparkMD5 from 'spark-md5';\r\n\r\nexport const getReso = (width, height) => {\r\n  switch (`${width}x${height}`) {\r\n    case \"4032x3024\":\r\n      return \"DCI 4K (iCAM 12MP)\";\r\n    case \"3840x2160\":\r\n      return \"4K (iCAM 12MP)\";\r\n    case \"4096x2160\":\r\n      return \"DCI 4K\";\r\n    case \"3840x2160\":\r\n      return \"4K\";\r\n    case \"2048x1152\":\r\n      return \"2K\";\r\n    case \"1920x1080\":\r\n      return \"Full HD\";\r\n    case \"1280x720\":\r\n      return \"HD\";\r\n    case \"640x480\":\r\n      return \"SD\";\r\n    default:\r\n      switch (width) {\r\n        case 4032:\r\n          return \"DCI 4K\";\r\n        case 3840:\r\n          return \"4K\";\r\n        case 2048:\r\n          return \"2K\";\r\n        case 1920:\r\n          return \"Full HD\";\r\n        case 1280:\r\n          return \"HD\";\r\n        case 640:\r\n          return \"HD\";\r\n        default:\r\n          return \"Non SD\";\r\n      }\r\n  }\r\n};\r\n\r\nexport async function getMedia() {\r\n  let stream = null;\r\n  const supportedConstraints = navigator.mediaDevices.getSupportedConstraints();\r\n  console.log(\"Supported Constraints\", supportedConstraints);\r\n  try {\r\n    try {\r\n      stream = await navigator.mediaDevices.getUserMedia({\r\n        audio: false,\r\n        video: { facingMode: { exact: \"environment\" } },\r\n      });\r\n    } catch (err) {\r\n      try {\r\n        stream = await navigator.mediaDevices.getUserMedia({\r\n          audio: false,\r\n          video: { facingMode: { exact: \"user\" } },\r\n        });\r\n      } catch (e) {\r\n        stream = await navigator.mediaDevices.getUserMedia({\r\n          audio: false,\r\n          video: true,\r\n        });\r\n      }\r\n    }\r\n\r\n    const videoTracks = await stream.getVideoTracks();\r\n    const videoTrack = videoTracks[0];\r\n    if (\"getCapabilities\" in videoTracks[0]) {\r\n      const capabilities = videoTracks[0].getCapabilities();\r\n    }\r\n    const settings = videoTrack.getSettings();\r\n    let reso = \"\";\r\n    if (navigator.platform.indexOf(\"Mac\") > -1) {\r\n      try {\r\n        // DCI 4K - iCam 12 MP\r\n        reso = \"DCI 4K\";\r\n        const constraints = {\r\n          width: { ideal: 4032 },\r\n          height: { ideal: 3024 },\r\n        };\r\n        await videoTrack.applyConstraints(constraints);\r\n      } catch (e) {\r\n        try {\r\n          // UHD - iCam 8 MP\r\n          reso = \"DCI 4K\";\r\n          const constraints = {\r\n            width: { ideal: 3840 },\r\n            height: { ideal: 2160 },\r\n          };\r\n          await videoTrack.applyConstraints(constraints);\r\n        } catch (e) {\r\n          try {\r\n            // UHD - iCam 8 MP\r\n            reso = \"DCI 4K\";\r\n            const constraints = {\r\n              width: { ideal: 3840 },\r\n              height: { ideal: 2160 },\r\n            };\r\n            await videoTrack.applyConstraints(constraints);\r\n          } catch (e) {\r\n            try {\r\n              // Full HD\r\n              reso = \"Full HD\";\r\n              const constraints = {\r\n                width: { ideal: 1920 },\r\n                height: { ideal: 1080 },\r\n              };\r\n              await videoTrack.applyConstraints(constraints);\r\n            } catch (e) {\r\n              try {\r\n                // HD\r\n                reso = \"HD\";\r\n\r\n                const constraints = {\r\n                  width: { ideal: 1280 },\r\n                  height: { ideal: 720 },\r\n                };\r\n                await videoTrack.applyConstraints(constraints);\r\n              } catch (e) {\r\n                try {\r\n                  // HD\r\n                  reso = \"SD\";\r\n                  const constraints = {\r\n                    width: { ideal: 640 },\r\n                    height: { ideal: 480 },\r\n                  };\r\n                  await videoTrack.applyConstraints(constraints);\r\n                } catch (e) {\r\n                  alert(e);\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      try {\r\n        // DCI 4K\r\n        reso = \"DCI 4K\";\r\n        const constraints = {\r\n          width: { ideal: 4096 },\r\n          height: { ideal: 2160 },\r\n        };\r\n        console.log(\"DCI 4k\", constraints);\r\n        await videoTrack.applyConstraints(constraints);\r\n      } catch (e) {\r\n        try {\r\n          // UHD\r\n          reso = \"UHD\";\r\n          const constraints = {\r\n            width: { ideal: 3840 },\r\n            height: { ideal: 2160 },\r\n          };\r\n          console.log(\"UHD\", constraints);\r\n\r\n          await videoTrack.applyConstraints(constraints);\r\n        } catch (e) {\r\n          try {\r\n            // 2K\r\n            reso = \"2K\";\r\n            const constraints = {\r\n              width: { ideal: 2048 },\r\n              height: { ideal: 1152 },\r\n            };\r\n            console.log(\"2K\", constraints);\r\n\r\n            await videoTrack.applyConstraints(constraints);\r\n          } catch (e) {\r\n            try {\r\n              // Full HD\r\n              reso = \"Full HD\";\r\n              const constraints = {\r\n                width: { ideal: 1920 },\r\n                height: { ideal: 1080 },\r\n              };\r\n              console.log(\"Full HD\", constraints);\r\n\r\n              await videoTrack.applyConstraints(constraints);\r\n            } catch (e) {\r\n              try {\r\n                // HD\r\n                reso = \"HD\";\r\n\r\n                const constraints = {\r\n                  width: { ideal: 1280 },\r\n                  height: { ideal: 720 },\r\n                };\r\n                console.log(\"HD\", constraints);\r\n\r\n                await videoTrack.applyConstraints(constraints);\r\n              } catch (e) {\r\n                try {\r\n                  // HD\r\n                  reso = \"SD\";\r\n                  const constraints = {\r\n                    width: { ideal: 640 },\r\n                    height: { ideal: 480 },\r\n                  };\r\n                  console.log(\"SD\", constraints);\r\n\r\n                  await videoTrack.applyConstraints(constraints);\r\n                } catch (e) {\r\n                  alert(e);\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    const updatedSettings = videoTrack.getSettings();\r\n    updatedSettings.reso = reso;\r\n    return { stream, settings: updatedSettings, reso: reso };\r\n    /* use the stream */\r\n  } catch (err) {\r\n    console.error(err);\r\n    /* handle the error */\r\n  }\r\n}\r\n\r\nexport const getMD5 = (blob, name) =>\r\n  new Promise((resolve, reject) => {\r\n    console.log(\"dataURL\", blob);\r\n    const fileReader = new FileReader();\r\n    const hash = md5(blob);\r\n    fileReader.onloadend = async function (file) {\r\n      const iconName = \"sample\";\r\n      const content = new Uint8Array(fileReader.result);\r\n      \r\n      console.log(fileReader.result);\r\n      const hash = btoa(sparkMD5.ArrayBuffer.hash(fileReader.result, true));//md5(fileReader.result);\r\n      console.log(\"dataURL\", hash, fileReader.result);\r\n      resolve([hash, fileReader.result]);\r\n    };\r\n    fileReader.readAsArrayBuffer(blob);\r\n  });","import React from \"react\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport OverlayWindow from \"../../../OverlayWindow\";\r\nimport OverlayMessageBox from \"../../../OverlayMessageBox\";\r\nimport RoundedButton from \"../../../RoundedButton\";\r\nimport { DialogTitle, Typography } from \"@material-ui/core\";\r\nimport { Dialog, DialogActions } from \"@material-ui/core\";\r\nimport styled from \"@material-ui/core/styles/styled\";\r\nimport GeneratePresignedUrl$ from \"../../../../APIConfig/GeneratePresignedUrl\";\r\nimport UploadImageToS3$ from \"../../../../APIConfig/UploadImageToS3\";\r\nimport UpdateImageFileMetaDataBarcode$ from \"../../../../APIConfig/UpdateImageFileMetaDataBarcode\";\r\nimport CarDataContext from \"../../../../CarDataContext\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport {\r\n  BrowserMultiFormatReader,\r\n  NotFoundException,\r\n  Result,\r\n} from \"@zxing/library\";\r\n\r\nimport { getMD5 } from \"../../../MediaStream/helper\";\r\nimport { useEffect } from \"react\";\r\n// import geoLocation from \"../../../../utils/geoLocation\";\r\nconst Divider = styled(Box)({\r\n  height: \"1px\",\r\n  backgroundColor: \"#EBEBEB\",\r\n});\r\nconst License = (props) => {\r\n  const { t } = useTranslation();\r\n  const [licenseData, setlicenseData] = React.useState([]);\r\n  const codeReader = new BrowserMultiFormatReader();\r\n  const result = React.useRef();\r\n  const video = React.useRef();\r\n  const handleClicked = () => {\r\n    console.log(\"next Clicked\", props.nextAction);\r\n    props.nextAction(licenseData);\r\n  };\r\n  const handleReset = () => {\r\n    console.log(\"RESET\");\r\n    setlicenseData([]);\r\n    codeReader.reset();\r\n  };\r\n  let carData = React.useContext(CarDataContext);\r\n  if (Object.keys(carData).length === 0 && carData.constructor === Object) {\r\n    carData = {\r\n      login: JSON.parse(sessionStorage.getItem(\"login\")),\r\n      geoLocation: JSON.parse(sessionStorage.getItem(\"geoLocation\")),\r\n    };\r\n  }\r\n  useEffect(async () => {\r\n    let videoInputDevices;\r\n    try {\r\n      videoInputDevices = codeReader.decodeFromConstraints({\r\n        audio: false,\r\n        video: { facingMode: { exact: \"environment\" } },\r\n      });\r\n    } catch (err) {\r\n      try {\r\n        videoInputDevices = codeReader.decodeFromConstraints({\r\n          audio: false,\r\n          video: { facingMode: { exact: \"user\" } },\r\n        });\r\n        // stream = await navigator.mediaDevices.getUserMedia();\r\n      } catch (e) {\r\n        videoInputDevices = codeReader.decodeFromConstraints({\r\n          audio: false,\r\n          video: true,\r\n        });\r\n      }\r\n    }\r\n\r\n    // const videoInputDevices = codeReader.listVideoInputDevices();\r\n    console.log(\"codeReader\", codeReader);\r\n    console.log(\r\n      `Started continous decode from camera with id ${videoInputDevices[0]}`\r\n    );\r\n    console.log(result.current);\r\n    codeReader.decodeFromVideoDevice(\r\n      videoInputDevices[0],\r\n      video.current,\r\n      (res, err) => {\r\n        if (res) {\r\n          const carInfo = res.text.split(\"%\");\r\n          console.log(\"carInfo\", carInfo);\r\n          setlicenseData(carInfo);\r\n          codeReader.captureCanvas.toBlob(async (blob) => {\r\n            // imageRef.current.style.display = \"block\";\r\n            const [md5Data] = await getMD5(blob);\r\n            console.log(\"BLOB\", blob);\r\n            if(props.toggleWaiting) {\r\n              props.toggleWaiting()\r\n            }\r\n            GeneratePresignedUrl$(\r\n              9994,\r\n              carData.login.assessment_id,\r\n              \"b04d837c-3539-430e-b9ae-159dcbe1e96b\",\r\n              \"PNG\",\r\n              md5Data\r\n            ).subscribe((response) => {\r\n              console.log(\"Uploading the Image to the URL \", response.data);\r\n              //   const parsed = s3Client.URLParse(response.data.uploadUrl);\r\n              try {\r\n                UploadImageToS3$(\r\n                  response.data.uploadUrl,\r\n                  blob,\r\n                  md5Data,\r\n                  \"image/png\"\r\n                  // params\r\n                ).subscribe((uploadResponse) => {\r\n                  if (uploadResponse.status === 200 && props.nextAction) {\r\n                    //  otp,assessmentId,deviceId,imageRequestId, gps, originalImageResolution,tags,uploadDone\r\n                    const tags = [\r\n                      {\r\n                        tag_type: \"VEHICLE_IDENTIFIER\",\r\n                        value: \"BAR_CODE\",\r\n                        make: carInfo[9],\r\n                        model: carInfo[8],\r\n                        license_number: carInfo[6],\r\n                        registration_number: carInfo[7],\r\n                        engine_number: carInfo[13],\r\n                        vin_number: carInfo[12],\r\n                      },\r\n                    ];\r\n                    UpdateImageFileMetaDataBarcode$(\r\n                      9994,\r\n                      carData.login.assessment_id,\r\n                      \"b04d837c-3539-430e-b9ae-159dcbe1e96b\",\r\n                      response.data.id,\r\n                      carData.geoLocation,\r\n                      {\r\n                        height: codeReader.captureCanvas.width,\r\n                        width: codeReader.captureCanvas.width,\r\n                      },\r\n                      tags,\r\n                      true\r\n                    );\r\n                  }\r\n                });\r\n              } catch (e) {\r\n                console.error(\"Error\", e);\r\n              }\r\n            });\r\n          });\r\n\r\n          // result.current.textContent = res.text\r\n          codeReader.stopStreams();\r\n        }\r\n        if (err && !(err instanceof NotFoundException)) {\r\n          console.error(err);\r\n          // result.current.textContent = err\r\n        }\r\n      }\r\n    );\r\n  }, []);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Box\r\n        p={2}\r\n        style={{ display: \"block\", width: \"100%\", position: \"absolute\" }}\r\n      >\r\n        <OverlayMessageBox>\r\n          <Box p={2}>\r\n            <Box p={1}>\r\n              <Typography variant=\"body1\">{t(\"Generate Vehicle Details\")}</Typography>\r\n            </Box>\r\n            <Grid container>\r\n              <Grid item xs={1}></Grid>\r\n              <Grid item xs={4}>\r\n                <Box>\r\n                  <RoundedButton\r\n                    color=\"secondary\"\r\n                    size=\"small\"\r\n                    fullWidth={false}\r\n                    label={t(\"License Disc\")}\r\n                    // onClick={() => setDetailsOpen(true)}\r\n                  />\r\n                </Box>\r\n              </Grid>\r\n              <Grid item xs={1}></Grid>\r\n\r\n              <Grid item xs={4}>\r\n                <Box>\r\n                  <RoundedButton\r\n                    color=\"secondary\"\r\n                    size=\"small\"\r\n                    fullWidth={false}\r\n                    label={t(\"Vin Number\")}\r\n                    variant=\"text\"\r\n                  />\r\n                </Box>\r\n              </Grid>\r\n              <Grid item xs={1}></Grid>\r\n            </Grid>\r\n          </Box>\r\n        </OverlayMessageBox>\r\n      </Box>\r\n      <Box\r\n        p={4}\r\n        style={{\r\n          display: \"block\",\r\n          width: \"100%\",\r\n          position: \"absolute\",\r\n          top: \"20%\",\r\n          zIndex: 200,\r\n          textAlign: \"center\",\r\n          color: \"white\",\r\n        }}\r\n      >\r\n        <Typography>\r\n          {t(\"Place our License disc within the frames and hold it there for a few seconds.\")}\r\n        </Typography>\r\n      </Box>\r\n      <Box>\r\n        <div>\r\n          <video id=\"video\" width=\"300\" height=\"200\" ref={video}></video>\r\n        </div>\r\n      </Box>\r\n\r\n      <Box style={{ top: 0, left: 0 }}>\r\n        <OverlayWindow windowSize={24} />\r\n      </Box>\r\n      <Box\r\n        p={4}\r\n        style={{\r\n          display: \"block\",\r\n          width: \"100%\",\r\n          position: \"absolute\",\r\n          top: \"64%\",\r\n          zIndex: 200,\r\n          textAlign: \"center\",\r\n          color: \"white\",\r\n        }}\r\n      >\r\n        <Typography>{t(\"Move Closer to the scan area.\")}</Typography>\r\n      </Box>\r\n      <Dialog open={licenseData.length > 0} size=\"md\">\r\n        <DialogTitle disableTypography=\"false\">\r\n          <Typography variant=\"h4\" style={{ textAlign: \"center\" }}>\r\n            {t(\"Details found !\")}\r\n          </Typography>\r\n        </DialogTitle>\r\n        <Box p={1} m={2} textAlign=\"center\">\r\n          <Typography variant=\"h6\">{licenseData[9]}</Typography>\r\n          <Divider />\r\n          <Typography variant=\"body2\" textAlign=\"center\">\r\n            {t(\"Make\")}\r\n          </Typography>\r\n        </Box>\r\n        <Box p={1} m={2} textAlign=\"center\">\r\n          <Typography variant=\"h6\">{licenseData[8]}</Typography>\r\n          <Divider />\r\n          <Typography variant=\"body2\" textAlign=\"center\">\r\n            {t(\"Model\")}\r\n          </Typography>\r\n        </Box>\r\n        <Box p={1} m={2} textAlign=\"center\">\r\n          <Typography variant=\"h6\">{licenseData[6]}</Typography>\r\n          <Divider />\r\n          <Typography variant=\"body2\" textAlign=\"center\">\r\n            {t(\"License No\")}\r\n          </Typography>\r\n        </Box>\r\n        <Box p={1} m={2} textAlign=\"center\">\r\n          <Typography variant=\"h6\">{licenseData[12]}</Typography>\r\n          <Divider />\r\n          <Typography variant=\"body2\" textAlign=\"center\">\r\n            {t(\"Vin No\")}\r\n          </Typography>\r\n        </Box>\r\n        <DialogActions>\r\n          <RoundedButton\r\n            label={(\"Retake\")}\r\n            color=\"tertiary\"\r\n            onClick={handleReset}\r\n          ></RoundedButton>\r\n          <RoundedButton\r\n            label={t(\"Confirm\")}\r\n            onClick={handleClicked}\r\n          ></RoundedButton>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </React.Fragment>\r\n  );\r\n  // return <Backdrop open={true}></Backdrop>\r\n};\r\n\r\nexport default License;\r\n","import React from 'react';\r\nimport Icon from '@material-ui/core/Icon';\r\nconst CaptureIcon = (props) => {\r\n\treturn (\r\n\t\t<Icon style={{ height: '100%', width: '100%' }}>\r\n\t\t\t<img src='/images/CaptureButton.png' style={{ textAlign: 'center', width: '80px' }} />\r\n\t\t</Icon>\r\n\t);\r\n};\r\n\r\nexport default CaptureIcon;\r\n","import React from 'react';\r\nimport Box from '@material-ui/core/Box';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nimport CaptureIcon from '../CaptureIcon';\r\n\r\nconst CaptureButton = (props) => {\r\n\treturn (\r\n\t\t<Box\r\n\t\t\tp={4}\r\n\t\t\tstyle={{\r\n\t\t\t\tdisplay: 'block',\r\n\t\t\t\tposition: 'absolute',\r\n\t\t\t\ttop: '40%',\r\n\t\t\t\tright: '0%',\r\n\t\t\t\tzIndex: 205,\r\n\t\t\t\ttextAlign: 'center',\r\n\t\t\t\tcolor: 'white',\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t<IconButton onClick={props.onClick}>\r\n\t\t\t\t<CaptureIcon />\r\n\t\t\t</IconButton>\r\n\t\t</Box>\r\n\t);\r\n};\r\n\r\nexport default CaptureButton;","import Axios from \"../Axios\";\r\nimport { from } from \"rxjs\";\r\n\r\n// {{url}}/cardata/external/companies/{{otp}}/assessments/{{assessment_id}}/files/{{image_request_id}}\r\nconst UpdateImageFileMetaDataArea$ = (\r\n  otp,\r\n  assessmentId,\r\n  deviceId,\r\n  imageRequestId,\r\n  gps,\r\n  originalImageResolution,\r\n  tags,\r\n  uploadDone\r\n) =>\r\n  from(\r\n    Axios.put(\r\n      `/cardata/external/companies/${otp}/assessments/${assessmentId}/files/${imageRequestId}`,\r\n      {\r\n        \"gps\": gps,\r\n        \"original_image_resolution\" : originalImageResolution,\r\n        \"tags\" : tags,\r\n        \"upload_done\" : uploadDone\r\n      },\r\n      { headers: { \"device-id\": deviceId }, \"Content-Type\": \"application/json\" }\r\n    )\r\n  );\r\n\r\nexport default UpdateImageFileMetaDataArea$;\r\n","import React, { useEffect } from \"react\";\r\nimport { getMedia, getReso, getMD5 } from \"./helper\";\r\nimport { useDrag, useDragDropManager, useDrop } from \"react-dnd\";\r\n\r\nimport DebugData from \"../DebugData\";\r\nimport { usePreview } from \"react-dnd-preview\";\r\n// import Hierarchy from './components/Hierarchy';\r\nimport CaptureButton from \"../CaptureButton\";\r\nimport GeneratePresignedUrl$ from \"../../APIConfig/GeneratePresignedUrl\";\r\nimport UploadImageToS3$ from \"../../APIConfig/UploadImageToS3\";\r\nimport UpdateImageFileMetaDataArea$ from \"../../APIConfig/UpdateImageFileMetaDataArea\";\r\nimport CarDataContext from \"../../CarDataContext\";\r\n\r\nimport { S3Client } from \"@aws-sdk/client-s3\";\r\n// or with ES6 modulesBinaryBitmap(new HybridBinarizer\r\nimport {\r\n  MultiFormatReader,\r\n  BarcodeFormat,\r\n  DecodeHintType,\r\n  RGBLuminanceSource,\r\n  BitmapLuminanceSource,\r\n  BinaryBitmap,\r\n  BitSource,\r\n  HybridBinarizer,\r\n  PDF417Reader,\r\n} from \"@zxing/library\";\r\n\r\nconst ItemTypes = {\r\n  BOUNDARY: \"boundry\",\r\n};\r\n\r\nconst MediaStream = (props) => {\r\n  const debug = false;\r\n  const videoRef = React.useRef();\r\n  const videoWrapper = React.useRef();\r\n\r\n  const imageRef = React.useRef();\r\n  const thumbnail = React.useRef();\r\n  const bboxWrapper = React.useRef();\r\n  const canvasRef = React.useRef();\r\n  const imageCanvasRef = React.useRef();\r\n  const [currentBBox, setCurrentBBox] = React.useState();\r\n  const downloadAnchor = React.useRef();\r\n  const [mediaSettings, setMediaSettings] = React.useState({});\r\n  const [debugData, setDebugData] = React.useState({});\r\n  const [capturing, setCapturing] = React.useState(false);\r\n  const [bboxProperties, setBboxProperties] = React.useState();\r\n  const [stage, setStage] = React.useState(\"INIT\");\r\n  const dragDropManager = useDragDropManager();\r\n  const monitor = dragDropManager.getMonitor();\r\n  const imageBboxRef = React.useRef();\r\n  const [currentPosition, setCurrentPosition] = React.useState({ x: 0, y: 0 });\r\n  const [dragInitPositionDiff, setDragInitPositionDiff] = React.useState({\r\n    x: 0,\r\n    y: 0,\r\n  });\r\n  let carData = React.useContext(CarDataContext);\r\n  if (Object.keys(carData).length === 0 && carData.constructor === Object) {\r\n    carData = {\r\n      login: JSON.parse(sessionStorage.getItem(\"login\")),\r\n      geoLocation: JSON.parse(sessionStorage.getItem(\"geoLocation\")),\r\n    };\r\n  }\r\n  console.log(\"carData\", carData);\r\n  const [{ isDragging }, bbox] = useDrag(() => ({\r\n    type: ItemTypes.BOUNDARY,\r\n    collect: (monitor) => ({\r\n      isDragging: !!monitor.isDragging(),\r\n    }),\r\n  }));\r\n  const [{ isOver }, drop] = useDrop(\r\n    () => ({\r\n      accept: ItemTypes.BOUNDARY,\r\n      drop: () => moveBox(currentBBox, currentPosition, dragInitPositionDiff),\r\n      collect: (monitor) => ({\r\n        isOver: !!monitor.isOver(),\r\n      }),\r\n    }),\r\n    [currentPosition, dragInitPositionDiff, currentBBox]\r\n  );\r\n  const moveBox = (cbbox, cp, diff) => {\r\n    const x = cp.x - diff.x;\r\n    const y = cp.y - diff.y;\r\n    console.log(cbbox, cp, diff);\r\n    const rbox = cbbox.current.getClientRects();\r\n    const x1 = x + rbox[0].width;\r\n    const y1 = y + rbox[0].height;\r\n    cbbox.current.style.left = `${x}px`;\r\n    cbbox.current.style.top = `${y}px`;\r\n    const newBboxProperties = {\r\n      ...bboxProperties,\r\n      [cbbox.current.id]: [\r\n        { x, y },\r\n        { x: x1, y: y1 },\r\n      ],\r\n    };\r\n    setBboxProperties(newBboxProperties);\r\n    // drag.current.left = `${currentPosition.x}px`;\r\n    // drag.current.top = `${currentPosition.y}px`;\r\n  };\r\n  const MyPreview = () => {\r\n    const { display, itemType, item, style } = usePreview();\r\n    if (!display) {\r\n      return null;\r\n    }\r\n    return (\r\n      <div className=\"boundingBoxWrapper\" style={style}>\r\n        <div className=\"boundingBox\"></div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const getTargetDimensions = React.useCallback(\r\n    (ms) => {\r\n      const videoWidth = ms.width;\r\n      const videoHeight = ms.height;\r\n      const toImgWidth = 1920;\r\n      const toImgHeight = Math.floor((toImgWidth * videoHeight) / videoWidth);\r\n\r\n      let toWidth = videoWrapper.current.offsetWidth;\r\n      let toHeight = videoWrapper.current.offsetHeight;\r\n      if (toWidth > toHeight) {\r\n        toHeight = Math.floor((toWidth * videoHeight) / videoWidth);\r\n      } else {\r\n        toWidth = Math.floor((toHeight * videoWidth) / videoHeight);\r\n      }\r\n      const scaleRatioX = toWidth / videoWidth;\r\n      const scaleRatioY = toHeight / videoHeight;\r\n      const scaleImageX = toImgWidth / videoWidth;\r\n      const scaleImageY = toImgHeight / videoHeight;\r\n      let toX = 0;\r\n      let toY = 0;\r\n      if (toWidth > document.documentElement.clientWidth) {\r\n        toX = -(toWidth - document.documentElement.clientWidth) / 2;\r\n      }\r\n      let toImgX = 0;\r\n      let toImgY = 0;\r\n      if (toWidth > document.documentElement.clientWidth) {\r\n        toImgX = -(toImgWidth - document.documentElement.clientWidth) / 2;\r\n      }\r\n\r\n      return {\r\n        videoWidth,\r\n        videoHeight,\r\n        toWidth,\r\n        toHeight,\r\n        toX,\r\n        toY,\r\n        scaleRatioX,\r\n        scaleRatioY,\r\n        toImgWidth,\r\n        toImgHeight,\r\n        toImgX,\r\n        toImgY,\r\n        scaleImageX,\r\n        scaleImageY,\r\n      };\r\n    },\r\n    [videoWrapper]\r\n  );\r\n\r\n  const renderMedia = React.useCallback(async () => {\r\n    const media = await getMedia();\r\n    // debugger;\r\n    if (media && videoRef.current) {\r\n      if (\"srcObject\" in videoRef.current) {\r\n        videoRef.current.srcObject = media.stream;\r\n      } else {\r\n        videoRef.src = window.URL.createObjectURL(media.stream);\r\n      }\r\n      setMediaSettings(media.settings);\r\n      const {\r\n        videoWidth,\r\n        videoHeight,\r\n        toWidth,\r\n        toHeight,\r\n        toX,\r\n        toY,\r\n        scaleRatioX,\r\n        scaleRatioY,\r\n        toImgWidth,\r\n        toImgHeight,\r\n        toImgX,\r\n        toImgY,\r\n        scaleImageX,\r\n        scaleImageY,\r\n      } = getTargetDimensions(media.settings);\r\n\r\n      videoRef.current.width = videoWidth;\r\n      videoRef.current.height = videoHeight;\r\n      imageRef.current.width = toImgWidth; //toImgWidth;\r\n      imageRef.current.height = toImgHeight; //toImgHeight;\r\n      if (toWidth < document.documentElement.clientWidth) {\r\n        videoRef.current.style.transform = `translate(${-videoRef.current\r\n          .offsetLeft}px, ${-videoRef.current\r\n          .offsetTop}px) scale(${scaleRatioX}, ${scaleRatioY})`;\r\n      } else {\r\n        console.log(\r\n          `translate(${-toX}px, ${-toY}px) scale(${scaleRatioX}, ${scaleRatioY})`\r\n        );\r\n        videoRef.current.style.transform = `translate(${toX}px, ${-videoRef\r\n          .current.offsetTop}px) scale(${scaleRatioX}, ${scaleRatioY})`;\r\n      }\r\n\r\n      videoRef.current.style.transformOrigin = \"top left\";\r\n      imageCanvasRef.current.width = toImgWidth; //;toImgWidth; //media.settings.width; //window.innerWidth;\r\n      imageCanvasRef.current.height = toImgHeight; //; //media.settings.height; //window.innerHeight;\r\n      const ctx = imageCanvasRef.current.getContext(\"2d\");\r\n      ctx.scale(scaleImageX, scaleImageY);\r\n      imageCanvasRef.current.style.width = `${toWidth}px`;\r\n      imageCanvasRef.current.style.height = `${toHeight}px`;\r\n      const newDebugData = {\r\n        video: `${videoWidth} x ${videoHeight} (${getReso(\r\n          videoWidth,\r\n          videoHeight\r\n        )})`,\r\n        scale: `${scaleRatioX} x ${scaleRatioY}`,\r\n        media: `${media.settings.width} x ${media.settings.height}`,\r\n        target: `${toWidth} x ${toHeight}`,\r\n        targetXY: `${toX} x ${toY}`,\r\n      };\r\n      // setInterval(() => readBarcode(toWidth, toHeight), 2000)\r\n      setDebugData(newDebugData);\r\n    }\r\n  }, [videoRef, videoWrapper, canvasRef, imageCanvasRef]);\r\n\r\n  window.addEventListener(\"orientationchange\", function (event) {\r\n    renderMedia();\r\n  });\r\n\r\n  useEffect(async () => {\r\n    renderMedia();\r\n  }, [videoRef, videoWrapper, canvasRef, imageCanvasRef]);\r\n\r\n  const captureImage = async () => {\r\n    const {\r\n      videoWidth,\r\n      videoHeight,\r\n      toWidth,\r\n      toHeight,\r\n      toX,\r\n      toY,\r\n      scaleRatioX,\r\n      scaleRatioY,\r\n      toImgWidth,\r\n      toImgHeight\r\n    } = getTargetDimensions(mediaSettings);\r\n\r\n    const ctx = imageCanvasRef.current.getContext(\"2d\");\r\n    setCapturing(true);\r\n    videoRef.current.pause();\r\n    // videoRef.current.currentTime = 0;\r\n    // ctx.scale(scaleRatioX, scaleRatioY);\r\n    ctx.drawImage(videoRef.current, 2, 0);\r\n\r\n    const url = imageCanvasRef.current.toDataURL(\"image/png\");\r\n    const imgData = ctx.getImageData(0, 0, toImgWidth, toImgHeight);\r\n    const thumbWidth = 480;\r\n    const ctxt = thumbnail.current.getContext(\"2d\");\r\n    thumbnail.current.width = thumbWidth; //imageCanvasRef.current.width;\r\n    thumbnail.current.height = thumbnail.current.width / 1.7;\r\n    ctxt.scale(\r\n      thumbWidth / imageCanvasRef.current.width,\r\n      thumbWidth / 1.7 / imageCanvasRef.current.height\r\n    );\r\n    ctxt.drawImage(videoRef.current, 2, 0);\r\n    const thumbnailUrl = thumbnail.current.toDataURL(\"image/png\");\r\n    downloadAnchor.current.href = thumbnailUrl;\r\n    // downloadAnchor.current.download = 'MyPhoto.png';\r\n    // downloadAnchor.current.click();\r\n    imageCanvasRef.current.toBlob(async (blob) => {\r\n      // imageRef.current.style.display = \"block\";\r\n      const [md5Data] = await getMD5(blob);\r\n      console.log(\"BLOB\", blob);\r\n      if (props.toggleWaiting) {\r\n        props.toggleWaiting();\r\n      }\r\n      GeneratePresignedUrl$(\r\n        9994,\r\n        carData.login.assessment_id,\r\n        \"b04d837c-3539-430e-b9ae-159dcbe1e96b\",\r\n        \"PNG\",\r\n        md5Data\r\n      ).subscribe((response) => {\r\n        console.log(\"Uploading the Image to the URL \", response.data);\r\n        //   const parsed = s3Client.URLParse(response.data.uploadUrl);\r\n        try {\r\n          UploadImageToS3$(\r\n            response.data.uploadUrl,\r\n            blob,\r\n            md5Data,\r\n            \"image/png\"\r\n            // params\r\n          ).subscribe((uploadResponse) => {\r\n            if (uploadResponse.status === 200 && props.nextAction) {\r\n              //  otp,assessmentId,deviceId,imageRequestId, gps, originalImageResolution,tags,uploadDone\r\n              UpdateImageFileMetaDataArea$(\r\n                9994,\r\n                carData.login.assessment_id,\r\n                \"b04d837c-3539-430e-b9ae-159dcbe1e96b\",\r\n                response.data.id,\r\n                carData.geoLocation,\r\n                {\r\n                  height: toImgHeight,\r\n                  width: toImgWidth,\r\n                },\r\n                [\r\n                  {\r\n                    tag_type: \"AREA\",\r\n                    value: props.side,\r\n                  },\r\n                ],\r\n                true\r\n              );\r\n              props.nextAction({ ...response.data, thumbnail: thumbnailUrl });\r\n            } else {\r\n            }\r\n          });\r\n        } catch (e) {\r\n          console.error(\"Error\", e);\r\n        }\r\n      });\r\n    });\r\n    // setTimeout(() => setCapturing(false), 3000);\r\n    setStage(\"CAPTURED\");\r\n  };\r\n\r\n  const captureBox = () => {\r\n    const videoWidth = mediaSettings.width;\r\n    const videoHeight = mediaSettings.height;\r\n    const toWidth = videoWrapper.current.offsetWidth; //document.documentElement.clientWidth; //window.innerWidth;\r\n    const toHeight = Math.floor((toWidth * videoHeight) / videoWidth); //window.innerHeight;\r\n    // const ratio = media.settings.aspectRatio;\r\n    const scaleRatioY = toHeight / videoHeight;\r\n    const scaleRatioX = toWidth / videoWidth;\r\n    const ctx = imageCanvasRef.current.getContext(\"2d\");\r\n    ctx.lineWidth = \"2\";\r\n\r\n    ctx.globalAlpha = 0.2;\r\n    ctx.fillStyle = \"#FFD600\";\r\n\r\n    ctx.fillRect(\r\n      bboxWrapper.current.offsetLeft / scaleRatioX,\r\n      bboxWrapper.current.offsetTop / scaleRatioY,\r\n      bboxWrapper.current.offsetWidth / scaleRatioX,\r\n      bboxWrapper.current.offsetHeight / scaleRatioY\r\n    );\r\n    ctx.globalAlpha = 1;\r\n    ctx.strokeStyle = \"#ff7300\";\r\n    ctx.stroke();\r\n    setCapturing(true);\r\n    // videoRef.current.pause();\r\n    // videoRef.current.currentTime = 0;\r\n    // // ctx.scale(scaleRatioX, scaleRatioY);\r\n    // ctx.drawImage(videoRef.current, 0, 0);\r\n\r\n    const url = imageCanvasRef.current.toDataURL(\"image/png\");\r\n    imageBboxRef.current.src = url;\r\n    videoRef.current.style.display = \"none\";\r\n    imageBboxRef.current.style.display = \"block\";\r\n    imageRef.current.style.display = \"none\";\r\n    // videoWrapper.current.style.oveflor ='auto';\r\n    // imageRef.current.style.transform = `translate(${-videoRef.current.offsetLeft}px, ${-videoRef.current\r\n    // .offsetTop}px) scale(${scaleRatioX}, ${scaleRatioY})`;\r\n    imageBboxRef.current.style.transformOrigin = \"top left\";\r\n    videoRef.current.style.display = \"none\";\r\n    imageBboxRef.current.style.display = \"block\";\r\n    // photo.current.setAttribute('src', url);\r\n    // downloadAnchor.current.href = url;\r\n    // downloadAnchor.current.download = 'MyPhoto.png';\r\n    // downloadAnchor.current.click();\r\n    // //\r\n    // window.URL.revokeObjectURL(url);\r\n    setTimeout(() => setCapturing(false), 3000);\r\n    setStage(\"CAPTURED\");\r\n  };\r\n  React.useEffect(() => {\r\n    monitor.subscribeToOffsetChange(() => {\r\n      const offset = monitor.getClientOffset();\r\n      const initialClientOffset = monitor.getInitialClientOffset();\r\n      const initialSourceClientOffset = monitor.getInitialSourceClientOffset();\r\n      if (initialClientOffset && initialSourceClientOffset) {\r\n        setDragInitPositionDiff({\r\n          x: initialClientOffset.x - initialSourceClientOffset.x,\r\n          y: initialClientOffset.y - initialSourceClientOffset.y,\r\n        });\r\n        setCurrentPosition(offset);\r\n      }\r\n\r\n      // do stuff like setState, though consider directly updating style through refs for performance\r\n    });\r\n  }, [monitor]);\r\n  const reset = () => {\r\n    videoRef.current.style.display = \"block\";\r\n    const ctx = imageCanvasRef.current.getContext(\"2d\");\r\n    ctx.clearRect(\r\n      0,\r\n      0,\r\n      imageCanvasRef.current.width,\r\n      imageCanvasRef.current.height\r\n    );\r\n    ctx.globalAlpha = 1;\r\n    imageBboxRef.current.style.display = \"none\";\r\n    imageRef.current.style.display = \"none\";\r\n    videoRef.current.play();\r\n    setStage(\"INIT\");\r\n  };\r\n  console.log(\"DRAGGING\", isDragging);\r\n  return (\r\n    <div ref={drop}>\r\n      {debug && (\r\n        <div id=\"debug\">\r\n          <DebugData debugData={debugData} />\r\n        </div>\r\n      )}\r\n      <div\r\n        ref={videoWrapper}\r\n        className=\"videoWrapper\"\r\n        style={{ overflow: stage === \"CAPTURED\" ? \"auto\" : \"hidden\" }}\r\n      >\r\n        {/* <div ref={videoWrapper}> */}\r\n        <video\r\n          ref={videoRef}\r\n          id=\"camvideo\"\r\n          autoPlay\r\n          playsInline\r\n          // onLoadedMetadata={metaDataLoadHandle}\r\n          // style={{ display: 'none' }}\r\n          // className=\"videosize\"\r\n          // style={{ border: \"solid 2px red\" }}\r\n        ></video>\r\n        <img\r\n          ref={imageRef}\r\n          style={{ border: \"solid 2px red\", display: \"none\" }}\r\n        ></img>\r\n        <img\r\n          ref={imageBboxRef}\r\n          style={{ border: \"solid 2px red\", display: \"none\" }}\r\n        ></img>\r\n      </div>\r\n\r\n      <div style={{ position: \"absolute\" }}>\r\n        <canvas\r\n          ref={canvasRef}\r\n          style={{ border: \"solid 2px red\", display: \"none\" }}\r\n        ></canvas>\r\n        <canvas\r\n          ref={imageCanvasRef}\r\n          style={{ border: \"solid 2px green\", display: \"none\" }}\r\n        ></canvas>\r\n        <canvas\r\n          ref={thumbnail}\r\n          style={{\r\n            border: \"solid 2px orange\",\r\n            position: \"absolute\",\r\n            bottom: \"10px\",\r\n            zIndex: \"1000\",\r\n            display: \"none\",\r\n          }}\r\n        ></canvas>\r\n      </div>\r\n      <a\r\n        id=\"downloadAnchor\"\r\n        href=\"http://chetandr.github.com\"\r\n        ref={downloadAnchor}\r\n        style={{ display: \"none\" }}\r\n      >\r\n        image\r\n      </a>\r\n      {stage === \"BBOX\" && (\r\n        <div\r\n          className=\"boundingBoxWrapper\"\r\n          id=\"bbox\"\r\n          ref={bboxWrapper}\r\n          onTouchStart={() => setCurrentBBox(bboxWrapper)}\r\n          onMouseDown={() => setCurrentBBox(bboxWrapper)}\r\n          style={{ opacity: isDragging ? 0 : 1 }}\r\n        >\r\n          <div\r\n            className=\"boundingBox\"\r\n            ref={bbox}\r\n            style={{\r\n              cursor: \"move\",\r\n              display: \"inline-block\",\r\n            }}\r\n          ></div>\r\n        </div>\r\n      )}\r\n      <a\r\n        id=\"downloadAnchor\"\r\n        href=\"http://chetandr.github.com\"\r\n        ref={downloadAnchor}\r\n        style={{ display: \"none\" }}\r\n      >\r\n        image\r\n      </a>\r\n      <MyPreview />\r\n      <CaptureButton onClick={captureImage} />\r\n    </div>\r\n  );\r\n};\r\n\r\nMediaStream.defaultProps = {\r\n  nextAction: () => {},\r\n  side: \"\",\r\n};\r\nexport default MediaStream;\r\n","import { DndProvider } from \"react-dnd\";\r\nimport MediaStream from \"../MediaStream\";\r\nimport { TouchBackend } from \"react-dnd-touch-backend\";\r\nimport { LinearProgress } from \"@material-ui/core\";\r\nfunction MediaStreamWithDnD(props) {\r\n  if (props.side) {\r\n    return (\r\n      <DndProvider backend={TouchBackend} options={{ enableMouseEvents: true }}>\r\n        <MediaStream nextAction={props.nextAction} side={props.side} toggleWaiting={props.toggleWaiting}/>\r\n      </DndProvider>\r\n    );\r\n  } else {\r\n    return <LinearProgress />;\r\n  }\r\n}\r\n\r\nMediaStreamWithDnD.defaultProps = {\r\n  nextAction: () => {},\r\n  side: \"\",\r\n};\r\n\r\nexport default MediaStreamWithDnD;\r\n","import React from 'react';\r\n\r\nconst OverlayImage = (props) => {\r\n\tconst imageName = `/images/overlays/${props.image}`;\r\n\treturn <img src={imageName} width={props.width} />;\r\n};\r\n\r\nOverlayImage.defaultProps = {\r\n\timage: 'FrontFull.png',\r\n\twidth: '60%',\r\n};\r\n\r\nexport default OverlayImage;\r\n","import React from 'react';\r\nimport Backdrop from '@material-ui/core/Backdrop';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Button from '@material-ui/core/Button';\r\nimport OverlayWindow from '../../../OverlayWindow';\r\nimport MediaStreamWithDnD from '../../../MediaStreamWithDnD';\r\nimport OverlayImage from '../../../OverlayImage';\r\nimport RoundedButton from '../../../RoundedButton';\r\nimport { Typography } from '@material-ui/core';\r\nimport PhotoCameraRounded from '@material-ui/icons/PhotoCameraRounded';\r\nimport CaptureIcon from '../../../CaptureIcon';\r\nimport CaptureButton from '../../../CaptureButton';\r\nimport { useTranslation } from \"react-i18next\";\r\nconst Front = (props) => {\r\n\tconst { t } = useTranslation();\r\n\tconst handleClicked = (data) => {\r\n\t\tconsole.log('next Clicked', props.nextAction);\r\n\t\tprops.nextAction(data);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<React.Fragment>\r\n\t\t\t<Box\r\n\t\t\t\tp={4}\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\t// display: 'none',\r\n\t\t\t\t\twidth: '100%',\r\n\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\ttop: '10px',\r\n\t\t\t\t\tzIndex: 200,\r\n\t\t\t\t\ttextAlign: 'center',\r\n\t\t\t\t\tcolor: 'white',\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t <Typography> {t(\"capture\", { side: t(\"front\") })}</Typography>\r\n\t\t\t</Box>\r\n\r\n\t\t\t<MediaStreamWithDnD nextAction={handleClicked} side=\"FRONT_SIDE\" toggleWaiting={props.toggleWaiting}/>\r\n\t\t\t{/* <Box style={{ postion: 'absolute', top: 0, left: 0 }}>\r\n\t\t\t\t<OverlayWindow windowSize={24} />\r\n\t\t\t</Box> */}\r\n\t\t\t{/* <CaptureButton onClick={handleClicked}/> */}\r\n\t\t\t<Box\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\t// display: 'none',\r\n\t\t\t\t\twidth: '100%',\r\n\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\ttop: '20%',\r\n\t\t\t\t\tzIndex: 200,\r\n\t\t\t\t\ttextAlign: 'center',\r\n\t\t\t\t\tcolor: 'white',\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<OverlayImage image='FrontFull.png' width=\"50%\"/>\r\n\t\t\t</Box>\r\n\t\t</React.Fragment>\r\n\t);\r\n\t// return <Backdrop open={true}></Backdrop>\r\n};\r\n\r\nexport default Front;\r\n","import React from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport MediaStreamWithDnD from \"../../../MediaStreamWithDnD\";\r\nimport OverlayImage from \"../../../OverlayImage\";\r\nimport { Typography } from \"@material-ui/core\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nconst License = (props) => {\r\n  const { t } = useTranslation();\r\n  const handleClicked = (data) => {\r\n    console.log(\"next Clicked\", props.nextAction);\r\n    props.nextAction(data);\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Box\r\n        p={4}\r\n        style={{\r\n          display: \"block\",\r\n          width: \"100%\",\r\n          position: \"absolute\",\r\n          top: \"10px\",\r\n          zIndex: 200,\r\n          textAlign: \"center\",\r\n          color: \"white\",\r\n        }}\r\n      >\r\n        <Typography> {t(\"capture\", { side: t(\"driver side\") })}</Typography>\r\n      </Box>\r\n\r\n      <MediaStreamWithDnD\r\n        nextAction={handleClicked}\r\n        side=\"DRIVER_SIDE\"\r\n        toggleWaiting={props.toggleWaiting}\r\n      />\r\n      {/* <Box style={{ postion: 'absolute', top: 0, left: 0 }}>\r\n\t\t\t\t<OverlayWindow windowSize={24} />\r\n\t\t\t</Box> */}\r\n      {/* <CaptureButton onClick={handleClicked}/> */}\r\n      <Box\r\n        style={{\r\n          display: \"block\",\r\n          width: \"100%\",\r\n          position: \"absolute\",\r\n          top: \"35%\",\r\n          zIndex: 200,\r\n          textAlign: \"center\",\r\n          color: \"white\",\r\n        }}\r\n      >\r\n        <OverlayImage image=\"DriverSideFull.png\" />\r\n      </Box>\r\n    </React.Fragment>\r\n  );\r\n  // return <Backdrop open={true}></Backdrop>\r\n};\r\n\r\nexport default License;\r\n","import React from 'react';\r\nimport Backdrop from '@material-ui/core/Backdrop';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Button from '@material-ui/core/Button';\r\nimport OverlayWindow from '../../../OverlayWindow';\r\nimport MediaStreamWithDnD from '../../../MediaStreamWithDnD';\r\nimport OverlayImage from '../../../OverlayImage';\r\nimport RoundedButton from '../../../RoundedButton';\r\nimport { Typography } from '@material-ui/core';\r\nimport PhotoCameraRounded from '@material-ui/icons/PhotoCameraRounded';\r\nimport CaptureIcon from '../../../CaptureIcon';\r\nimport CaptureButton from '../../../CaptureButton';\r\nimport { useTranslation } from \"react-i18next\";\r\nconst License = (props) => {\r\n\tconst { t } = useTranslation();\r\n\tconst handleClicked = (data) => {\r\n\t\tconsole.log('next Clicked', props.nextAction);\r\n\t\tprops.nextAction(data);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<React.Fragment>\r\n\t\t\t<Box\r\n\t\t\t\tp={4}\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tdisplay: 'block',\r\n\t\t\t\t\twidth: '100%',\r\n\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\ttop: '10px',\r\n\t\t\t\t\tzIndex: 200,\r\n\t\t\t\t\ttextAlign: 'center',\r\n\t\t\t\t\tcolor: 'white',\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t <Typography> {t(\"capture\", { side: t(\"passenger side\") })}</Typography>\r\n\t\t\t</Box>\r\n\r\n\t\t\t<MediaStreamWithDnD nextAction={handleClicked} side=\"PASSENGER_SIDE\" toggleWaiting={props.toggleWaiting}/>\r\n\t\t\t{/* <Box style={{ postion: 'absolute', top: 0, left: 0 }}>\r\n\t\t\t\t<OverlayWindow windowSize={24} />\r\n\t\t\t</Box> */}\r\n\t\t\t{/* <CaptureButton onClick={handleClicked}/> */}\r\n\t\t\t<Box\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tdisplay: 'block',\r\n\t\t\t\t\twidth: '100%',\r\n\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\ttop: '35%',\r\n\t\t\t\t\tzIndex: 200,\r\n\t\t\t\t\ttextAlign: 'center',\r\n\t\t\t\t\tcolor: 'white',\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<OverlayImage image=\"PassengerSideFull.png\"/>\r\n\t\t\t</Box>\r\n\t\t</React.Fragment>\r\n\t);\r\n\t// return <Backdrop open={true}></Backdrop>\r\n};\r\n\r\nexport default License;\r\n","import React from 'react';\r\nimport Backdrop from '@material-ui/core/Backdrop';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Button from '@material-ui/core/Button';\r\nimport OverlayWindow from '../../../OverlayWindow';\r\nimport MediaStreamWithDnD from '../../../MediaStreamWithDnD';\r\nimport OverlayImage from '../../../OverlayImage';\r\nimport RoundedButton from '../../../RoundedButton';\r\nimport { Typography } from '@material-ui/core';\r\nimport PhotoCameraRounded from '@material-ui/icons/PhotoCameraRounded';\r\nimport CaptureIcon from '../../../CaptureIcon';\r\nimport CaptureButton from '../../../CaptureButton';\r\nimport { useTranslation } from \"react-i18next\";\r\nconst License = (props) => {\r\n\tconst { t } = useTranslation();\r\n\tconst handleClicked = (data) => {\r\n\t\tconsole.log('next Clicked', props.nextAction);\r\n\t\tprops.nextAction(data);\r\n\t};\r\n\treturn (\r\n\t\t<React.Fragment>\r\n\t\t\t<Box\r\n\t\t\t\tp={4}\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tdisplay: 'block',\r\n\t\t\t\t\twidth: '100%',\r\n\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\ttop: '10px',\r\n\t\t\t\t\tzIndex: 200,\r\n\t\t\t\t\ttextAlign: 'center',\r\n\t\t\t\t\tcolor: 'white',\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t <Typography> {t(\"capture\", { side: t(\"rear\") })}</Typography>\r\n\t\t\t</Box>\r\n\r\n\t\t\t<MediaStreamWithDnD nextAction={handleClicked} side=\"REAR_SIDE\" toggleWaiting={props.toggleWaiting}/>\r\n\t\t\t{/* <Box style={{ postion: 'absolute', top: 0, left: 0 }}>\r\n\t\t\t\t<OverlayWindow windowSize={24} />\r\n\t\t\t</Box> */}\r\n\t\t\t{/* <CaptureButton onClick={handleClicked}/> */}\r\n\t\t\t<Box\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tdisplay: 'block',\r\n\t\t\t\t\twidth: '100%',\r\n\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\ttop: '20%',\r\n\t\t\t\t\tzIndex: 200,\r\n\t\t\t\t\ttextAlign: 'center',\r\n\t\t\t\t\tcolor: 'white',\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<OverlayImage image='RearFull.png' width=\"50%\"/>\r\n\t\t\t</Box>\r\n\t\t</React.Fragment>\r\n\t);\r\n\t// return <Backdrop open={true}></Backdrop>\r\n};\r\n\r\nexport default License;\r\n","import Axios from '../Axios';\r\nimport { from } from 'rxjs';\r\n\r\nconst FinalAsessmentSubmission$ = (otp, assessmentId, deviceId, assessmentLocation, preferredLocation) => from(Axios.post(`/cardata/external/companies/${otp}/assessments/${assessmentId}/submit`, {\r\n  \"assessment_location\": assessmentLocation,\r\n  \"preferred_location\": preferredLocation\r\n}, { headers: { \"device-id\": deviceId }, 'Content-Type': 'application/json' }));\r\n\r\nexport default FinalAsessmentSubmission$;\r\n","import Typography from \"@material-ui/core/Typography\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport React from \"react\";\r\nimport Card from \"@material-ui/core/Card\";\r\nimport CardContent from \"@material-ui/core/CardContent\";\r\nimport CardHeader from \"@material-ui/core/CardHeader\";\r\nimport CardMedia from \"@material-ui/core/CardMedia\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport styled from \"@material-ui/core/styles/styled\";\r\nimport RoundedButton from \"../../../RoundedButton\";\r\nimport { DialogTitle } from \"@material-ui/core\";\r\nimport { Dialog, DialogActions, DialogContent } from \"@material-ui/core\";\r\nimport CarDataContext from \"../../../../CarDataContext\";\r\nimport { useContext } from \"react\";\r\nimport FinalAsessmentSubmission$ from \"../../../../APIConfig/FinalAsessmentSubmission\";\r\nimport { useTranslation } from \"react-i18next\";\r\nconst StyledPaper = styled(Paper)({\r\n  margin: \"16px 8px 16px 8px\",\r\n  borderRadius: \"16px\",\r\n  border: \"solid 1px #DADCE6\",\r\n});\r\n\r\nconst StyledCard = styled(Card)({\r\n  margin: \"8px\",\r\n  backgroundColor: \"#F0F1F5\",\r\n});\r\nconst Report = (props) => {\r\n  const { t } = useTranslation();\r\n  let carData = useContext(CarDataContext);\r\n  if (!Object.keys(carData).length) {\r\n    carData = {\r\n      license: JSON.parse(sessionStorage.getItem(\"license\")),\r\n      login: JSON.parse(sessionStorage.getItem(\"login\")),\r\n      front: JSON.parse(sessionStorage.getItem(\"front\")),\r\n      driverside: JSON.parse(sessionStorage.getItem(\"driverside\")),\r\n      passengerside: JSON.parse(sessionStorage.getItem(\"passengerside\")),\r\n      rear: JSON.parse(sessionStorage.getItem(\"rear\")),\r\n      geoLocation: JSON.parse(sessionStorage.getItem(\"geoLocation\")),\r\n    };\r\n  }\r\n\r\n  console.log(\"carData\", carData);\r\n  const [ackOpen, setAckOpen] = React.useState(false);\r\n\r\n  const onSubmit = () => {\r\n    if (props.toggleWaiting) {\r\n      props.toggleWaiting();\r\n    }\r\n    // otp, assessmentId, deviceId, assessmentLocation, preferredLocation\r\n    FinalAsessmentSubmission$(\r\n      9994,\r\n      carData.login.assessment_id,\r\n      \"b04d837c-3539-430e-b9ae-159dcbe1e96b\",\r\n      carData.geoLocation,\r\n      carData.geoLocation\r\n    ).subscribe((response) => setAckOpen(true));\r\n  };\r\n  return (\r\n    <Box>\r\n      <Card>\r\n        <CardHeader\r\n          title={t(\"Assessment Summary\")}\r\n          titleTypographyProps={{ align: \"center\" }}\r\n        />\r\n        <CardContent>\r\n          <Grid container spacing={2}>\r\n            <Grid item xs={6}>\r\n              <Box p={2}>\r\n                <Typography variant=\"body2\">{t(\"Make\")}</Typography>\r\n                <Typography variant=\"h6\">{carData.license[9]}</Typography>\r\n              </Box>\r\n            </Grid>\r\n            <Grid item xs={6}>\r\n              <Box p={2}>\r\n                <Typography variant=\"body2\">{t(\"Model\")}</Typography>\r\n                <Typography variant=\"h6\">{carData.license[8]}</Typography>\r\n              </Box>\r\n            </Grid>\r\n          </Grid>\r\n          <Grid container spacing={2}>\r\n            <Grid item xs={6}>\r\n              <Box p={2}>\r\n                <Typography variant=\"body2\">{t(\"License Plate\")}</Typography>\r\n                <Typography variant=\"h6\">{carData.license[6]}</Typography>\r\n              </Box>\r\n            </Grid>\r\n            <Grid item xs={6}>\r\n              <Box p={2}>\r\n                <Typography variant=\"body2\">{t(\"Vin Number\")}</Typography>\r\n                <Typography variant=\"h6\">{carData.license[12]}</Typography>\r\n              </Box>\r\n            </Grid>\r\n          </Grid>\r\n          <Grid container spacing={2}>\r\n            <Grid item xs={6}>\r\n              <Box p={2}>\r\n                <Typography variant=\"body2\">{t(\"Request Date\")}</Typography>\r\n                <Typography variant=\"h6\">\r\n                  {new Intl.DateTimeFormat(\"en-ZA\").format(new Date())}\r\n                </Typography>\r\n              </Box>\r\n            </Grid>\r\n            <Grid item xs={6}></Grid>\r\n          </Grid>\r\n          <Grid container spacing={2}>\r\n            <Grid item xs={6}></Grid>\r\n          </Grid>\r\n        </CardContent>\r\n      </Card>\r\n      <StyledCard>\r\n        <CardHeader title=\"Front Side\"></CardHeader>\r\n        <Grid container spacing={2}>\r\n          <Grid item xs={12}>\r\n            <StyledPaper>\r\n              <CardMedia\r\n                component=\"img\"\r\n                alt=\"Contemplative Reptile\"\r\n                height=\"140\"\r\n                image={carData.front.thumbnail}\r\n                title=\"Front Side\"\r\n              />\r\n              <CardContent>\r\n                <Box mb={3}>\r\n                  <Typography variant=\"body2\">Damaged Area</Typography>\r\n                  <Typography variant=\"h6\">-NA-</Typography>\r\n                </Box>\r\n                <Box>\r\n                  <Typography variant=\"body2\">Damaged type</Typography>\r\n                  <Typography variant=\"h6\">-NA-</Typography>\r\n                </Box>\r\n              </CardContent>\r\n            </StyledPaper>\r\n          </Grid>\r\n        </Grid>\r\n      </StyledCard>\r\n      <StyledCard>\r\n        <CardHeader title=\"Driver Side\"></CardHeader>\r\n        <Grid container spacing={2}>\r\n          <Grid item xs={12}>\r\n            <StyledPaper>\r\n              <CardMedia\r\n                component=\"img\"\r\n                alt=\"Contemplative Reptile\"\r\n                height=\"140\"\r\n                image={carData.driverside.thumbnail}\r\n                title=\"Front Side\"\r\n              />\r\n              <CardContent>\r\n                <Box mb={3}>\r\n                  <Typography variant=\"body2\">Damaged Area</Typography>\r\n                  <Typography variant=\"h6\">-NA-</Typography>\r\n                </Box>\r\n                <Box>\r\n                  <Typography variant=\"body2\">Damaged type</Typography>\r\n                  <Typography variant=\"h6\">-NA-</Typography>\r\n                </Box>\r\n              </CardContent>\r\n            </StyledPaper>\r\n          </Grid>\r\n        </Grid>\r\n      </StyledCard>\r\n      <StyledCard>\r\n        <CardHeader title=\"Passenger Side\"></CardHeader>\r\n        <Grid container spacing={2}>\r\n          <Grid item xs={12}>\r\n            <StyledPaper>\r\n              <CardMedia\r\n                component=\"img\"\r\n                alt=\"Contemplative Reptile\"\r\n                height=\"140\"\r\n                image={carData.passengerside.thumbnail}\r\n                title=\"Front Side\"\r\n              />\r\n              <CardContent>\r\n                <Box mb={3}>\r\n                  <Typography variant=\"body2\">Damaged Area</Typography>\r\n                  <Typography variant=\"h6\">-NA-</Typography>\r\n                </Box>\r\n                <Box>\r\n                  <Typography variant=\"body2\">Damaged type</Typography>\r\n                  <Typography variant=\"h6\">-NA-</Typography>\r\n                </Box>\r\n              </CardContent>\r\n            </StyledPaper>\r\n          </Grid>\r\n        </Grid>\r\n      </StyledCard>\r\n      <StyledCard>\r\n        <CardHeader title=\"Rear Side\"></CardHeader>\r\n        <Grid container spacing={2}>\r\n          <Grid item xs={12}>\r\n            <StyledPaper>\r\n              <CardMedia\r\n                component=\"img\"\r\n                alt=\"Contemplative Reptile\"\r\n                height=\"140\"\r\n                image={carData.rear.thumbnail}\r\n                title=\"Front Side\"\r\n              />\r\n              <CardContent>\r\n                <Box mb={3}>\r\n                  <Typography variant=\"body2\">Damaged Area</Typography>\r\n                  <Typography variant=\"h6\">-NA-</Typography>\r\n                </Box>\r\n                <Box>\r\n                  <Typography variant=\"body2\">Damaged type</Typography>\r\n                  <Typography variant=\"h6\">-NA-</Typography>\r\n                </Box>\r\n              </CardContent>\r\n            </StyledPaper>\r\n          </Grid>\r\n        </Grid>\r\n      </StyledCard>\r\n      <Box p={1} m={2} textAlign=\"right\">\r\n        <RoundedButton label=\"Submit\" fullWidth={false} onClick={onSubmit} />\r\n      </Box>\r\n      <Dialog open={ackOpen} size=\"md\">\r\n        <DialogTitle style={{ textAlign: \"center\" }}>Thank you !</DialogTitle>\r\n        <DialogContent>\r\n          <Typography style={{ textAlign: \"center\" }}>\r\n            Your vehicle assessment is now complete!\r\n          </Typography>\r\n          <Typography style={{ textAlign: \"center\" }}>\r\n            We will be in touch with you soon.\r\n          </Typography>\r\n        </DialogContent>\r\n        <DialogActions style={{ justifyContent: \"center\" }}>\r\n          <RoundedButton\r\n            label=\"Ok\"\r\n            onClick={() => {}}\r\n            fullWidth={false}\r\n          ></RoundedButton>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default Report;\r\n","export const mockJourney = [\r\n    { type: \"Onboard\", step: \"login\", contained : true },\r\n    { type: \"Onboard\", step: \"license\" },\r\n    { type: \"Inspection\", step: \"front\" },\r\n    { type: \"Inspection\", step: \"driverside\" },\r\n    { type: \"Inspection\", step: \"passengerside\" },\r\n    { type: \"Inspection\", step: \"rear\" },\r\n    { type: \"Summary\", step: \"report\" },\r\n    { type: \"OffBoard\", step: \"report\" },\r\n]","import { ThemeOptions, createMuiTheme } from '@material-ui/core/styles';\r\n\r\nconst CSAItheme = createMuiTheme({\r\n\ttypography: {\r\n\t\tfontFamily: [\r\n\t\t\t'Roboto',\r\n\t\t\t'\"Helvetica Neue\"',\r\n\t\t\t'Arial',\r\n\t\t\t'sans-serif',\r\n\t\t\t'\"Apple Color Emoji\"',\r\n\t\t\t'\"Segoe UI Emoji\"',\r\n\t\t\t'\"Segoe UI Symbol\"',\r\n\t\t].join(','),\r\n\t},\r\n\tpalette: {\r\n\t\tprimary: {\r\n\t\t\tmain: '#EDA03A',\r\n\t\t},\r\n\t\tsecondary: {\r\n\t\t\tmain: 'rgb(126, 244, 36)',\r\n\t\t},\r\n\t},\r\n\toverrides: {\r\n\t\tMuiButton : {\r\n\t\t\ttextSecondary: {\r\n\t\t\t\tcolor: '#FFF',\r\n\t\t\t},\r\n\t\t},\r\n\t\tMuiCardMedia : {\r\n\t\t\timg : {\r\n\t\t\t\tborderTopLeftRadius : '16px',\r\n\t\t\t\tborderTopRightRadius : '16px'\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n});\r\n\r\nexport default CSAItheme;\r\n","import React, { Component } from \"react\";\r\nimport Alert from \"@material-ui/lab/Alert\"\r\nclass ErrorBoundary extends Component {\r\n    state = {\r\n        error: null,\r\n        errorInfo: null,\r\n    }\r\n\r\n    componentDidCatch(error, errorInfo) {\r\n        this.setState(error, errorInfo);\r\n    }\r\n\r\n    render() {\r\n        const { errorInfo } = this.state;\r\n        if (errorInfo) {\r\n            return <Alert severity=\"error\">Error Rendering the Component</Alert>\r\n        }\r\n        return this.props.children;\r\n    }\r\n}\r\n\r\nexport default ErrorBoundary;","import React from \"react\";\r\n\r\nimport * as JourneyModule from \"../components/Journey\";\r\n\r\nimport { mockJourney } from \"../mockconfig/journey1\";\r\n\r\nimport CSAItheme from \"../Theme\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport MuiThemeProvider from \"@material-ui/core/styles/MuiThemeProvider\";\r\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport findIndex from \"lodash/findIndex\";\r\nimport startCase from \"lodash/startCase\";\r\n// import { useRouter } from 'next/router';\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\n// import useFullscreen from '../utils/useFullScreen';\r\nimport CarDataContext from \"../CarDataContext\";\r\nimport ErrorBoundary from \"../components/ErrorBoundary\";\r\nimport geoLocation from \"../utils/geoLocation\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport Backdrop from \"@material-ui/core/Backdrop\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    color: \"#EDA03A\",\r\n  },\r\n}));\r\n\r\nconst getCurrentAndNext = (type, step) => {\r\n  // findIndex(mockJourney, (mj:StepData) => mj.type === type && mj.step == step);\r\n  const currentIndex = findIndex(\r\n    mockJourney,\r\n    (mj) =>\r\n      mj.type.toLowerCase() === type.toLowerCase() &&\r\n      mj.step.toLowerCase() === step.toLowerCase()\r\n  );\r\n  const prevIndex = currentIndex - 1;\r\n  const nextIndex = currentIndex + 1;\r\n  return [prevIndex, currentIndex, nextIndex];\r\n};\r\n\r\nconst Journey = () => {\r\n  const container = React.useRef();\r\n  const classes = useStyles();\r\n  const [carData, setCarData] = React.useState({});\r\n  let { type, step } = useParams();\r\n  const [waiting, setWaiting] = React.useState(false);\r\n\r\n  // let setIsFullscreen, exitFullscreen;\r\n\r\n  // Method called when the next action is to be laoded\r\n  const nextAction = (data) => {\r\n    const href = `/journey/${mockJourney[nextIndex].type}/${mockJourney[nextIndex].step}`;\r\n    if (data) {\r\n      setCarData({ ...carData, [step]: data });\r\n      sessionStorage.setItem(step, JSON.stringify(data));\r\n    }\r\n    console.log(\"nextAction\", mockJourney[nextIndex].type.toLowerCase());\r\n    // if (mockJourney[nextIndex].type.toLowerCase() === 'inspection') {\r\n    // \tsetIsFullscreen();\r\n    // } else {\r\n    // \texitFullscreen();\r\n    // }\r\n    setWaiting(false);\r\n    history.push(href);\r\n  };\r\n\r\n  const toggleWaiting = () => {\r\n    setWaiting(true);\r\n  };\r\n\r\n  // Get the Component to be rendered currently\r\n  const getComposed = ({ type, step }) => {\r\n    let Component = [];\r\n    console.log(\"Module\", startCase(type), startCase(step).split(\" \").join(\"\"));\r\n    if (type) {\r\n      const newComponent = React.createElement(\r\n        JourneyModule[startCase(type)][startCase(step)].default,\r\n        {\r\n          nextAction,\r\n          toggleWaiting,\r\n        }\r\n      );\r\n      Component.push(newComponent);\r\n    }\r\n    return Component;\r\n  };\r\n\r\n  // For the root route i.e \"/\" load the first type and step\r\n  if (!type && !step) {\r\n    type = mockJourney[0].type;\r\n    step = mockJourney[0].step;\r\n  }\r\n\r\n  // try {\r\n  // \t[isFullscreen, setIsFullscreen, exitFullscreen] = useFullscreen(container);\r\n  // } catch (e) {\r\n  // \tconsole.log('Fullscreen not supported');\r\n  // \tisFullscreen = false;\r\n  // \tsetIsFullscreen = undefined;\r\n  // }\r\n  const history = useHistory();\r\n  const Loader = () => (\r\n    <Box>\r\n      <Backdrop className={classes.backdrop} open={waiting}>\r\n        <CircularProgress color=\"inherit\" thickness={4} size={60} />\r\n        <img\r\n          src=\"/carScan_icon.png\"\r\n          width=\"40px\"\r\n          style={{ marginLeft: \"-50px\" }}\r\n          alt=\"CarScan\"\r\n        />\r\n      </Backdrop>\r\n    </Box>\r\n  );\r\n\r\n  const [prevIndex, currentIndex, nextIndex] = getCurrentAndNext(type, step);\r\n  if (mockJourney[currentIndex].step === \"license\") {\r\n    if (!carData.geoLocation) {\r\n      geoLocation().then((geoData) => {\r\n        setCarData({ ...carData, geoLocation: geoData });\r\n        sessionStorage.setItem(\"geoLocation\", JSON.stringify(geoData));\r\n      });\r\n    }\r\n  }\r\n  const currentAction = mockJourney[currentIndex];\r\n  if (type && step) {\r\n    return (\r\n      <React.Fragment>\r\n        <CssBaseline />\r\n        <MuiThemeProvider theme={CSAItheme}>\r\n          <CarDataContext.Provider value={carData}>\r\n            {currentAction.container ? (\r\n              <Container>\r\n                <ErrorBoundary>\r\n                  {Loader()}\r\n                  {type && step && getComposed({ type, step })}\r\n                </ErrorBoundary>\r\n              </Container>\r\n            ) : (\r\n              type &&\r\n              step && (\r\n                <ErrorBoundary>\r\n                  {Loader()}\r\n                  <Box ref={container}>\r\n                    {getComposed({\r\n                      type,\r\n                      step,\r\n                    })}\r\n                  </Box>\r\n                </ErrorBoundary>\r\n              )\r\n            )}\r\n          </CarDataContext.Provider>\r\n        </MuiThemeProvider>\r\n      </React.Fragment>\r\n    );\r\n  } else {\r\n    return <LinearProgress />;\r\n  }\r\n};\r\n\r\nexport default Journey;\r\n","export default function geoLocation() {\r\n  return new Promise((resolve, reject) => {\r\n    function success(position) {\r\n      const latitude = position.coords.latitude;\r\n      const longitude = position.coords.longitude;\r\n\r\n      resolve({\r\n        lat: latitude,\r\n        long: longitude,\r\n      });\r\n    }\r\n\r\n    function error() {\r\n      console.error(\"Unable to retrieve your location\");\r\n    }\r\n    if (!navigator.geolocation) {\r\n      console.info(\"Geolocation is not supported by your browser\");\r\n    } else {\r\n      navigator.geolocation.getCurrentPosition(success, error);\r\n    }\r\n  });\r\n}\r\n"],"sourceRoot":""}