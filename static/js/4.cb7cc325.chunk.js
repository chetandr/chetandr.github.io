(this["webpackJsonpchetandr.github.io.src"]=this["webpackJsonpchetandr.github.io.src"]||[]).push([[4],{481:function(e,t){},483:function(e,t){},494:function(e,t){},496:function(e,t){},523:function(e,t){},525:function(e,t){},526:function(e,t){},531:function(e,t){},533:function(e,t){},552:function(e,t){},564:function(e,t){},567:function(e,t){},742:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"default",(function(){return J}));var r={};n.r(r),n.d(r,"default",(function(){return ge}));var c={};n.r(c),n.d(c,"Login",(function(){return a})),n.d(c,"License",(function(){return r}));var i={};n.r(i),n.d(i,"default",(function(){return Te}));var s={};n.r(s),n.d(s,"default",(function(){return Me}));var o={};n.r(o),n.d(o,"default",(function(){return Ue}));var l={};n.r(l),n.d(l,"default",(function(){return ze}));var d={};n.r(d),n.d(d,"Front",(function(){return i})),n.d(d,"Driverside",(function(){return s})),n.d(d,"Passengerside",(function(){return o})),n.d(d,"Rear",(function(){return l}));var j={};n.r(j),n.d(j,"default",(function(){return qe}));var u={};n.r(u),n.d(u,"Report",(function(){return j}));var b={};n.r(b),n.d(b,"Onboard",(function(){return c})),n.d(b,"Inspection",(function(){return d})),n.d(b,"Summary",(function(){return u}));var h=n(234),x=n(311),p=n(191),g=n(1),O=n.n(g),f=n(106),m=n(729),v=n(752),y=n(726),w=n(727),C=n(728),A=n(745),S=n(3),k=function(e){return Object(S.jsx)(f.a,{p:4,children:Object(S.jsx)("img",{src:e.imageURL,alt:e.alt,style:{marginLeft:"auto",marginRight:"auto",display:"block",width:"80vw"}})})};k.defaultProps={imageURL:"/logos/carScan_logo.png",alt:"Carscan"};var D=k,I=n(719),R=n(722),E=n(724),N=function(){return Object(S.jsx)("img",{src:"/images/car.png",style:{width:"95vw"}})},_=n(751),L=n(427),F=n(428),P=n.n(F);P.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded";var T=P.a.create({baseURL:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_CARDATA_API||"https://cardata.devinternal.carscan.ai\u200b\u200b",timeout:3e4}),M=n(743),U=function(e){return Object(M.a)(T.get("/cardata/companies/".concat(e,"/settings")))},z=function(e,t){return Object(M.a)(T.post("/cardata/companies/".concat(e,"/assessments"),{captcha_id:"60cb91e6a1673b6e53f595fa",captcha_token:"cu2wy",device_id:"b04d837c-3539-430e-b9ae-159dcbe1e96b",field_one:t||"9876567654",notification_reg_id:"123456789"}))},W=function(e,t,n){return Object(M.a)(T.patch("/cardata/external/companies/".concat(e,"/assessments/").concat(t),{assessment_type:"PRE_INSPECTION"},{headers:{"device-id":n},"Content-Type":"application/json"}))},B=n(749),H=n(753),K=function(e){var t=Object(H.a)().t,n=O.a.useState(!1),a=Object(p.a)(n,2),r=a[0],c=a[1],i=O.a.useState(null),s=Object(p.a)(i,2),o=s[0],l=s[1],d=O.a.useState(null),j=Object(p.a)(d,2),u=j[0],b=j[1],h=O.a.useState([]),x=Object(p.a)(h,2),k=x[0],F=x[1],P=O.a.useRef(),T=O.a.useState(!1),M=Object(p.a)(T,2),K=M[0],J=M[1];Object(g.useEffect)((function(){try{U(9994).subscribe((function(e){return l(e.data)}))}catch(e){console.log(e)}}),[]);return Object(S.jsxs)(O.a.Fragment,{children:[null!==o&&Object(S.jsx)(D,{imageURL:null===o||void 0===o?void 0:o.logo}),Object(S.jsx)(f.a,{pt:2,px:4,children:Object(S.jsx)(I.a,{style:{textAlign:"center"},children:t("welcome",{company_name:null!==o?o.company_name:"our Shop"})})}),Object(S.jsx)(f.a,{pt:2,px:4,children:Object(S.jsx)(A.a,{id:"standard-full-width",placeholder:t("Enter Your Contact Number"),fullWidth:!0,margin:"normal",variant:"outlined",onChange:function(e){return b(e.target.value)},InputProps:{style:{borderRadius:"28px"}}})}),Object(S.jsx)(f.a,{pt:4,pl:4,children:Object(S.jsx)(E.a,{children:Object(S.jsxs)(R.a,{children:[Object(S.jsx)(_.a,{color:"primary",checked:r,onChange:function(){c(!r)},name:"Agreed",style:{float:"left"}}),Object(S.jsxs)(I.a,{variant:"caption",children:[t("I have read, understood and agreed with your")," ",Object(S.jsxs)(I.a,{color:"primary",variant:"caption",style:{cursor:"pointer",display:"inline-block"},onClick:function(){return J(!0)},children:[" ",t("Terms and Conditions")]})]})]})})}),Object(S.jsx)(f.a,{p:2,children:Object(S.jsx)(N,{})}),Object(S.jsx)(f.a,{pt:4,px:4,children:Object(S.jsx)(L.a,{text:t("Swipe to Login"),color:"#EDA03A",onSuccess:function(){var n=[];null===u&&n.push(t("Enter the Contact number")),r||n.push(t("Agree to the terms and coditions by selecting the checkbox below")),n.length?(F(n),P.current.reset()):z(9994,u).subscribe((function(t){return W(9994,t.data.assessment_id,"b04d837c-3539-430e-b9ae-159dcbe1e96b").subscribe(e.nextAction(t.data))}))},ref:P})}),null!==o&&Object(S.jsxs)(v.a,{open:K,fullScreen:!0,fullWidth:!0,children:[Object(S.jsx)(y.a,{children:t("Terms and Conditions")}),Object(S.jsx)(w.a,{style:{overflow:"hidden",padding:0,paddingLeft:16},children:Object(S.jsx)("iframe",{src:o.terms_and_conditions_url,style:{width:"100%",height:"100%",border:"none"}})}),Object(S.jsx)(C.a,{children:Object(S.jsx)(m.a,{variant:"contained",color:"primary",onClick:function(){return J(!1)},children:t("Close")})})]}),0!==k.length&&Object(S.jsxs)(v.a,{open:k.length,maxWidth:"lg",style:{width:"80vw",height:"60vw"},children:[Object(S.jsx)(y.a,{children:"Error!!"}),Object(S.jsx)(w.a,{style:{overflow:"hidden"},children:k.map((function(e){return Object(S.jsx)(f.a,{p:1,children:Object(S.jsx)(B.a,{severity:"error",children:e})})}))}),Object(S.jsx)(C.a,{children:Object(S.jsx)(m.a,{variant:"contained",color:"primary",onClick:function(){return F([])},children:"Ok"})})]})]})};K.defaultProps={nextAction:function(){},prevAction:function(){}};var J=K,G=n(238),V=n.n(G),Y=n(239),q=n(730),X=function(e){return Object(S.jsx)(O.a.Fragment,{children:Object(S.jsxs)(q.a,{container:!0,style:{height:"100vh"},children:[Object(S.jsx)(q.a,{item:!0,xs:12,className:"translucent",style:{height:"".concat((100-e.windowSize)/2,"%")}}),Object(S.jsx)(q.a,{item:!0,xs:12,style:{height:"".concat(e.windowSize,"%")},children:Object(S.jsxs)(q.a,{container:!0,style:{height:"100%"},children:[Object(S.jsx)(q.a,{item:!0,xs:1,className:"translucent"}),Object(S.jsxs)(q.a,{item:!0,xs:10,className:"window",style:{borderColor:e.borderColor},children:[Object(S.jsx)("div",{className:"windowCorner topLeftWindowCorner",style:{borderColor:e.borderColor}}),Object(S.jsx)("div",{className:"windowCorner topRightWindowCorner",style:{borderColor:e.borderColor}}),Object(S.jsx)("div",{className:"windowCorner bottomLeftWindowCorner",style:{borderColor:e.borderColor}}),Object(S.jsx)("div",{className:"windowCorner bottomRightWindowCorner",style:{borderColor:e.borderColor}})]}),Object(S.jsx)(q.a,{item:!0,xs:1,className:"translucent"})]})}),Object(S.jsx)(q.a,{item:!0,xs:12,className:"translucent",style:{height:"".concat((100-e.windowSize)/2,"%")}})]})})};X.defaultProps={windowSize:15,borderColor:"#7EF424"};var Z=X,Q=n(240),$=n.n(Q),ee=$()(f.a)({position:"relative",width:"100%",textAlign:"center",color:"#fff",zIndex:2002,backgroundColor:"#000",maxSize:"640px",borderRadius:"8px"}),te=function(e){return Object(S.jsx)(m.a,{variant:e.variant,color:e.color,fullWidth:e.fullWidth,size:e.size,style:{borderRadius:"28px",height:"0.05%",textTransform:"none",paddingLeft:"16px",paddingRight:"16px"},onClick:function(){e.onClick()},children:e.label})};te.defaultProps={label:"",color:"primary",onClick:function(){},fullWidth:!0,size:"medium",variant:"contained"};var ne=te,ae=function(e,t,n,a,r){return Object(M.a)(T.post("/cardata/external/companies/".concat(e,"/assessments/").concat(t,"/files"),{fileExtension:a,md5s:r},{headers:{"device-id":n},"Content-Type":"application/json"}))},re=function(e,t,n,a,r){return console.log("IMGMD5 UPLOAD",t),Object(M.a)(T.request({method:"PUT",url:e,data:t,headers:{"Content-MD5":n,"Content-Type":a}}))},ce=function(e,t,n,a,r,c,i,s){return Object(M.a)(T.put("/cardata/external/companies/".concat(e,"/assessments/").concat(t,"/files/").concat(a),{gps:r,original_image_resolution:c,tags:i,upload_done:s},{headers:{"device-id":n},"Content-Type":"application/json"}))},ie=O.a.createContext([]),se=n(326),oe=n(476),le=n.n(oe),de=(n(570),n(571),n(572)),je=n.n(de),ue=function(e,t){switch("".concat(e,"x").concat(t)){case"4032x3024":return"DCI 4K (iCAM 12MP)";case"3840x2160":return"4K (iCAM 12MP)";case"4096x2160":return"DCI 4K";case"3840x2160":return"4K";case"2048x1152":return"2K";case"1920x1080":return"Full HD";case"1280x720":return"HD";case"640x480":return"SD";default:switch(e){case 4032:return"DCI 4K";case 3840:return"4K";case 2048:return"2K";case 1920:return"Full HD";case 1280:case 640:return"HD";default:return"Non SD"}}};function be(){return he.apply(this,arguments)}function he(){return(he=Object(Y.a)(V.a.mark((function e(){var t,n,a,r,c,i,s,o,l,d,j,u,b,h,x,p,g,O;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,n=navigator.mediaDevices.getSupportedConstraints(),console.log("Supported Constraints",n),e.prev=3,e.prev=4,e.next=7,navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:{exact:"environment"}}});case 7:t=e.sent,e.next=23;break;case 10:return e.prev=10,e.t0=e.catch(4),e.prev=12,e.next=15,navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:{exact:"user"}}});case 15:t=e.sent,e.next=23;break;case 18:return e.prev=18,e.t1=e.catch(12),e.next=22,navigator.mediaDevices.getUserMedia({audio:!1,video:!0});case 22:t=e.sent;case 23:return e.next=25,t.getVideoTracks();case 25:if(a=e.sent,r=a[0],"getCapabilities"in a[0]&&a[0].getCapabilities(),r.getSettings(),c="",!(navigator.platform.indexOf("Mac")>-1)){e.next=88;break}return e.prev=31,c="DCI 4K",i={width:{ideal:4032},height:{ideal:3024}},e.next=36,r.applyConstraints(i);case 36:e.next=86;break;case 38:return e.prev=38,e.t2=e.catch(31),e.prev=40,c="DCI 4K",s={width:{ideal:3840},height:{ideal:2160}},e.next=45,r.applyConstraints(s);case 45:e.next=86;break;case 47:return e.prev=47,e.t3=e.catch(40),e.prev=49,c="DCI 4K",o={width:{ideal:3840},height:{ideal:2160}},e.next=54,r.applyConstraints(o);case 54:e.next=86;break;case 56:return e.prev=56,e.t4=e.catch(49),e.prev=58,c="Full HD",l={width:{ideal:1920},height:{ideal:1080}},e.next=63,r.applyConstraints(l);case 63:e.next=86;break;case 65:return e.prev=65,e.t5=e.catch(58),e.prev=67,c="HD",d={width:{ideal:1280},height:{ideal:720}},e.next=72,r.applyConstraints(d);case 72:e.next=86;break;case 74:return e.prev=74,e.t6=e.catch(67),e.prev=76,c="SD",j={width:{ideal:640},height:{ideal:480}},e.next=81,r.applyConstraints(j);case 81:e.next=86;break;case 83:e.prev=83,e.t7=e.catch(76),alert(e.t7);case 86:e.next=149;break;case 88:return e.prev=88,c="DCI 4K",u={width:{ideal:4096},height:{ideal:2160}},console.log("DCI 4k",u),e.next=94,r.applyConstraints(u);case 94:e.next=149;break;case 96:return e.prev=96,e.t8=e.catch(88),e.prev=98,c="UHD",b={width:{ideal:3840},height:{ideal:2160}},console.log("UHD",b),e.next=104,r.applyConstraints(b);case 104:e.next=149;break;case 106:return e.prev=106,e.t9=e.catch(98),e.prev=108,c="2K",h={width:{ideal:2048},height:{ideal:1152}},console.log("2K",h),e.next=114,r.applyConstraints(h);case 114:e.next=149;break;case 116:return e.prev=116,e.t10=e.catch(108),e.prev=118,c="Full HD",x={width:{ideal:1920},height:{ideal:1080}},console.log("Full HD",x),e.next=124,r.applyConstraints(x);case 124:e.next=149;break;case 126:return e.prev=126,e.t11=e.catch(118),e.prev=128,c="HD",p={width:{ideal:1280},height:{ideal:720}},console.log("HD",p),e.next=134,r.applyConstraints(p);case 134:e.next=149;break;case 136:return e.prev=136,e.t12=e.catch(128),e.prev=138,c="SD",g={width:{ideal:640},height:{ideal:480}},console.log("SD",g),e.next=144,r.applyConstraints(g);case 144:e.next=149;break;case 146:e.prev=146,e.t13=e.catch(138),alert(e.t13);case 149:return(O=r.getSettings()).reso=c,e.abrupt("return",{stream:t,settings:O,reso:c});case 154:e.prev=154,e.t14=e.catch(3),console.error(e.t14);case 157:case"end":return e.stop()}}),e,null,[[3,154],[4,10],[12,18],[31,38],[40,47],[49,56],[58,65],[67,74],[76,83],[88,96],[98,106],[108,116],[118,126],[128,136],[138,146]])})))).apply(this,arguments)}var xe=function(e,t){return new Promise((function(t,n){console.log("dataURL",e);var a=new FileReader;le()(e);a.onloadend=function(){var e=Object(Y.a)(V.a.mark((function e(n){var r;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"sample",new Uint8Array(a.result),console.log(a.result),r=btoa(je.a.ArrayBuffer.hash(a.result,!0)),console.log("dataURL",r,a.result),t([r,a.result]);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.readAsArrayBuffer(e)}))},pe=$()(f.a)({height:"1px",backgroundColor:"#EBEBEB"}),ge=function(e){var t=O.a.useState([]),n=Object(p.a)(t,2),a=n[0],r=n[1],c=new se.BrowserMultiFormatReader,i=O.a.useRef(),s=O.a.useRef(),o=O.a.useContext(ie);return 0===Object.keys(o).length&&o.constructor===Object&&(o={login:JSON.parse(sessionStorage.getItem("login")),geoLocation:JSON.parse(sessionStorage.getItem("geoLocation"))}),Object(g.useEffect)(Object(Y.a)(V.a.mark((function t(){var n;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n=c.decodeFromConstraints({audio:!1,video:{facingMode:{exact:"environment"}}})}catch(a){try{n=c.decodeFromConstraints({audio:!1,video:{facingMode:{exact:"user"}}})}catch(l){n=c.decodeFromConstraints({audio:!1,video:!0})}}console.log("codeReader",c),console.log("Started continous decode from camera with id ".concat(n[0])),console.log(i.current),c.decodeFromVideoDevice(n[0],s.current,(function(t,n){if(t){var a=t.text.split("%");console.log("carInfo",a),r(a),c.captureCanvas.toBlob(function(){var t=Object(Y.a)(V.a.mark((function t(n){var r,i,s;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,xe(n);case 2:r=t.sent,i=Object(p.a)(r,1),s=i[0],console.log("BLOB",n),ae(9994,o.login.assessment_id,"b04d837c-3539-430e-b9ae-159dcbe1e96b","PNG",s).subscribe((function(t){console.log("Uploading the Image to the URL ",t.data);try{re(t.data.uploadUrl,n,s,"image/png").subscribe((function(n){if(200===n.status&&e.nextAction){var r=[{tag_type:"VEHICLE_IDENTIFIER",value:"BAR_CODE",make:a[9],model:a[8],license_number:a[6],registration_number:a[7],engine_number:a[13],vin_number:a[12]}];ce(9994,o.login.assessment_id,"b04d837c-3539-430e-b9ae-159dcbe1e96b",t.data.id,o.geoLocation,{height:c.captureCanvas.width,width:c.captureCanvas.width},r,!0)}}))}catch(l){console.error("Error",l)}}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),c.stopStreams()}!n||n instanceof se.NotFoundException||console.error(n)}));case 5:case"end":return t.stop()}}),t)}))),[]),Object(S.jsxs)(O.a.Fragment,{children:[Object(S.jsx)(f.a,{p:2,style:{display:"block",width:"100%",position:"absolute"},children:Object(S.jsx)(ee,{children:Object(S.jsxs)(f.a,{p:2,children:[Object(S.jsx)(f.a,{p:1,children:Object(S.jsx)(I.a,{variant:"body1",children:"Generate Vehicle Details"})}),Object(S.jsxs)(q.a,{container:!0,children:[Object(S.jsx)(q.a,{item:!0,xs:1}),Object(S.jsx)(q.a,{item:!0,xs:4,children:Object(S.jsx)(f.a,{children:Object(S.jsx)(ne,{color:"secondary",size:"small",fullWidth:!1,label:"License Disc"})})}),Object(S.jsx)(q.a,{item:!0,xs:1}),Object(S.jsx)(q.a,{item:!0,xs:4,children:Object(S.jsx)(f.a,{children:Object(S.jsx)(ne,{color:"secondary",size:"small",fullWidth:!1,label:"Vin Number",variant:"text"})})}),Object(S.jsx)(q.a,{item:!0,xs:1})]})]})})}),Object(S.jsx)(f.a,{p:4,style:{display:"block",width:"100%",position:"absolute",top:"20%",zIndex:200,textAlign:"center",color:"white"},children:Object(S.jsx)(I.a,{children:"Place our License disc within the frames and hold it there for a few second."})}),Object(S.jsx)(f.a,{children:Object(S.jsx)("div",{children:Object(S.jsx)("video",{id:"video",width:"300",height:"200",ref:s})})}),Object(S.jsx)(f.a,{style:{top:0,left:0},children:Object(S.jsx)(Z,{windowSize:24})}),Object(S.jsx)(f.a,{p:4,style:{display:"block",width:"100%",position:"absolute",top:"64%",zIndex:200,textAlign:"center",color:"white"},children:Object(S.jsx)(I.a,{children:"Move Closer to the scan area."})}),Object(S.jsxs)(v.a,{open:a.length>0,size:"md",children:[Object(S.jsx)(y.a,{disableTypography:"false",children:Object(S.jsx)(I.a,{variant:"h4",style:{textAlign:"center"},children:"Details found !"})}),Object(S.jsxs)(f.a,{p:1,m:2,textAlign:"center",children:[Object(S.jsx)(I.a,{variant:"h6",children:a[9]}),Object(S.jsx)(pe,{}),Object(S.jsx)(I.a,{variant:"body2",textAlign:"center",children:"Make"})]}),Object(S.jsxs)(f.a,{p:1,m:2,textAlign:"center",children:[Object(S.jsx)(I.a,{variant:"h6",children:a[8]}),Object(S.jsx)(pe,{}),Object(S.jsx)(I.a,{variant:"body2",textAlign:"center",children:"Model"})]}),Object(S.jsxs)(f.a,{p:1,m:2,textAlign:"center",children:[Object(S.jsx)(I.a,{variant:"h6",children:a[6]}),Object(S.jsx)(pe,{}),Object(S.jsx)(I.a,{variant:"body2",textAlign:"center",children:"License No"})]}),Object(S.jsxs)(f.a,{p:1,m:2,textAlign:"center",children:[Object(S.jsx)(I.a,{variant:"h6",children:a[12]}),Object(S.jsx)(pe,{}),Object(S.jsx)(I.a,{variant:"body2",textAlign:"center",children:"Vin No"})]}),Object(S.jsxs)(C.a,{children:[Object(S.jsx)(ne,{label:"Retake",color:"tertiary",onClick:function(){console.log("RESET"),r([]),c.reset()}}),Object(S.jsx)(ne,{label:"Confirm",onClick:function(){console.log("next Clicked",e.nextAction),e.nextAction(a)}})]})]})]})},Oe=n(733),fe=n(154),me=n(746),ve=n(747),ye=n(684),we=n(725),Ce=n(731),Ae=function(e){return Object(S.jsx)(Ce.a,{style:{height:"100%",width:"100%"},children:Object(S.jsx)("img",{src:"/images/CaptureButton.png",style:{textAlign:"center",width:"80px"}})})},Se=function(e){return Object(S.jsx)(f.a,{p:4,style:{display:"block",position:"absolute",top:"40%",right:"0%",zIndex:205,textAlign:"center",color:"white"},children:Object(S.jsx)(we.a,{onClick:e.onClick,children:Object(S.jsx)(Ae,{})})})},ke=function(e,t,n,a,r,c,i,s){return Object(M.a)(T.put("/cardata/external/companies/".concat(e,"/assessments/").concat(t,"/files/").concat(a),{gps:r,original_image_resolution:c,tags:i,upload_done:s},{headers:{"device-id":n},"Content-Type":"application/json"}))},De="boundry",Ie=function(e){var t=O.a.useRef(),n=O.a.useRef(),a=O.a.useRef(),r=O.a.useRef(),c=O.a.useRef(),i=O.a.useRef(),s=O.a.useRef(),o=O.a.useState(),l=Object(p.a)(o,2),d=l[0],j=l[1],u=O.a.useRef(),b=O.a.useState({}),f=Object(p.a)(b,2),m=f[0],v=f[1],y=O.a.useState({}),w=Object(p.a)(y,2),C=(w[0],w[1]),A=O.a.useState(!1),k=Object(p.a)(A,2),D=(k[0],k[1]),I=O.a.useState(),R=Object(p.a)(I,2),E=R[0],N=R[1],_=O.a.useState("INIT"),L=Object(p.a)(_,2),F=L[0],P=L[1],T=Object(fe.a)().getMonitor(),M=O.a.useRef(),U=O.a.useState({x:0,y:0}),z=Object(p.a)(U,2),W=z[0],B=z[1],H=O.a.useState({x:0,y:0}),K=Object(p.a)(H,2),J=K[0],G=K[1],q=O.a.useContext(ie);0===Object.keys(q).length&&q.constructor===Object&&(q={login:JSON.parse(sessionStorage.getItem("login")),geoLocation:JSON.parse(sessionStorage.getItem("geoLocation"))}),console.log("carData",q);var X=Object(me.a)((function(){return{type:De,collect:function(e){return{isDragging:!!e.isDragging()}}}})),Z=Object(p.a)(X,2),Q=Z[0].isDragging,$=Z[1],ee=Object(ve.a)((function(){return{accept:De,drop:function(){return ce(d,W,J)},collect:function(e){return{isOver:!!e.isOver()}}}}),[W,J,d]),te=Object(p.a)(ee,2),ne=(te[0].isOver,te[1]),ce=function(e,t,n){var a=t.x-n.x,r=t.y-n.y;console.log(e,t,n);var c=e.current.getClientRects(),i=a+c[0].width,s=r+c[0].height;e.current.style.left="".concat(a,"px"),e.current.style.top="".concat(r,"px");var o=Object(x.a)(Object(x.a)({},E),{},Object(h.a)({},e.current.id,[{x:a,y:r},{x:i,y:s}]));N(o)},se=function(){var e=Object(ye.a)(),t=e.display,n=(e.itemType,e.item,e.style);return t?Object(S.jsx)("div",{className:"boundingBoxWrapper",style:n,children:Object(S.jsx)("div",{className:"boundingBox"})}):null},oe=function(e){var t=e.width,a=e.height,r=n.current.offsetWidth,c=n.current.offsetHeight;r>c?c=Math.floor(r*a/t):r=Math.floor(c*t/a);var i=c/a,s=r/t,o=0;return r>document.documentElement.clientWidth&&(o=-(r-document.documentElement.clientWidth)/2),console.log(t,a,r,c,o,0),[t,a,r,c,o,0,s,i]},le=O.a.useCallback(Object(Y.a)(V.a.mark((function e(){var n,r,c,i,o,l,d,j,u,b,h,x;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be();case 2:(n=e.sent)&&t.current&&("srcObject"in t.current?t.current.srcObject=n.stream:t.src=window.URL.createObjectURL(n.stream),v(n.settings),r=oe(n.settings),c=Object(p.a)(r,8),i=c[0],o=c[1],l=c[2],d=c[3],j=c[4],u=c[5],b=c[6],h=c[7],t.current.width=i,t.current.height=o,a.current.width=i,a.current.height=o,l<document.documentElement.clientWidth?t.current.style.transform="translate(".concat(-t.current.offsetLeft,"px, ").concat(-t.current.offsetTop,"px) scale(").concat(b,", ").concat(h,")"):(console.log("translate(".concat(-j,"px, ").concat(-u,"px) scale(").concat(b,", ").concat(h,")")),t.current.style.transform="translate(".concat(j,"px, ").concat(-t.current.offsetTop,"px) scale(").concat(b,", ").concat(h,")")),t.current.style.transformOrigin="top left",s.current.width=i,s.current.height=o,s.current.style.width="".concat(l,"px"),s.current.style.height="".concat(d,"px"),x={video:"".concat(i," x ").concat(o," (").concat(ue(i,o),")"),scale:"".concat(b," x ").concat(h),media:"".concat(n.settings.width," x ").concat(n.settings.height),target:"".concat(l," x ").concat(d),targetXY:"".concat(j," x ").concat(u)},C(x));case 4:case"end":return e.stop()}}),e)}))),[t,n,i,s]);window.addEventListener("orientationchange",(function(e){le()})),Object(g.useEffect)(Object(Y.a)(V.a.mark((function e(){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:le();case 1:case"end":return e.stop()}}),e)}))),[t,n,i,s]);var de=function(){var n=Object(Y.a)(V.a.mark((function n(){var a,c,i,o,l,d,j;return V.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=oe(m),c=Object(p.a)(a,8),i=c[0],o=c[1],c[2],c[3],c[4],c[5],c[6],c[7],l=s.current.getContext("2d"),D(!0),t.current.pause(),l.drawImage(t.current,0,0),480,d=r.current.getContext("2d"),r.current.width=480,r.current.height=r.current.width/1.7,d.scale(480/s.current.width,480/1.7/s.current.height),d.drawImage(t.current,2,0),j=r.current.toDataURL("image/png"),s.current.toBlob(function(){var t=Object(Y.a)(V.a.mark((function t(n){var a,r,c;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,xe(n);case 2:a=t.sent,r=Object(p.a)(a,1),c=r[0],console.log("BLOB",n),ae(9994,q.login.assessment_id,"b04d837c-3539-430e-b9ae-159dcbe1e96b","PNG",c).subscribe((function(t){console.log("Uploading the Image to the URL ",t.data);try{re(t.data.uploadUrl,n,c,"image/png").subscribe((function(n){200===n.status&&e.nextAction&&(ke(9994,q.login.assessment_id,"b04d837c-3539-430e-b9ae-159dcbe1e96b",t.data.id,q.geoLocation,{height:i,width:o},[{tag_type:"AREA",value:e.side}],!0),e.nextAction(Object(x.a)(Object(x.a)({},t.data),{},{thumbnail:j})))}))}catch(a){console.error("Error",a)}}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),setTimeout((function(){return D(!1)}),3e3),P("CAPTURED");case 15:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();O.a.useEffect((function(){T.subscribeToOffsetChange((function(){var e=T.getClientOffset(),t=T.getInitialClientOffset(),n=T.getInitialSourceClientOffset();t&&n&&(G({x:t.x-n.x,y:t.y-n.y}),B(e))}))}),[T]);return console.log("DRAGGING",Q),Object(S.jsxs)("div",{ref:ne,children:[!1,Object(S.jsxs)("div",{ref:n,className:"videoWrapper",style:{overflow:"CAPTURED"===F?"auto":"hidden"},children:[Object(S.jsx)("video",{ref:t,id:"camvideo",autoPlay:!0,playsInline:!0}),Object(S.jsx)("img",{ref:a,style:{border:"solid 2px red",display:"none"}}),Object(S.jsx)("img",{ref:M,style:{border:"solid 2px red",display:"none"}})]}),Object(S.jsxs)("div",{style:{position:"absolute"},children:[Object(S.jsx)("canvas",{ref:i,style:{border:"solid 2px red",display:"none"}}),Object(S.jsx)("canvas",{ref:s,style:{border:"solid 2px green",display:"none"}}),Object(S.jsx)("canvas",{ref:r,style:{border:"solid 2px orange",position:"absolute",bottom:"10px",zIndex:"1000",display:"none"}})]}),Object(S.jsx)("a",{id:"downloadAnchor",href:"http://chetandr.github.com",ref:u,style:{display:"none"},children:"image"}),"BBOX"===F&&Object(S.jsx)("div",{className:"boundingBoxWrapper",id:"bbox",ref:c,onTouchStart:function(){return j(c)},onMouseDown:function(){return j(c)},style:{opacity:Q?0:1},children:Object(S.jsx)("div",{className:"boundingBox",ref:$,style:{cursor:"move",display:"inline-block"}})}),Object(S.jsx)("a",{id:"downloadAnchor",href:"http://chetandr.github.com",ref:u,style:{display:"none"},children:"image"}),Object(S.jsx)(se,{}),Object(S.jsx)(Se,{onClick:de})]})};Ie.defaultProps={nextAction:function(){},side:""};var Re=Ie,Ee=n(682),Ne=n(734);function _e(e){return e.side?Object(S.jsx)(Oe.a,{backend:Ee.a,options:{enableMouseEvents:!0},children:Object(S.jsx)(Re,{nextAction:e.nextAction,side:e.side})}):Object(S.jsx)(Ne.a,{})}_e.defaultProps={nextAction:function(){},side:""};var Le=_e,Fe=function(e){var t="/images/overlays/".concat(e.image);return Object(S.jsx)("img",{src:t,width:e.width})};Fe.defaultProps={image:"FrontFull.png",width:"60%"};var Pe=Fe,Te=function(e){return Object(S.jsxs)(O.a.Fragment,{children:[Object(S.jsx)(f.a,{p:4,style:{display:"block",width:"100%",position:"absolute",top:"10px",zIndex:200,textAlign:"center",color:"white"},children:Object(S.jsx)(I.a,{children:"Position front of the car within the outlines and take a photo."})}),Object(S.jsx)(Le,{nextAction:function(t){console.log("next Clicked",e.nextAction),e.nextAction(t)},side:"FRONT_SIDE"}),Object(S.jsx)(f.a,{style:{display:"block",width:"100%",position:"absolute",top:"20%",zIndex:200,textAlign:"center",color:"white"},children:Object(S.jsx)(Pe,{image:"FrontFull.png",width:"50%"})})]})},Me=function(e){return Object(S.jsxs)(O.a.Fragment,{children:[Object(S.jsx)(f.a,{p:4,style:{display:"block",width:"100%",position:"absolute",top:"10px",zIndex:200,textAlign:"center",color:"white"},children:Object(S.jsx)(I.a,{children:"Position driver side of the car within the outlines and take a photo."})}),Object(S.jsx)(Le,{nextAction:function(t){console.log("next Clicked",e.nextAction),e.nextAction(t)},side:"DRIVER_SIDE"}),Object(S.jsx)(f.a,{style:{display:"block",width:"100%",position:"absolute",top:"35%",zIndex:200,textAlign:"center",color:"white"},children:Object(S.jsx)(Pe,{image:"DriverSideFull.png"})})]})},Ue=function(e){return Object(S.jsxs)(O.a.Fragment,{children:[Object(S.jsx)(f.a,{p:4,style:{display:"block",width:"100%",position:"absolute",top:"10px",zIndex:200,textAlign:"center",color:"white"},children:Object(S.jsx)(I.a,{children:"Position passenger side of the car within the outlines and take a photo."})}),Object(S.jsx)(Le,{nextAction:function(t){console.log("next Clicked",e.nextAction),e.nextAction(t)},side:"PASSENGER_SIDE"}),Object(S.jsx)(f.a,{style:{display:"block",width:"100%",position:"absolute",top:"35%",zIndex:200,textAlign:"center",color:"white"},children:Object(S.jsx)(Pe,{image:"PassengerSideFull.png"})})]})},ze=function(e){return Object(S.jsxs)(O.a.Fragment,{children:[Object(S.jsx)(f.a,{p:4,style:{display:"block",width:"100%",position:"absolute",top:"10px",zIndex:200,textAlign:"center",color:"white"},children:Object(S.jsx)(I.a,{children:"Position rear of the car within the outlines and take a photo."})}),Object(S.jsx)(Le,{nextAction:function(t){console.log("next Clicked",e.nextAction),e.nextAction(t)},side:"REAR_SIDE"}),Object(S.jsx)(f.a,{style:{display:"block",width:"100%",position:"absolute",top:"20%",zIndex:200,textAlign:"center",color:"white"},children:Object(S.jsx)(Pe,{image:"RearFull.png",width:"50%"})})]})},We=n(735),Be=n(737),He=n(736),Ke=n(738),Je=n(723),Ge=function(e,t,n,a,r){return Object(M.a)(T.post("/cardata/external/companies/".concat(e,"/assessments/").concat(t,"/submit"),{assessment_location:a,preferred_location:r},{headers:{"device-id":n},"Content-Type":"application/json"}))},Ve=$()(Je.a)({margin:"16px 8px 16px 8px",borderRadius:"16px",border:"solid 1px #DADCE6"}),Ye=$()(We.a)({margin:"8px",backgroundColor:"#F0F1F5"}),qe=function(){var e=Object(g.useContext)(ie);Object.keys(e).length||(e={license:JSON.parse(sessionStorage.getItem("license")),login:JSON.parse(sessionStorage.getItem("login")),front:JSON.parse(sessionStorage.getItem("front")),driverside:JSON.parse(sessionStorage.getItem("driverside")),passengerside:JSON.parse(sessionStorage.getItem("passengerside")),rear:JSON.parse(sessionStorage.getItem("rear")),geoLocation:JSON.parse(sessionStorage.getItem("geoLocation"))}),console.log("carData",e);var t=O.a.useState(!1),n=Object(p.a)(t,2),a=n[0],r=n[1];return Object(S.jsxs)(f.a,{children:[Object(S.jsxs)(We.a,{children:[Object(S.jsx)(He.a,{title:"Assessment Summary",titleTypographyProps:{align:"center"}}),Object(S.jsxs)(Be.a,{children:[Object(S.jsxs)(q.a,{container:!0,spacing:2,children:[Object(S.jsx)(q.a,{item:!0,xs:6,children:Object(S.jsxs)(f.a,{p:2,children:[Object(S.jsx)(I.a,{variant:"body2",children:"Make"}),Object(S.jsx)(I.a,{variant:"h6",children:e.license[9]})]})}),Object(S.jsx)(q.a,{item:!0,xs:6,children:Object(S.jsxs)(f.a,{p:2,children:[Object(S.jsx)(I.a,{variant:"body2",children:"Model"}),Object(S.jsx)(I.a,{variant:"h6",children:e.license[8]})]})})]}),Object(S.jsxs)(q.a,{container:!0,spacing:2,children:[Object(S.jsx)(q.a,{item:!0,xs:6,children:Object(S.jsxs)(f.a,{p:2,children:[Object(S.jsx)(I.a,{variant:"body2",children:"License Plate"}),Object(S.jsx)(I.a,{variant:"h6",children:e.license[6]})]})}),Object(S.jsx)(q.a,{item:!0,xs:6,children:Object(S.jsxs)(f.a,{p:2,children:[Object(S.jsx)(I.a,{variant:"body2",children:"Vin Number"}),Object(S.jsx)(I.a,{variant:"h6",children:e.license[12]})]})})]}),Object(S.jsxs)(q.a,{container:!0,spacing:2,children:[Object(S.jsx)(q.a,{item:!0,xs:6,children:Object(S.jsxs)(f.a,{p:2,children:[Object(S.jsx)(I.a,{variant:"body2",children:"Request Date"}),Object(S.jsx)(I.a,{variant:"h6",children:new Intl.DateTimeFormat("en-ZA").format(new Date)})]})}),Object(S.jsx)(q.a,{item:!0,xs:6})]}),Object(S.jsx)(q.a,{container:!0,spacing:2,children:Object(S.jsx)(q.a,{item:!0,xs:6})})]})]}),Object(S.jsxs)(Ye,{children:[Object(S.jsx)(He.a,{title:"Front Side"}),Object(S.jsx)(q.a,{container:!0,spacing:2,children:Object(S.jsx)(q.a,{item:!0,xs:12,children:Object(S.jsxs)(Ve,{children:[Object(S.jsx)(Ke.a,{component:"img",alt:"Contemplative Reptile",height:"140",image:e.front.thumbnail,title:"Front Side"}),Object(S.jsxs)(Be.a,{children:[Object(S.jsxs)(f.a,{mb:3,children:[Object(S.jsx)(I.a,{variant:"body2",children:"Damaged Area"}),Object(S.jsx)(I.a,{variant:"h6",children:"-NA-"})]}),Object(S.jsxs)(f.a,{children:[Object(S.jsx)(I.a,{variant:"body2",children:"Damaged type"}),Object(S.jsx)(I.a,{variant:"h6",children:"-NA-"})]})]})]})})})]}),Object(S.jsxs)(Ye,{children:[Object(S.jsx)(He.a,{title:"Driver Side"}),Object(S.jsx)(q.a,{container:!0,spacing:2,children:Object(S.jsx)(q.a,{item:!0,xs:12,children:Object(S.jsxs)(Ve,{children:[Object(S.jsx)(Ke.a,{component:"img",alt:"Contemplative Reptile",height:"140",image:e.driverside.thumbnail,title:"Front Side"}),Object(S.jsxs)(Be.a,{children:[Object(S.jsxs)(f.a,{mb:3,children:[Object(S.jsx)(I.a,{variant:"body2",children:"Damaged Area"}),Object(S.jsx)(I.a,{variant:"h6",children:"-NA-"})]}),Object(S.jsxs)(f.a,{children:[Object(S.jsx)(I.a,{variant:"body2",children:"Damaged type"}),Object(S.jsx)(I.a,{variant:"h6",children:"-NA-"})]})]})]})})})]}),Object(S.jsxs)(Ye,{children:[Object(S.jsx)(He.a,{title:"Passenger Side"}),Object(S.jsx)(q.a,{container:!0,spacing:2,children:Object(S.jsx)(q.a,{item:!0,xs:12,children:Object(S.jsxs)(Ve,{children:[Object(S.jsx)(Ke.a,{component:"img",alt:"Contemplative Reptile",height:"140",image:e.passengerside.thumbnail,title:"Front Side"}),Object(S.jsxs)(Be.a,{children:[Object(S.jsxs)(f.a,{mb:3,children:[Object(S.jsx)(I.a,{variant:"body2",children:"Damaged Area"}),Object(S.jsx)(I.a,{variant:"h6",children:"-NA-"})]}),Object(S.jsxs)(f.a,{children:[Object(S.jsx)(I.a,{variant:"body2",children:"Damaged type"}),Object(S.jsx)(I.a,{variant:"h6",children:"-NA-"})]})]})]})})})]}),Object(S.jsxs)(Ye,{children:[Object(S.jsx)(He.a,{title:"Rear Side"}),Object(S.jsx)(q.a,{container:!0,spacing:2,children:Object(S.jsx)(q.a,{item:!0,xs:12,children:Object(S.jsxs)(Ve,{children:[Object(S.jsx)(Ke.a,{component:"img",alt:"Contemplative Reptile",height:"140",image:e.rear.thumbnail,title:"Front Side"}),Object(S.jsxs)(Be.a,{children:[Object(S.jsxs)(f.a,{mb:3,children:[Object(S.jsx)(I.a,{variant:"body2",children:"Damaged Area"}),Object(S.jsx)(I.a,{variant:"h6",children:"-NA-"})]}),Object(S.jsxs)(f.a,{children:[Object(S.jsx)(I.a,{variant:"body2",children:"Damaged type"}),Object(S.jsx)(I.a,{variant:"h6",children:"-NA-"})]})]})]})})})]}),Object(S.jsx)(f.a,{p:1,m:2,textAlign:"right",children:Object(S.jsx)(ne,{label:"Submit",fullWidth:!1,onClick:function(){Ge(9994,e.login.assessment_id,"b04d837c-3539-430e-b9ae-159dcbe1e96b",e.geoLocation,e.geoLocation).subscribe((function(e){return r(!0)}))}})}),Object(S.jsxs)(v.a,{open:a,size:"md",children:[Object(S.jsx)(y.a,{style:{textAlign:"center"},children:"Thank you !"}),Object(S.jsxs)(w.a,{children:[Object(S.jsx)(I.a,{style:{textAlign:"center"},children:"Your vehicle assessment is now complete!"}),Object(S.jsx)(I.a,{style:{textAlign:"center"},children:"We will be in touch with you soon."})]}),Object(S.jsx)(C.a,{style:{justifyContent:"center"},children:Object(S.jsx)(ne,{label:"Ok",onClick:function(){},fullWidth:!1})})]})]})},Xe=[{type:"Onboard",step:"login",contained:!0},{type:"Onboard",step:"license"},{type:"Inspection",step:"front"},{type:"Inspection",step:"driverside"},{type:"Inspection",step:"passengerside"},{type:"Inspection",step:"rear"},{type:"Summary",step:"report"},{type:"OffBoard",step:"report"}],Ze=n(56),Qe=Object(Ze.a)({typography:{fontFamily:["Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")},palette:{primary:{main:"#EDA03A"},secondary:{main:"rgb(126, 244, 36)"}},overrides:{MuiButton:{textSecondary:{color:"#FFF"}},MuiCardMedia:{img:{borderTopLeftRadius:"16px",borderTopRightRadius:"16px"}}}}),$e=n(740),et=n(739),tt=n(680),nt=n.n(tt),at=n(576),rt=n.n(at),ct=n(661),it=n.n(ct),st=n(4),ot=n(678),lt=n(679),dt=n(686),jt=n(683),ut=function(e){Object(dt.a)(n,e);var t=Object(jt.a)(n);function n(){var e;Object(ot.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={error:null,errorInfo:null},e}return Object(lt.a)(n,[{key:"componentDidCatch",value:function(e,t){this.setState(e,t)}},{key:"render",value:function(){return this.state.errorInfo?Object(S.jsx)(B.a,{severity:"error",children:"Error Rendering the Component"}):this.props.children}}]),n}(g.Component);t.default=function(){var e=O.a.useRef(),t=O.a.useState({}),n=Object(p.a)(t,2),a=n[0],r=n[1],c=Object(st.g)(),i=c.type,s=c.step,o=function(e){var t="/journey/".concat(Xe[m].type,"/").concat(Xe[m].step);e&&(r(Object(x.a)(Object(x.a)({},a),{},Object(h.a)({},s,e))),sessionStorage.setItem(s,JSON.stringify(e))),console.log("nextAction",Xe[m].type.toLowerCase()),d.push(t)},l=function(e){var t=e.type,n=e.step,a=[];if(console.log("Module",it()(t),it()(n).split(" ").join("")),t){var r=O.a.createElement(b[it()(t)][it()(n)].default,{nextAction:o});a.push(r)}return a};i||s||(i=Xe[0].type,s=Xe[0].step);var d=Object(st.f)(),j=function(e,t){var n=rt()(Xe,(function(n){return n.type.toLowerCase()===e.toLowerCase()&&n.step.toLowerCase()===t.toLowerCase()}));return[n-1,n,n+1]}(i,s),u=Object(p.a)(j,3),g=(u[0],u[1]),m=u[2];"license"===Xe[g].step&&(a.geoLocation||new Promise((function(e,t){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){var n=t.coords.latitude,a=t.coords.longitude;e({lat:n,long:a})}),(function(){console.error("Unable to retrieve your location")})):console.info("Geolocation is not supported by your browser")})).then((function(e){r(Object(x.a)(Object(x.a)({},a),{},{geoLocation:e})),sessionStorage.setItem("geoLocation",JSON.stringify(e))})));var v=Xe[g];return i&&s?Object(S.jsxs)(O.a.Fragment,{children:[Object(S.jsx)(et.a,{}),Object(S.jsx)(nt.a,{theme:Qe,children:Object(S.jsx)(ie.Provider,{value:a,children:v.container?Object(S.jsx)($e.a,{children:Object(S.jsx)(ut,{children:i&&s&&l({type:i,step:s})})}):i&&s&&Object(S.jsx)(ut,{children:Object(S.jsx)(f.a,{ref:e,children:l({type:i,step:s})})})})})]}):Object(S.jsx)(Ne.a,{})}}}]);
//# sourceMappingURL=4.cb7cc325.chunk.js.map