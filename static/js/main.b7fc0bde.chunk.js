(this["webpackJsonpchetandr.github.io.src"]=this["webpackJsonpchetandr.github.io.src"]||[]).push([[0],{61:function(e,t,r){},62:function(e,t,r){},78:function(e,t,r){"use strict";r.r(t);r(61),r(62);var n=r(5),a=r(98),c=r(20),s=r.n(c),i=r(28),o=r(34),l=r(47),u=r(15),d=r(0),p=r.n(d),h=function(e,t){switch("".concat(e,"x").concat(t)){case"4032x3024":return"DCI 4K (iCAM 12MP)";case"3840x2160":return"4K (iCAM 12MP)";case"4096x2160":return"DCI 4K";case"3840x2160":return"4K";case"2048x1152":return"2K";case"1920x1080":return"Full HD";case"1280x720":return"HD";case"640x480":return"SD";default:switch(e){case 4032:return"DCI 4K";case 3840:return"4K";case 2048:return"2K";case 1920:return"Full HD";case 1280:case 640:return"HD";default:return"Non SD"}}};function f(){return x.apply(this,arguments)}function x(){return(x=Object(i.a)(s.a.mark((function e(){var t,r,n,a,c,i,o,l,u,d,p,h,f,x,b,g,y;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,e.prev=1,e.prev=2,e.next=5,navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:{exact:"environment"}}});case 5:t=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:{exact:"user"}}});case 12:t=e.sent;case 13:return e.next=15,t.getVideoTracks();case 15:if(r=e.sent,n=r[0],r[0].getCapabilities(),n.getSettings(),a="",!(navigator.platform.indexOf("Mac")>-1)){e.next=78;break}return e.prev=21,a="DCI 4K",c={width:{ideal:4032},height:{ideal:3024}},e.next=26,n.applyConstraints(c);case 26:e.next=76;break;case 28:return e.prev=28,e.t1=e.catch(21),e.prev=30,a="DCI 4K",i={width:{ideal:3840},height:{ideal:2160}},e.next=35,n.applyConstraints(i);case 35:e.next=76;break;case 37:return e.prev=37,e.t2=e.catch(30),e.prev=39,a="DCI 4K",o={width:{ideal:3840},height:{ideal:2160}},e.next=44,n.applyConstraints(o);case 44:e.next=76;break;case 46:return e.prev=46,e.t3=e.catch(39),e.prev=48,a="Full HD",l={width:{ideal:1920},height:{ideal:1080}},e.next=53,n.applyConstraints(l);case 53:e.next=76;break;case 55:return e.prev=55,e.t4=e.catch(48),e.prev=57,a="HD",u={width:{ideal:1280},height:{ideal:720}},e.next=62,n.applyConstraints(u);case 62:e.next=76;break;case 64:return e.prev=64,e.t5=e.catch(57),e.prev=66,a="SD",d={width:{ideal:640},height:{ideal:480}},e.next=71,n.applyConstraints(d);case 71:e.next=76;break;case 73:e.prev=73,e.t6=e.catch(66),alert(e.t6);case 76:e.next=133;break;case 78:return e.prev=78,a="DCI 4K",p={width:{ideal:4096},height:{ideal:2160}},e.next=83,n.applyConstraints(p);case 83:e.next=133;break;case 85:return e.prev=85,e.t7=e.catch(78),e.prev=87,a="UHD",h={width:{ideal:3840},height:{ideal:2160}},e.next=92,n.applyConstraints(h);case 92:e.next=133;break;case 94:return e.prev=94,e.t8=e.catch(87),e.prev=96,a="2K",f={width:{ideal:2048},height:{ideal:1152}},e.next=101,n.applyConstraints(f);case 101:e.next=133;break;case 103:return e.prev=103,e.t9=e.catch(96),e.prev=105,a="Full HD",x={width:{ideal:1920},height:{ideal:1080}},e.next=110,n.applyConstraints(x);case 110:e.next=133;break;case 112:return e.prev=112,e.t10=e.catch(105),e.prev=114,a="HD",b={width:{ideal:1280},height:{ideal:720}},e.next=119,n.applyConstraints(b);case 119:e.next=133;break;case 121:return e.prev=121,e.t11=e.catch(114),e.prev=123,a="SD",g={width:{ideal:640},height:{ideal:480}},e.next=128,n.applyConstraints(g);case 128:e.next=133;break;case 130:e.prev=130,e.t12=e.catch(123),alert(e.t12);case 133:return(y=n.getSettings()).reso=a,e.abrupt("return",{stream:t,settings:y,reso:a});case 138:e.prev=138,e.t13=e.catch(1),console.error(e.t13);case 141:case"end":return e.stop()}}),e,null,[[1,138],[2,8],[21,28],[30,37],[39,46],[48,55],[57,64],[66,73],[78,85],[87,94],[96,103],[105,112],[114,121],[123,130]])})))).apply(this,arguments)}var b=r(8),g=r(99),y=r(100),j=r(56),v=r.n(j),O=r(3),m=r(101),w=r(54),C=r.n(w),k=r(55),D=r.n(k),S=r(58),I="boundry",M=function(){var e=p.a.useRef(),t=p.a.useRef(),r=(p.a.useRef(),p.a.useRef()),n=p.a.useRef(),a=p.a.useRef(),c=p.a.useRef(),x=p.a.useState(),j=Object(u.a)(x,2),w=j[0],k=j[1],M=p.a.useRef(),R=p.a.useState({}),T=Object(u.a)(R,2),K=T[0],B=T[1],N=p.a.useState({}),A=Object(u.a)(N,2),F=(A[0],A[1]),H=p.a.useState(!1),L=Object(u.a)(H,2),U=(L[0],L[1]),W=p.a.useState(),E=Object(u.a)(W,2),P=E[0],X=E[1],z=p.a.useState("INIT"),G=Object(u.a)(z,2),J=G[0],V=G[1],Y=Object(b.a)().getMonitor(),q=p.a.useRef(),Q=p.a.useState({x:0,y:0}),Z=Object(u.a)(Q,2),$=Z[0],_=Z[1],ee=p.a.useState({x:0,y:0}),te=Object(u.a)(ee,2),re=te[0],ne=te[1],ae=Object(g.a)((function(){return{type:I,collect:function(e){return{isDragging:!!e.isDragging()}}}})),ce=Object(u.a)(ae,2),se=ce[0].isDragging,ie=ce[1],oe=Object(y.a)((function(){return{accept:I,drop:function(){return de(w,$,re)},collect:function(e){return{isOver:!!e.isOver()}}}}),[$,re,w]),le=Object(u.a)(oe,2),ue=(le[0].isOver,le[1]),de=function(e,t,r){var n=t.x-r.x,a=t.y-r.y;console.log(e,t,r);var c=e.current.getClientRects(),s=n+c[0].width,i=a+c[0].height;e.current.style.left="".concat(n,"px"),e.current.style.top="".concat(a,"px");var u=Object(l.a)(Object(l.a)({},P),{},Object(o.a)({},e.current.id,[{x:n,y:a},{x:s,y:i}]));X(u)},pe=function(){var e=Object(S.a)(),t=e.display,r=(e.itemType,e.item,e.style);return t?Object(O.jsx)("div",{className:"boundingBoxWrapper",style:r,children:Object(O.jsx)("div",{className:"boundingBox"})}):null},he=p.a.useCallback(Object(i.a)(s.a.mark((function n(){var a,i,o,l,u,d,p,x,b,g;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f();case 2:a=n.sent,e.current&&("srcObject"in e.current?e.current.srcObject=a.stream:e.src=window.URL.createObjectURL(a.stream),B(a.settings),i=a.settings.width,o=a.settings.height,l=t.current.offsetWidth,u=Math.floor(l*o/i),a.settings.aspectRatio,d=u/o,p=l/i,x=0,b=0,i>l?(x=-Math.ceil(100*p),b=-Math.ceil(100*d)):(x=-Math.ceil(i/l*100),b=-Math.ceil(o/u*100)),e.current.width=i,e.current.height=o,r.current.width=i,r.current.height=o,e.current.style.transform="translate(".concat(-e.current.offsetLeft,"px, ").concat(-e.current.offsetTop,"px) scale(").concat(p,", ").concat(d,")"),e.current.style.transformOrigin="top left",c.current.width=i,c.current.height=o,c.current.style.width="".concat(l,"px"),c.current.style.height="".concat(u,"px"),g={video:"".concat(i," x ").concat(o," (").concat(h(i,o),")"),scale:"".concat(p," x ").concat(d),media:"".concat(a.settings.width," x ").concat(a.settings.height),target:"".concat(l," x ").concat(u),targetXY:"".concat(x," x ").concat(b)},F(g));case 4:case"end":return n.stop()}}),n)}))),[e,t,a,c]);window.addEventListener("orientationchange",(function(e){he()})),Object(d.useEffect)(Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:he();case 1:case"end":return e.stop()}}),e)}))),[e,t,a,c]);p.a.useEffect((function(){Y.subscribeToOffsetChange((function(){var e=Y.getClientOffset(),t=Y.getInitialClientOffset(),r=Y.getInitialSourceClientOffset();t&&r&&(ne({x:t.x-r.x,y:t.y-r.y}),_(e))}))}),[Y]);return console.log("DRAGGING",se),Object(O.jsxs)("div",{ref:ue,children:[!1,Object(O.jsxs)("div",{ref:t,className:"videoWrapper",style:{overflow:"CAPTURED"===J?"auto":"hidden"},children:[Object(O.jsx)("video",{ref:e,id:"camvideo",autoPlay:!0,playsInline:!0}),Object(O.jsx)("img",{ref:r,style:{border:"solid 2px red",display:"none"}}),Object(O.jsx)("img",{ref:q,style:{border:"solid 2px red",display:"none"}})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("canvas",{ref:a,style:{border:"solid 2px red",display:"none"}}),Object(O.jsx)("canvas",{ref:c,style:{border:"solid 2px red",display:"none"}})]}),Object(O.jsx)("a",{id:"downloadAnchor",href:"http://chetandr.github.com",ref:M,style:{display:"none"},children:"image"}),"BBOX"===J&&Object(O.jsx)("div",{className:"boundingBoxWrapper",id:"bbox",ref:n,onTouchStart:function(){return k(n)},onMouseDown:function(){return k(n)},style:{opacity:se?0:1},children:Object(O.jsx)("div",{className:"boundingBox",ref:ie,style:{cursor:"move",display:"inline-block"}})}),Object(O.jsxs)("div",{id:"changeVideo",children:["INIT"===J&&Object(O.jsx)(m.a,{color:"primary","aria-label":"upload picture",component:"span",variant:"contained",onClick:function(){var n=K.width,a=K.height,s=t.current.offsetWidth,i=Math.floor(s*a/n)/a,o=s/n,l=c.current.getContext("2d");U(!0),e.current.pause(),l.drawImage(e.current,0,0);var u=c.current.toDataURL("image/png");r.current.src=u,e.current.style.display="none",r.current.style.display="block",r.current.style.transform="translate(".concat(-e.current.offsetLeft,"px, ").concat(-e.current.offsetTop,"px) scale(").concat(o,", ").concat(i,")"),r.current.style.transformOrigin="top left",e.current.style.display="none",r.current.style.display="block",setTimeout((function(){return U(!1)}),3e3),V("BBOX")},children:Object(O.jsx)(C.a,{style:{fontSize:64}})}),"INIT"!==J&&Object(O.jsx)(m.a,{color:"primary","aria-label":"upload picture",component:"span",variant:"contained",onClick:function(){e.current.style.display="block";var t=c.current.getContext("2d");t.clearRect(0,0,c.current.width,c.current.height),t.globalAlpha=1,q.current.style.display="none",r.current.style.display="none",e.current.play(),V("INIT")},children:Object(O.jsx)(D.a,{style:{fontSize:64}})}),"BBOX"===J&&Object(O.jsx)(m.a,{color:"primary","aria-label":"upload picture",component:"span",variant:"contained",onClick:function(){var a=K.width,s=K.height,i=t.current.offsetWidth,o=Math.floor(i*s/a)/s,l=i/a,u=c.current.getContext("2d");u.lineWidth="2",u.globalAlpha=.2,u.fillStyle="#FFD600",u.fillRect(n.current.offsetLeft/l,n.current.offsetTop/o,n.current.offsetWidth/l,n.current.offsetHeight/o),u.globalAlpha=1,u.strokeStyle="#ff7300",u.stroke(),U(!0);var d=c.current.toDataURL("image/png");q.current.src=d,e.current.style.display="none",q.current.style.display="block",r.current.style.display="none",q.current.style.transformOrigin="top left",e.current.style.display="none",q.current.style.display="block",setTimeout((function(){return U(!1)}),3e3),V("CAPTURED")},children:Object(O.jsx)(v.a,{style:{fontSize:64}})})]}),Object(O.jsx)("a",{id:"downloadAnchor",href:"http://chetandr.github.com",ref:M,style:{display:"none"},children:"image"}),Object(O.jsx)(pe,{})]})},R=r(46),T=r(57);var K=function(){return Object(O.jsx)(R.a,{children:Object(O.jsx)(n.c,{children:Object(O.jsx)(n.a,{exact:!0,path:"/",children:Object(O.jsx)("div",{children:Object(O.jsx)("header",{children:Object(O.jsx)(a.a,{backend:T.a,options:{enableMouseEvents:!0},children:Object(O.jsx)(M,{})})})})})})})},B=r(23),N=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,102)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),n(e),a(e),c(e),s(e)}))};r.n(B).a.render(Object(O.jsx)(p.a.StrictMode,{children:Object(O.jsx)(K,{})}),document.getElementById("root")),N()}},[[78,1,2]]]);
//# sourceMappingURL=main.b7fc0bde.chunk.js.map