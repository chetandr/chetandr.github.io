{"version":3,"sources":["components/Logos/index.jsx","components/Car/index.js","APIConfig/Axios.js","APIConfig/CompanySettings/index.js","APIConfig/AssessmentId/index.js","APIConfig/UpdateAssessmentType/index.js","components/Journey/Onboard/Login/index.jsx","components/OverlayWindow/index.js","components/OverlayMessageBox/index.jsx","components/RoundedButton/index.js","APIConfig/GeneratePresignedUrl/index.js","APIConfig/UploadImageToS3/index.js","APIConfig/UpdateImageFileMetaDataBarcode/index.js","CarDataContext.js","components/MediaStream/helper.js","components/Journey/Onboard/License/index.jsx","components/CaptureIcon/index.jsx","components/CaptureButton/index.jsx","components/AcceptButton/index.jsx","APIConfig/UpdateImageFileMetaDataArea/index.js","states/captureState.js","components/MediaStream/index.jsx","components/MediaStreamWithDnD/index.js","components/OverlayImage/index.jsx","components/Journey/Inspection/Front/index.jsx","components/Journey/Inspection/Driverside/index.jsx","components/Journey/Inspection/Passengerside/index.jsx","components/Journey/Inspection/Rear/index.jsx","components/Journey/Inspection/Pre/index.jsx","components/Journey/Offboard/Odometer/index.jsx","APIConfig/FinalAsessmentSubmission/index.js","components/Journey/Summary/Report/index.jsx","mockconfig/journey1.js","Theme/index.js","components/ErrorBoundary/index.js","states/carDataStore.js","Journey/index.jsx","utils/geoLocation.js"],"names":["TheUnlimited","props","Box","p","src","imageURL","alt","style","marginLeft","marginRight","display","width","defaultProps","Car","axios","defaults","headers","post","Axios","create","baseURL","process","REACT_APP_CARDATA_API","timeout","CompanySettings$","otp","from","get","AssessmentId$","fieldOne","UpdateAssessmentType$","assessmentId","deviceId","patch","useStyles","makeStyles","theme","backdrop","zIndex","drawer","color","palette","primary","main","Login","t","useTranslation","React","useState","checked","setChecked","companyData","setCompanyData","setFieldOne","errors","setErrors","swipeButton","useRef","openTermsAndConditions","setOpenTermsAndConditions","useEffect","subscribe","response","data","e","console","log","logo_thumbnail_file_path","Fragment","pt","px","Typography","textAlign","company_name","TextField","id","placeholder","fullWidth","margin","variant","onChange","target","value","InputProps","borderRadius","pl","FormGroup","FormLabel","Checkbox","name","float","cursor","onClick","text","onSuccess","push","length","current","reset","toggleWaiting","assessment_id","nextAction","ref","Dialog","open","fullScreen","DialogTitle","DialogContent","overflow","padding","paddingLeft","terms_and_conditions_url","height","border","DialogActions","Button","maxWidth","map","error","Alert","severity","prevAction","OverlayWindow","Grid","container","item","xs","className","windowSize","windowXScale","borderColor","borderWidth","title","fontWeight","marginTop","edged","OverlayMessageBox","Styled","position","backgroundColor","maxSize","RoundedButton","size","textTransform","paddingRight","label","GeneratePresignedUrl$","fileExtension","md5","UploadImageToS3$","uploadURL","contentType","params","request","method","url","UpdateImageFileMetaDataArea$","imageRequestId","gps","originalImageResolution","tags","uploadDone","put","CarDataContext","createContext","getReso","getMedia","a","stream","supportedConstraints","navigator","mediaDevices","getSupportedConstraints","getUserMedia","audio","video","facingMode","exact","getVideoTracks","videoTracks","videoTrack","getCapabilities","getSettings","reso","platform","indexOf","constraints","ideal","applyConstraints","alert","updatedSettings","settings","getMD5","blob","Promise","resolve","reject","fileReader","FileReader","onloadend","file","Uint8Array","result","hash","btoa","sparkMD5","ArrayBuffer","readAsArrayBuffer","Divider","styled","License","licenseData","setLicenseData","codeReader","BrowserMultiFormatReader","carData","useContext","Object","keys","constructor","login","JSON","parse","sessionStorage","getItem","geoLocation","videoInputDevices","decodeFromConstraints","err","decodeFromVideoDevice","res","getTracks","forEach","track","readyState","stop","carInfo","split","captureCanvas","toBlob","md5Data","uploadUrl","uploadResponse","status","tag_type","make","model","license_number","registration_number","engine_number","vin_number","UpdateImageFileMetaDataBarcode$","stopStreams","NotFoundException","top","left","disableTypography","m","CaptureIcon","Icon","CaptureButton","right","IconButton","AcceptButton","fontSize","captureState","Subject","next","ItemTypes","MediaStream","videoRef","videoWrapper","imageRef","thumbnail","bboxWrapper","canvasRef","imageCanvasRef","currentBBox","setCurrentBBox","downloadAnchor","mediaSettings","setMediaSettings","setDebugData","setCapturing","bboxProperties","setBboxProperties","stage","setStage","monitor","useDragDropManager","getMonitor","imageBboxRef","x","y","currentPosition","setCurrentPosition","dragInitPositionDiff","setDragInitPositionDiff","state","useDrag","type","collect","isDragging","bbox","useDrop","accept","drop","moveBox","isOver","cbbox","cp","diff","rbox","getClientRects","x1","y1","newBboxProperties","MyPreview","usePreview","itemType","getTargetDimensions","useCallback","ms","videoWidth","videoHeight","toImgWidth","toImgHeight","Math","floor","toWidth","offsetWidth","toHeight","offsetHeight","scaleRatioX","scaleRatioY","scaleImageX","scaleImageY","toX","document","documentElement","clientWidth","toImgX","toY","toImgY","renderMedia","media","srcObject","window","URL","createObjectURL","transform","offsetLeft","offsetTop","transformOrigin","getContext","scale","newDebugData","targetXY","addEventListener","event","captureImage","ctx","drawImage","toDataURL","getImageData","ctxt","aspectRatio","thumbnailUrl","side","play","setTimeout","subscribeToOffsetChange","offset","getClientOffset","initialClientOffset","getInitialClientOffset","initialSourceClientOffset","getInitialSourceClientOffset","autoPlay","playsInline","href","onTouchStart","onMouseDown","opacity","pause","toggleOverlay","bottom","clearRect","globalAlpha","MediaStreamWithDnD","DndProvider","backend","TouchBackend","options","enableMouseEvents","LinearProgress","OverlayImage","imageName","image","Front","showOverlay","setShowOverlay","resetRnd","setResetRnd","Pre","mediaCaptureState","setMediaCaptureState","startCase","toLowerCase","overlayImagePosition","overlayImage","overlayImageSize","Odometer","FinalAsessmentSubmission$","assessmentLocation","preferredLocation","StyledPaper","Paper","Report","Card","useHistory","ackOpen","setAckOpen","alignContent","alignItems","mb","component","Intl","DateTimeFormat","format","Date","my","spacing","license","CardMedia","pre","front","CardContent","passengerside","rear","driverside","justifyContent","mockJourney","sub","contained","step","CSAItheme","createMuiTheme","typography","fontFamily","join","secondary","overrides","MuiButton","textSecondary","MuiCardMedia","img","borderTopLeftRadius","borderTopRightRadius","ErrorBoundary","errorInfo","this","setState","children","Component","carDataStore","Journey","classes","setCarData","useParams","waiting","setWaiting","currentIndex","findIndex","mj","prevIndex","nextIndex","getCurrentAndNext","newCarData","setItem","stringify","history","getComposed","newComponent","createElement","JourneyModule","default","Loader","Backdrop","CircularProgress","thickness","geolocation","getCurrentPosition","latitude","coords","longitude","lat","long","info","then","geoData","currentAction","CssBaseline","Provider","Container"],"mappings":"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","file":"static/js/4.7193d9b7.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nimport { Box } from '@material-ui/core';\r\n\r\nconst TheUnlimited = (props) => {\r\n\treturn (\r\n\t\t<Box p={4}>\r\n\t\t\t<img\r\n\t\t\t\tsrc={props.imageURL}\r\n\t\t\t\talt={props.alt}\r\n\t\t\t\tstyle={{ marginLeft: 'auto', marginRight: 'auto', display: 'block', width: '80vw' }}\r\n\t\t\t></img>\r\n\t\t</Box>\r\n\t);\r\n};\r\n\r\nTheUnlimited.defaultProps = {\r\n\timageURL: '/logos/carScan_logo.png',\r\n\talt: \"Carscan\"\r\n}\r\nexport default TheUnlimited;\r\n","import React from \"react\"\r\n\r\nconst Car = () => {\r\n    return <img src=\"/images/car.png\" style={{width:'95vw'}}/>;\r\n}\r\n\r\nexport default Car;","import axios from 'axios';\r\n\r\n// axios.defaults.baseURL = ;\r\n// axios.defaults.headers.common['Authorization'] = AUTH_TOKEN;\r\naxios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';\r\n\r\nconst  Axios = axios.create({\r\n    baseURL: process.env.REACT_APP_CARDATA_API || \"https://cardata.devinternal.carscan.ai​​\",\r\n    timeout: 60000,\r\n  });\r\n\r\nexport default Axios;\r\n","import Axios from '../Axios';\r\nimport { from } from 'rxjs';\r\n\r\nconst CompanySettings$ = (otp) => from(Axios.get(`/cardata/companies/${otp}/settings`));\r\n\r\nexport default CompanySettings$;\r\n","import Axios from '../Axios';\r\nimport { from } from 'rxjs';\r\n\r\nconst AssessmentId$ = (otp, fieldOne) => from(Axios.post(`/cardata/companies/${otp}/assessments`, {\r\n    \"captcha_id\": \"60cb91e6a1673b6e53f595fa\",\r\n    \"captcha_token\": \"cu2wy\",\r\n    \"device_id\": \"b04d837c-3539-430e-b9ae-159dcbe1e96b\",\r\n    \"field_one\": fieldOne || \"9876567654\",\r\n    \"notification_reg_id\": \"123456789\"\r\n}));\r\n\r\nexport default AssessmentId$;\r\n","import Axios from '../Axios';\r\nimport { from } from 'rxjs';\r\n\r\nconst UpdateAssessmentType$ = (otp, assessmentId, deviceId) => from(Axios.patch(`/cardata/external/companies/${otp}/assessments/${assessmentId}`, {\r\n    \"assessment_type\": \"PRE_INSPECTION\"\r\n}, { headers: { 'device-id': deviceId }, 'Content-Type': 'application/json' }));\r\n\r\nexport default UpdateAssessmentType$;\r\n","import Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport React from \"react\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Logo from \"../../../Logos\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport FormLabel from \"@material-ui/core/FormLabel\";\r\nimport FormGroup from \"@material-ui/core/FormGroup\";\r\nimport Car from \"../../../Car\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport ReactSwipeButton from \"react-swipe-button\";\r\nimport CompanySettings$ from \"../../../../APIConfig/CompanySettings\";\r\nimport AssessmentId$ from \"../../../../APIConfig/AssessmentId\";\r\nimport UpdateAssessmentType$ from \"../../../../APIConfig/UpdateAssessmentType\";\r\nimport Alert from \"@material-ui/lab/Alert\";\r\nimport { useEffect } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    color: theme.palette.primary.main,\r\n  },\r\n}));\r\n\r\nconst Login = (props) => {\r\n  const { t } = useTranslation();\r\n  const classes = useStyles();\r\n  const [checked, setChecked] = React.useState(false);\r\n  const [companyData, setCompanyData] = React.useState(null);\r\n  const [fieldOne, setFieldOne] = React.useState(null);\r\n  const [errors, setErrors] = React.useState([]);\r\n  const swipeButton = React.useRef();\r\n  const [waiting, setWaiting] = React.useState(false);\r\n  const [openTermsAndConditions, setOpenTermsAndConditions] =\r\n    React.useState(false);\r\n  const handleChange = () => {\r\n    setChecked(!checked);\r\n  };\r\n  // Load Company Details for the component to get data\r\n  useEffect(() => {\r\n    try {\r\n      CompanySettings$(9994).subscribe((response) =>\r\n        setCompanyData(response.data)\r\n      );\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n  }, []);\r\n\r\n  // When the Login Button is swiped take this action\r\n  const handleClicked = () => {\r\n    const errors = [];\r\n    // If the contact number is not set, Register an error\r\n    if (fieldOne === null) {\r\n      errors.push(t(\"Enter the Contact number\"));\r\n    }\r\n\r\n    // If the terms and conditions are not checked, Register an error\r\n    if (!checked) {\r\n      errors.push(\r\n        t(\"Agree to the terms and coditions by selecting the checkbox below\")\r\n      );\r\n    }\r\n\r\n    if (!errors.length) {\r\n      // If there are no errors\r\n      // Fetch the assessment ID and execute the Update the assessment id with the default type as pre inspection.\r\n      if(props.toggleWaiting) {\r\n        props.toggleWaiting()\r\n      }\r\n      AssessmentId$(9994, fieldOne).subscribe((response) =>\r\n        UpdateAssessmentType$(\r\n          9994,\r\n          response.data.assessment_id,\r\n          \"b04d837c-3539-430e-b9ae-159dcbe1e96b\"\r\n        ).subscribe(() => {\r\n          if(props.toggleWaiting) {\r\n            props.toggleWaiting()\r\n          }\r\n          props.nextAction(response.data);\r\n        })\r\n      );\r\n    } else {\r\n      // Set the errors object\r\n      setErrors(errors);\r\n\r\n      // reset the swipe button;\r\n      swipeButton.current.reset();\r\n    }\r\n  };\r\n  console.log(companyData?.logo_thumbnail_file_path);\r\n  return (\r\n    <React.Fragment>\r\n      \r\n      {companyData !== null && <Logo imageURL={companyData?.logo_thumbnail_file_path} />}\r\n\r\n      <Box pt={2} px={4}>\r\n        <Typography style={{ textAlign: \"center\" }}>\r\n          {t(\"welcome\", {\r\n            company_name:\r\n              companyData !== null ? companyData.company_name : \"our Shop\",\r\n          })}\r\n        </Typography>\r\n      </Box>\r\n      <Box pt={2} px={4}>\r\n        <TextField\r\n          id=\"standard-full-width\"\r\n          placeholder={t(\"Enter Your Contact Number\")}\r\n          fullWidth\r\n          margin=\"normal\"\r\n          variant=\"outlined\"\r\n          onChange={(e) => setFieldOne(e.target.value)}\r\n          InputProps={{\r\n            style: { borderRadius: \"28px\" },\r\n          }}\r\n        />\r\n      </Box>\r\n      <Box pt={4} pl={4}>\r\n        <FormGroup>\r\n          <FormLabel>\r\n            <Checkbox\r\n              color=\"primary\"\r\n              checked={checked}\r\n              onChange={handleChange}\r\n              name=\"Agreed\"\r\n              style={{ float: \"left\" }}\r\n            />\r\n            <Typography variant=\"caption\">\r\n              {t(\"I have read, understood and agreed with your\")}{\" \"}\r\n              <Typography\r\n                color=\"primary\"\r\n                variant=\"caption\"\r\n                style={{ cursor: \"pointer\", display: \"inline-block\" }}\r\n                onClick={() => setOpenTermsAndConditions(true)}\r\n              >\r\n                {\" \"}\r\n                {t(\"Terms and Conditions\")}\r\n              </Typography>\r\n            </Typography>\r\n          </FormLabel>\r\n        </FormGroup>\r\n      </Box>\r\n\r\n      <Box p={2}>\r\n        <Car />\r\n      </Box>\r\n      <Box pt={4} px={4}>\r\n        <ReactSwipeButton\r\n          text={t(\"Swipe to Login\")}\r\n          color=\"#EDA03A\"\r\n          onSuccess={handleClicked}\r\n          ref={swipeButton}\r\n        />\r\n      </Box>\r\n      {companyData !== null && (\r\n        <Dialog\r\n          open={openTermsAndConditions}\r\n          //   maxWidth=\"lg\"\r\n          fullScreen\r\n          fullWidth\r\n          //   style={{ width: \"90vw\", height: \"90vh\" }}\r\n        >\r\n          <DialogTitle>{t(\"Terms and Conditions\")}</DialogTitle>\r\n          <DialogContent\r\n            style={{ overflow: \"hidden\", padding: 0, paddingLeft: 16 }}\r\n          >\r\n            <iframe\r\n              src={companyData.terms_and_conditions_url}\r\n              style={{ width: \"100%\", height: \"100%\", border: \"none\" }}\r\n            ></iframe>\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={() => setOpenTermsAndConditions(false)}\r\n            >\r\n              {t(\"Close\")}\r\n            </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n      )}\r\n      {errors.length !== 0 && (\r\n        <Dialog\r\n          open={errors.length}\r\n          maxWidth=\"lg\"\r\n          style={{ width: \"80vw\", height: \"60vw\" }}\r\n        >\r\n          <DialogTitle>Error!!</DialogTitle>\r\n          <DialogContent style={{ overflow: \"hidden\" }}>\r\n            {errors.map((error) => (\r\n              <Box p={1}>\r\n                <Alert severity=\"error\">{error}</Alert>\r\n              </Box>\r\n            ))}\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={() => setErrors([])}\r\n            >\r\n              Ok\r\n            </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nLogin.defaultProps = {\r\n  nextAction: () => {},\r\n  prevAction: () => {},\r\n};\r\nexport default Login;\r\n","import React from \"react\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nconst OverlayWindow = (props) => {\r\n  return (\r\n    <React.Fragment>\r\n      <Grid container style={{ height: \"100vh\" }}>\r\n        <Grid\r\n          item\r\n          xs={12}\r\n          className=\"translucent\"\r\n          style={{ height: `${(100 - props.windowSize) / 2}%` }}\r\n        ></Grid>\r\n        <Grid item xs={12} style={{ height: `${props.windowSize}%` }}>\r\n          <Grid container style={{ height: \"100%\" }}>\r\n            <Grid\r\n              item\r\n              xs={(12 - props.windowXScale) / 2}\r\n              className=\"translucent\"\r\n            ></Grid>\r\n            <Grid\r\n              item\r\n              xs={props.windowXScale}\r\n              className=\"window\"\r\n              style={{\r\n                borderColor: props.borderColor,\r\n                borderWidth: props.borderWidth,\r\n                borderRadius: props.borderRadius,\r\n              }}\r\n            >\r\n              {props.title && (\r\n                <Typography\r\n                  style={{\r\n                    textAlign: \"center\",\r\n                    color: \"rgb(126, 244, 36)\",\r\n                    fontWeight: 700,\r\n                    marginTop: \"-24px\",\r\n                  }}\r\n                >\r\n                  {props.title}\r\n                </Typography>\r\n              )}\r\n              {props.edged && (\r\n                <div\r\n                  className=\"windowCorner topLeftWindowCorner\"\r\n                  style={{ borderColor: props.borderColor }}\r\n                ></div>\r\n              )}\r\n              {props.edged && (\r\n                <div\r\n                  className=\"windowCorner topRightWindowCorner\"\r\n                  style={{ borderColor: props.borderColor }}\r\n                ></div>\r\n              )}\r\n              {props.edged && (\r\n                <div\r\n                  className=\"windowCorner bottomLeftWindowCorner\"\r\n                  style={{ borderColor: props.borderColor }}\r\n                ></div>\r\n              )}\r\n              {props.edged && (\r\n                <div\r\n                  className=\"windowCorner bottomRightWindowCorner\"\r\n                  style={{ borderColor: props.borderColor }}\r\n                ></div>\r\n              )}\r\n            </Grid>\r\n            <Grid\r\n              item\r\n              xs={(12 - props.windowXScale) / 2}\r\n              className=\"translucent\"\r\n            ></Grid>\r\n          </Grid>\r\n        </Grid>\r\n        <Grid\r\n          item\r\n          xs={12}\r\n          className=\"translucent\"\r\n          style={{ height: `${(100 - props.windowSize) / 2}%` }}\r\n        ></Grid>\r\n      </Grid>\r\n    </React.Fragment>\r\n  );\r\n  // return <Backdrop open={true}></Backdrop>\r\n};\r\nOverlayWindow.defaultProps = {\r\n  windowSize: 15,\r\n  borderColor: \"#7EF424\",\r\n  borderWidth: 2,\r\n  borderRadius: \"0px\",\r\n  windowXScale: 10,\r\n  edged: true,\r\n};\r\n\r\nexport default OverlayWindow;\r\n","import Styled from '@material-ui/core/styles/styled';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nconst OverlayMessageBox = Styled(Box)({\r\n\tposition: 'relative',\r\n\t// margin: 16,\r\n\twidth: '100%',\r\n\ttextAlign: 'center',\r\n\tcolor: '#fff',\r\n\tzIndex: 2002,\r\n\tbackgroundColor: '#000',\r\n\tmaxSize: '640px',\r\n    borderRadius: '8px'\r\n});\r\n\r\nexport default OverlayMessageBox;\r\n","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nconst RoundedButton = (props) => {\r\n\tconst handleClick = () => {\r\n\t\tprops.onClick();\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Button\r\n\t\t\tvariant={props.variant}\r\n\t\t\tcolor={props.color}\r\n\t\t\tfullWidth={props.fullWidth}\r\n\t\t\tsize={props.size}\r\n\t\t\tstyle={{ borderRadius: '28px', height: '0.05%', textTransform: 'none', paddingLeft: '16px',  paddingRight: '16px'  }}\r\n\t\t\tonClick={handleClick}\r\n\t\t>\r\n\t\t\t{props.label}\r\n\t\t</Button>\r\n\t);\r\n};\r\n\r\nRoundedButton.defaultProps = {\r\n\tlabel: '',\r\n\tcolor: 'primary',\r\n\tonClick: () => {},\r\n\tfullWidth: true,\r\n\tsize: 'medium',\r\n\tvariant: 'contained',\r\n};\r\n\r\nexport default RoundedButton;\r\n","import Axios from '../Axios';\r\nimport { from } from 'rxjs';\r\n\r\nconst GeneratePresignedUrl$ = (otp, assessmentId, deviceId, fileExtension, md5) => from(Axios.post(`/cardata/external/companies/${otp}/assessments/${assessmentId}/files`, {\r\n  \"fileExtension\": fileExtension,\r\n  \"md5s\": md5\r\n}, { headers: { \"device-id\": deviceId }, 'Content-Type': 'application/json' }));\r\n\r\nexport default GeneratePresignedUrl$;\r\n","import Axios from \"../Axios\";\r\nimport { from } from \"rxjs\";\r\n\r\nconst UploadImageToS3$ = (uploadURL, data, md5, contentType, params) => {\r\n  console.log(\"IMGMD5 UPLOAD\", data);\r\n//   var formData = new FormData();\r\n//   formData.append('file', data, 'someFileName.png');\r\n  return from(\r\n    Axios.request({\r\n      method: \"PUT\",\r\n      url: uploadURL,\r\n      data: data,\r\n      headers: {\r\n        // \"Access-Control-Allow-Origin\": \"*\",\r\n        \"Content-MD5\": md5,\r\n        \"Content-Type\": contentType\r\n      },\r\n    })\r\n  );\r\n};\r\n\r\nexport default UploadImageToS3$;\r\n","import Axios from \"../Axios\";\r\nimport { from } from \"rxjs\";\r\n\r\n// {{url}}/cardata/external/companies/{{otp}}/assessments/{{assessment_id}}/files/{{image_request_id}}\r\nconst UpdateImageFileMetaDataArea$ = (\r\n  otp,\r\n  assessmentId,\r\n  deviceId,\r\n  imageRequestId,\r\n  gps,\r\n  originalImageResolution,\r\n  tags,\r\n  uploadDone\r\n) =>\r\n  from(\r\n    Axios.put(\r\n      `/cardata/external/companies/${otp}/assessments/${assessmentId}/files/${imageRequestId}`,\r\n      {\r\n        \"gps\": gps,\r\n        \"original_image_resolution\" : originalImageResolution,\r\n        \"tags\" : tags,\r\n        \"upload_done\" : uploadDone\r\n      },\r\n      { headers: { \"device-id\": deviceId }, \"Content-Type\": \"application/json\" }\r\n    )\r\n  );\r\n\r\nexport default UpdateImageFileMetaDataArea$;\r\n","import React from 'react';\r\n\r\nconst CarDataContext = React.createContext([]);\r\n\r\nexport default CarDataContext;","import md5 from \"crypto-js/md5\";\r\nimport encLatin1 from \"crypto-js/enc-latin1\";\r\nimport encBase64 from \"crypto-js/enc-base64\";\r\nimport sparkMD5 from 'spark-md5';\r\n\r\nexport const getReso = (width, height) => {\r\n  switch (`${width}x${height}`) {\r\n    case \"4032x3024\":\r\n      return \"DCI 4K (iCAM 12MP)\";\r\n    case \"3840x2160\":\r\n      return \"4K (iCAM 12MP)\";\r\n    case \"4096x2160\":\r\n      return \"DCI 4K\";\r\n    case \"3840x2160\":\r\n      return \"4K\";\r\n    case \"2048x1152\":\r\n      return \"2K\";\r\n    case \"1920x1080\":\r\n      return \"Full HD\";\r\n    case \"1280x720\":\r\n      return \"HD\";\r\n    case \"640x480\":\r\n      return \"SD\";\r\n    default:\r\n      switch (width) {\r\n        case 4032:\r\n          return \"DCI 4K\";\r\n        case 3840:\r\n          return \"4K\";\r\n        case 2048:\r\n          return \"2K\";\r\n        case 1920:\r\n          return \"Full HD\";\r\n        case 1280:\r\n          return \"HD\";\r\n        case 640:\r\n          return \"HD\";\r\n        default:\r\n          return \"Non SD\";\r\n      }\r\n  }\r\n};\r\n\r\nexport async function getMedia() {\r\n  let stream = null;\r\n  const supportedConstraints = navigator.mediaDevices.getSupportedConstraints();\r\n  console.log(\"Supported Constraints\", supportedConstraints);\r\n  try {\r\n    try {\r\n      stream = await navigator.mediaDevices.getUserMedia({\r\n        audio: false,\r\n        video: { facingMode: { exact: \"environment\" } },\r\n      });\r\n    } catch (err) {\r\n      try {\r\n        stream = await navigator.mediaDevices.getUserMedia({\r\n          audio: false,\r\n          video: { facingMode: { exact: \"user\" } },\r\n        });\r\n      } catch (e) {\r\n        stream = await navigator.mediaDevices.getUserMedia({\r\n          audio: false,\r\n          video: true,\r\n        });\r\n      }\r\n    }\r\n\r\n    const videoTracks = await stream.getVideoTracks();\r\n    const videoTrack = videoTracks[0];\r\n    if (\"getCapabilities\" in videoTracks[0]) {\r\n      const capabilities = videoTracks[0].getCapabilities();\r\n    }\r\n    const settings = videoTrack.getSettings();\r\n    let reso = \"\";\r\n    if (navigator.platform.indexOf(\"Mac\") > -1) {\r\n      try {\r\n        // DCI 4K - iCam 12 MP\r\n        reso = \"DCI 4K\";\r\n        const constraints = {\r\n          width: { ideal: 4032 },\r\n          height: { ideal: 3024 },\r\n        };\r\n        await videoTrack.applyConstraints(constraints);\r\n      } catch (e) {\r\n        try {\r\n          // UHD - iCam 8 MP\r\n          reso = \"DCI 4K\";\r\n          const constraints = {\r\n            width: { ideal: 3840 },\r\n            height: { ideal: 2160 },\r\n          };\r\n          await videoTrack.applyConstraints(constraints);\r\n        } catch (e) {\r\n          try {\r\n            // UHD - iCam 8 MP\r\n            reso = \"DCI 4K\";\r\n            const constraints = {\r\n              width: { ideal: 3840 },\r\n              height: { ideal: 2160 },\r\n            };\r\n            await videoTrack.applyConstraints(constraints);\r\n          } catch (e) {\r\n            try {\r\n              // Full HD\r\n              reso = \"Full HD\";\r\n              const constraints = {\r\n                width: { ideal: 1920 },\r\n                height: { ideal: 1080 },\r\n              };\r\n              await videoTrack.applyConstraints(constraints);\r\n            } catch (e) {\r\n              try {\r\n                // HD\r\n                reso = \"HD\";\r\n\r\n                const constraints = {\r\n                  width: { ideal: 1280 },\r\n                  height: { ideal: 720 },\r\n                };\r\n                await videoTrack.applyConstraints(constraints);\r\n              } catch (e) {\r\n                try {\r\n                  // HD\r\n                  reso = \"SD\";\r\n                  const constraints = {\r\n                    width: { ideal: 640 },\r\n                    height: { ideal: 480 },\r\n                  };\r\n                  await videoTrack.applyConstraints(constraints);\r\n                } catch (e) {\r\n                  alert(e);\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      try {\r\n        // DCI 4K\r\n        reso = \"DCI 4K\";\r\n        const constraints = {\r\n          width: { ideal: 4096 },\r\n          height: { ideal: 2160 },\r\n        };\r\n        console.log(\"DCI 4k\", constraints);\r\n        await videoTrack.applyConstraints(constraints);\r\n      } catch (e) {\r\n        try {\r\n          // UHD\r\n          reso = \"UHD\";\r\n          const constraints = {\r\n            width: { ideal: 3840 },\r\n            height: { ideal: 2160 },\r\n          };\r\n          console.log(\"UHD\", constraints);\r\n\r\n          await videoTrack.applyConstraints(constraints);\r\n        } catch (e) {\r\n          try {\r\n            // 2K\r\n            reso = \"2K\";\r\n            const constraints = {\r\n              width: { ideal: 2048 },\r\n              height: { ideal: 1152 },\r\n            };\r\n            console.log(\"2K\", constraints);\r\n\r\n            await videoTrack.applyConstraints(constraints);\r\n          } catch (e) {\r\n            try {\r\n              // Full HD\r\n              reso = \"Full HD\";\r\n              const constraints = {\r\n                width: { ideal: 1920 },\r\n                height: { ideal: 1080 },\r\n              };\r\n              console.log(\"Full HD\", constraints);\r\n\r\n              await videoTrack.applyConstraints(constraints);\r\n            } catch (e) {\r\n              try {\r\n                // HD\r\n                reso = \"HD\";\r\n\r\n                const constraints = {\r\n                  width: { ideal: 1280 },\r\n                  height: { ideal: 720 },\r\n                };\r\n                console.log(\"HD\", constraints);\r\n\r\n                await videoTrack.applyConstraints(constraints);\r\n              } catch (e) {\r\n                try {\r\n                  // HD\r\n                  reso = \"SD\";\r\n                  const constraints = {\r\n                    width: { ideal: 640 },\r\n                    height: { ideal: 480 },\r\n                  };\r\n                  console.log(\"SD\", constraints);\r\n\r\n                  await videoTrack.applyConstraints(constraints);\r\n                } catch (e) {\r\n                  alert(e);\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    const updatedSettings = videoTrack.getSettings();\r\n    updatedSettings.reso = reso;\r\n    return { stream, settings: updatedSettings, reso: reso };\r\n    /* use the stream */\r\n  } catch (err) {\r\n    console.error(err);\r\n    /* handle the error */\r\n  }\r\n}\r\n\r\nexport const getMD5 = (blob, name) =>\r\n  new Promise((resolve, reject) => {\r\n    console.log(\"dataURL\", blob);\r\n    const fileReader = new FileReader();\r\n    const hash = md5(blob);\r\n    fileReader.onloadend = async function (file) {\r\n      const iconName = \"sample\";\r\n      const content = new Uint8Array(fileReader.result);\r\n      \r\n      console.log(fileReader.result);\r\n      const hash = btoa(sparkMD5.ArrayBuffer.hash(fileReader.result, true));//md5(fileReader.result);\r\n      console.log(\"dataURL\", hash, fileReader.result);\r\n      resolve([hash, fileReader.result]);\r\n    };\r\n    fileReader.readAsArrayBuffer(blob);\r\n  });","import React from \"react\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport OverlayWindow from \"../../../OverlayWindow\";\r\nimport OverlayMessageBox from \"../../../OverlayMessageBox\";\r\nimport RoundedButton from \"../../../RoundedButton\";\r\nimport { DialogTitle, Typography } from \"@material-ui/core\";\r\nimport { Dialog, DialogActions } from \"@material-ui/core\";\r\nimport styled from \"@material-ui/core/styles/styled\";\r\nimport GeneratePresignedUrl$ from \"../../../../APIConfig/GeneratePresignedUrl\";\r\nimport UploadImageToS3$ from \"../../../../APIConfig/UploadImageToS3\";\r\nimport UpdateImageFileMetaDataBarcode$ from \"../../../../APIConfig/UpdateImageFileMetaDataBarcode\";\r\nimport CarDataContext from \"../../../../CarDataContext\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport {\r\n  BrowserMultiFormatReader,\r\n  NotFoundException,\r\n  Result,\r\n} from \"@zxing/library\";\r\n\r\nimport { getMD5 } from \"../../../MediaStream/helper\";\r\nimport { useEffect } from \"react\";\r\n// import geoLocation from \"../../../../utils/geoLocation\";\r\nconst Divider = styled(Box)({\r\n  height: \"1px\",\r\n  backgroundColor: \"#EBEBEB\",\r\n});\r\nconst License = (props) => {\r\n  const { t } = useTranslation();\r\n  const [licenseData, setLicenseData] = React.useState([]);\r\n  const codeReader = new BrowserMultiFormatReader();\r\n  const result = React.useRef();\r\n  const video = React.useRef();\r\n  const handleClicked = () => {\r\n    console.log(\"next Clicked\", props.nextAction);\r\n    props.nextAction(licenseData);\r\n  };\r\n  const handleReset = () => {\r\n    console.log(\"RESET\");\r\n    setLicenseData([]);\r\n    codeReader.reset();\r\n  };\r\n\r\n  let carData = React.useContext(CarDataContext);\r\n  if (Object.keys(carData).length === 0 && carData.constructor === Object) {\r\n    carData = {\r\n      login: JSON.parse(sessionStorage.getItem(\"login\")),\r\n      geoLocation: JSON.parse(sessionStorage.getItem(\"geoLocation\")),\r\n    };\r\n  }\r\n  useEffect(async () => {\r\n    let videoInputDevices;\r\n    try {\r\n      videoInputDevices = codeReader.decodeFromConstraints({\r\n        audio: false,\r\n        video: { facingMode: { exact: \"environment\" } },\r\n      });\r\n    } catch (err) {\r\n      try {\r\n        videoInputDevices = codeReader.decodeFromConstraints({\r\n          audio: false,\r\n          video: { facingMode: { exact: \"user\" } },\r\n        });\r\n        // stream = await navigator.mediaDevices.getUserMedia();\r\n      } catch (e) {\r\n        videoInputDevices = codeReader.decodeFromConstraints({\r\n          audio: false,\r\n          video: true,\r\n        });\r\n      }\r\n    }\r\n\r\n    // const videoInputDevices = codeReader.listVideoInputDevices();\r\n    console.log(\"codeReader\", codeReader);\r\n    console.log(\r\n      `Started continous decode from camera with id ${videoInputDevices[0]}`\r\n    );\r\n    console.log(result.current);\r\n    codeReader.decodeFromVideoDevice(\r\n      videoInputDevices[0],\r\n      video.current,\r\n      (res, err) => {\r\n        if (res) {\r\n          codeReader.stream.getTracks().forEach(function (track) {\r\n            if (track.readyState == \"live\") {\r\n              track.stop();\r\n            }\r\n          });\r\n          const carInfo = res.text.split(\"%\");\r\n          console.log(\"carInfo\", carInfo);\r\n          setLicenseData(carInfo);\r\n          codeReader.captureCanvas.toBlob(async (blob) => {\r\n            // imageRef.current.style.display = \"block\";\r\n            const [md5Data] = await getMD5(blob);\r\n            console.log(\"BLOB\", blob);\r\n            if (props.toggleWaiting) {\r\n              props.toggleWaiting();\r\n            }\r\n            GeneratePresignedUrl$(\r\n              9994,\r\n              carData.login.assessment_id,\r\n              \"b04d837c-3539-430e-b9ae-159dcbe1e96b\",\r\n              \"PNG\",\r\n              md5Data\r\n            ).subscribe((response) => {\r\n              console.log(\"Uploading the Image to the URL \", response.data);\r\n              //   const parsed = s3Client.URLParse(response.data.uploadUrl);\r\n              try {\r\n                UploadImageToS3$(\r\n                  response.data.uploadUrl,\r\n                  blob,\r\n                  md5Data,\r\n                  \"image/png\"\r\n                  // params\r\n                ).subscribe((uploadResponse) => {\r\n                  if (uploadResponse.status === 200 && props.nextAction) {\r\n                    //  otp,assessmentId,deviceId,imageRequestId, gps, originalImageResolution,tags,uploadDone\r\n                    const tags = [\r\n                      {\r\n                        tag_type: \"VEHICLE_IDENTIFIER\",\r\n                        value: \"BAR_CODE\",\r\n                        make: carInfo[9],\r\n                        model: carInfo[8],\r\n                        license_number: carInfo[6],\r\n                        registration_number: carInfo[7],\r\n                        engine_number: carInfo[13],\r\n                        vin_number: carInfo[12],\r\n                      },\r\n                    ];\r\n                    UpdateImageFileMetaDataBarcode$(\r\n                      9994,\r\n                      carData.login.assessment_id,\r\n                      \"b04d837c-3539-430e-b9ae-159dcbe1e96b\",\r\n                      response.data.id,\r\n                      carData.geoLocation,\r\n                      {\r\n                        height: codeReader.captureCanvas.width,\r\n                        width: codeReader.captureCanvas.width,\r\n                      },\r\n                      tags,\r\n                      true\r\n                    );\r\n                  }\r\n                });\r\n              } catch (e) {\r\n                console.error(\"Error\", e);\r\n              }\r\n            });\r\n          });\r\n\r\n          // result.current.textContent = res.text\r\n          codeReader.stopStreams();\r\n        }\r\n        if (err && !(err instanceof NotFoundException)) {\r\n          console.error(err);\r\n          // result.current.textContent = err\r\n        }\r\n      }\r\n    );\r\n  }, []);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Box\r\n        p={2}\r\n        style={{ display: \"block\", width: \"100%\", position: \"absolute\" }}\r\n      >\r\n        <OverlayMessageBox>\r\n          <Box p={2}>\r\n            <Box p={1}>\r\n              <Typography variant=\"body1\">\r\n                {t(\"Generate Vehicle Details\")}\r\n              </Typography>\r\n            </Box>\r\n            <Grid container>\r\n              <Grid item xs={1}></Grid>\r\n              <Grid item xs={4}>\r\n                <Box>\r\n                  <RoundedButton\r\n                    color=\"secondary\"\r\n                    size=\"small\"\r\n                    fullWidth={false}\r\n                    label={t(\"License Disc\")}\r\n                    // onClick={() => setDetailsOpen(true)}\r\n                  />\r\n                </Box>\r\n              </Grid>\r\n              <Grid item xs={1}></Grid>\r\n\r\n              <Grid item xs={4}>\r\n                <Box>\r\n                  <RoundedButton\r\n                    color=\"secondary\"\r\n                    size=\"small\"\r\n                    fullWidth={false}\r\n                    label={t(\"Vin Number\")}\r\n                    variant=\"text\"\r\n                  />\r\n                </Box>\r\n              </Grid>\r\n              <Grid item xs={1}></Grid>\r\n            </Grid>\r\n          </Box>\r\n        </OverlayMessageBox>\r\n      </Box>\r\n      <Box\r\n        p={4}\r\n        style={{\r\n          display: \"block\",\r\n          width: \"100%\",\r\n          position: \"absolute\",\r\n          top: \"20%\",\r\n          zIndex: 200,\r\n          textAlign: \"center\",\r\n          color: \"white\",\r\n        }}\r\n      >\r\n        <Typography>\r\n          {t(\r\n            \"Place our License disc within the frames and hold it there for a few seconds.\"\r\n          )}\r\n        </Typography>\r\n      </Box>\r\n      <Box>\r\n        <div>\r\n          <video id=\"video\" width=\"300\" height=\"200\" ref={video}></video>\r\n        </div>\r\n      </Box>\r\n\r\n      <Box style={{ top: 0, left: 0 }}>\r\n        <OverlayWindow windowSize={24} />\r\n      </Box>\r\n      <Box\r\n        p={4}\r\n        style={{\r\n          display: \"block\",\r\n          width: \"100%\",\r\n          position: \"absolute\",\r\n          top: \"64%\",\r\n          zIndex: 200,\r\n          textAlign: \"center\",\r\n          color: \"white\",\r\n        }}\r\n      >\r\n        <Typography>{t(\"Move Closer to the scan area.\")}</Typography>\r\n      </Box>\r\n      <Dialog open={licenseData.length > 0} size=\"md\">\r\n        <DialogTitle disableTypography=\"false\">\r\n          <Typography variant=\"h4\" style={{ textAlign: \"center\", padding: \"8px\" }}>\r\n            {t(\"Details found !\")}\r\n          </Typography>\r\n        </DialogTitle>\r\n        <Box p={1} m={2} textAlign=\"center\">\r\n          <Typography variant=\"h6\">{licenseData[9]}</Typography>\r\n          <Divider />\r\n          <Typography variant=\"body2\" textAlign=\"center\">\r\n            {t(\"Make\")}\r\n          </Typography>\r\n        </Box>\r\n        <Box p={1} m={2} textAlign=\"center\">\r\n          <Typography variant=\"h6\">{licenseData[8]}</Typography>\r\n          <Divider />\r\n          <Typography variant=\"body2\" textAlign=\"center\">\r\n            {t(\"Model\")}\r\n          </Typography>\r\n        </Box>\r\n        <Box p={1} m={2} textAlign=\"center\">\r\n          <Typography variant=\"h6\">{licenseData[6]}</Typography>\r\n          <Divider />\r\n          <Typography variant=\"body2\" textAlign=\"center\">\r\n            {t(\"License No\")}\r\n          </Typography>\r\n        </Box>\r\n        <Box p={1} m={2} textAlign=\"center\">\r\n          <Typography variant=\"h6\">{licenseData[12]}</Typography>\r\n          <Divider />\r\n          <Typography variant=\"body2\" textAlign=\"center\">\r\n            {t(\"Vin No\")}\r\n          </Typography>\r\n        </Box>\r\n        <DialogActions>\r\n          <RoundedButton\r\n            label={\"Retake\"}\r\n            color=\"tertiary\"\r\n            onClick={handleReset}\r\n          ></RoundedButton>\r\n          <RoundedButton\r\n            label={t(\"Confirm\")}\r\n            onClick={handleClicked}\r\n          ></RoundedButton>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </React.Fragment>\r\n  );\r\n  // return <Backdrop open={true}></Backdrop>\r\n};\r\n\r\nexport default License;\r\n","import React from 'react';\r\nimport Icon from '@material-ui/core/Icon';\r\nconst CaptureIcon = (props) => {\r\n\treturn (\r\n\t\t<Icon style={{ height: '100%', width: '100%' }}>\r\n\t\t\t<img src='/images/CaptureButton.png' style={{ textAlign: 'center', width: '80px' }} />\r\n\t\t</Icon>\r\n\t);\r\n};\r\n\r\nexport default CaptureIcon;\r\n","import React from 'react';\r\nimport Box from '@material-ui/core/Box';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nimport CaptureIcon from '../CaptureIcon';\r\n\r\nconst CaptureButton = (props) => {\r\n\treturn (\r\n\t\t<Box\r\n\t\t\tp={4}\r\n\t\t\tstyle={{\r\n\t\t\t\tdisplay: 'block',\r\n\t\t\t\tposition: 'absolute',\r\n\t\t\t\ttop: '40%',\r\n\t\t\t\tright: '0%',\r\n\t\t\t\tzIndex: 205,\r\n\t\t\t\ttextAlign: 'center',\r\n\t\t\t\tcolor: 'white',\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t<IconButton onClick={props.onClick}>\r\n\t\t\t\t<CaptureIcon style={{width: \"80px\"}}/>\r\n\t\t\t</IconButton>\r\n\t\t</Box>\r\n\t);\r\n};\r\n\r\nexport default CaptureButton;","import React from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\n\r\nimport CaptureIcon from \"../CaptureIcon\";\r\nimport CheckCircleIcon from \"@material-ui/icons/CheckCircle\";\r\nconst AcceptButton = (props) => {\r\n  return (\r\n    <Box\r\n      p={4}\r\n      style={{\r\n        display: \"block\",\r\n        position: \"absolute\",\r\n        top: \"40%\",\r\n        right: \"0%\",\r\n        zIndex: 205,\r\n        textAlign: \"center\",\r\n        color: \"white\",\r\n      }}\r\n    >\r\n      <IconButton onClick={props.onClick}>\r\n        <CheckCircleIcon\r\n          style={{ fontSize: \"80px\", color: \"rgb(126, 244, 36)\" }}\r\n        />\r\n      </IconButton>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default AcceptButton;\r\n","import Axios from \"../Axios\";\r\nimport { from } from \"rxjs\";\r\n\r\n// {{url}}/cardata/external/companies/{{otp}}/assessments/{{assessment_id}}/files/{{image_request_id}}\r\nconst UpdateImageFileMetaDataArea$ = (\r\n  otp,\r\n  assessmentId,\r\n  deviceId,\r\n  imageRequestId,\r\n  gps,\r\n  originalImageResolution,\r\n  tags,\r\n  uploadDone\r\n) =>\r\n  from(\r\n    Axios.put(\r\n      `/cardata/external/companies/${otp}/assessments/${assessmentId}/files/${imageRequestId}`,\r\n      {\r\n        \"gps\": gps,\r\n        \"original_image_resolution\" : originalImageResolution,\r\n        \"tags\" : tags,\r\n        \"upload_done\" : uploadDone\r\n      },\r\n      { headers: { \"device-id\": deviceId }, \"Content-Type\": \"application/json\" }\r\n    )\r\n  );\r\n\r\nexport default UpdateImageFileMetaDataArea$;\r\n","import {Subject} from \"rxjs\";\r\n\r\nconst captureState = new Subject();\r\ncaptureState.next(\"INIT\");\r\n\r\nexport default captureState;\r\n","import React, { useEffect } from \"react\";\r\nimport { getMedia, getReso, getMD5 } from \"./helper\";\r\nimport { useDrag, useDragDropManager, useDrop } from \"react-dnd\";\r\n\r\nimport DebugData from \"../DebugData\";\r\nimport { usePreview } from \"react-dnd-preview\";\r\n// import Hierarchy from './components/Hierarchy';\r\nimport CaptureButton from \"../CaptureButton\";\r\nimport AcceptButton from \"../AcceptButton\";\r\nimport GeneratePresignedUrl$ from \"../../APIConfig/GeneratePresignedUrl\";\r\nimport UploadImageToS3$ from \"../../APIConfig/UploadImageToS3\";\r\nimport UpdateImageFileMetaDataArea$ from \"../../APIConfig/UpdateImageFileMetaDataArea\";\r\nimport CarDataContext from \"../../CarDataContext\";\r\nimport RoundedButton from \"../RoundedButton\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport captureState from \"../../states/captureState\";\r\n// import CheckCircleOutlineIcon from \"@material-ui/icons/CheckCircleOutline\";\r\nimport { IconButton } from \"@material-ui/core\";\r\nconst ItemTypes = {\r\n  BOUNDARY: \"boundry\",\r\n};\r\n\r\nconst MediaStream = (props) => {\r\n  const { t } = useTranslation();\r\n  const debug = false;\r\n  const videoRef = React.useRef();\r\n  const videoWrapper = React.useRef();\r\n\r\n  const imageRef = React.useRef();\r\n  const thumbnail = React.useRef();\r\n  const bboxWrapper = React.useRef();\r\n  const canvasRef = React.useRef();\r\n  const imageCanvasRef = React.useRef();\r\n  const [currentBBox, setCurrentBBox] = React.useState();\r\n  const downloadAnchor = React.useRef();\r\n  const [mediaSettings, setMediaSettings] = React.useState({});\r\n  const [debugData, setDebugData] = React.useState({});\r\n  const [capturing, setCapturing] = React.useState(false);\r\n  const [bboxProperties, setBboxProperties] = React.useState();\r\n  const [stage, setStage] = React.useState(\"INIT\");\r\n  const dragDropManager = useDragDropManager();\r\n  const monitor = dragDropManager.getMonitor();\r\n  const imageBboxRef = React.useRef();\r\n  const [currentPosition, setCurrentPosition] = React.useState({ x: 0, y: 0 });\r\n  const [dragInitPositionDiff, setDragInitPositionDiff] = React.useState({\r\n    x: 0,\r\n    y: 0,\r\n  });\r\n  let carData = React.useContext(CarDataContext);\r\n  if (Object.keys(carData).length === 0 && carData.constructor === Object) {\r\n    carData = {\r\n      login: JSON.parse(sessionStorage.getItem(\"login\")),\r\n      geoLocation: JSON.parse(sessionStorage.getItem(\"geoLocation\")),\r\n    };\r\n  }\r\n  captureState.subscribe((state) => {\r\n    console.log(\"Capture Stage\", state);\r\n    setStage(state);\r\n  });\r\n  console.log(\"carData\", carData);\r\n  const [{ isDragging }, bbox] = useDrag(() => ({\r\n    type: ItemTypes.BOUNDARY,\r\n    collect: (monitor) => ({\r\n      isDragging: !!monitor.isDragging(),\r\n    }),\r\n  }));\r\n  const [{ isOver }, drop] = useDrop(\r\n    () => ({\r\n      accept: ItemTypes.BOUNDARY,\r\n      drop: () => moveBox(currentBBox, currentPosition, dragInitPositionDiff),\r\n      collect: (monitor) => ({\r\n        isOver: !!monitor.isOver(),\r\n      }),\r\n    }),\r\n    [currentPosition, dragInitPositionDiff, currentBBox]\r\n  );\r\n  const moveBox = (cbbox, cp, diff) => {\r\n    const x = cp.x - diff.x;\r\n    const y = cp.y - diff.y;\r\n    console.log(cbbox, cp, diff);\r\n    const rbox = cbbox.current.getClientRects();\r\n    const x1 = x + rbox[0].width;\r\n    const y1 = y + rbox[0].height;\r\n    cbbox.current.style.left = `${x}px`;\r\n    cbbox.current.style.top = `${y}px`;\r\n    const newBboxProperties = {\r\n      ...bboxProperties,\r\n      [cbbox.current.id]: [\r\n        { x, y },\r\n        { x: x1, y: y1 },\r\n      ],\r\n    };\r\n    setBboxProperties(newBboxProperties);\r\n    // drag.current.left = `${currentPosition.x}px`;\r\n    // drag.current.top = `${currentPosition.y}px`;\r\n  };\r\n  const MyPreview = () => {\r\n    const { display, itemType, item, style } = usePreview();\r\n    if (!display) {\r\n      return null;\r\n    }\r\n    return (\r\n      <div className=\"boundingBoxWrapper\" style={style}>\r\n        <div className=\"boundingBox\"></div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const getTargetDimensions = React.useCallback(\r\n    (ms) => {\r\n      const videoWidth = ms.width;\r\n      const videoHeight = ms.height;\r\n      const toImgWidth = 1920;\r\n      const toImgHeight = Math.floor((toImgWidth * videoHeight) / videoWidth);\r\n\r\n      let toWidth = videoWrapper.current.offsetWidth;\r\n      let toHeight = videoWrapper.current.offsetHeight;\r\n      if (toWidth > toHeight) {\r\n        toHeight = Math.floor((toWidth * videoHeight) / videoWidth);\r\n      } else {\r\n        toWidth = Math.floor((toHeight * videoWidth) / videoHeight);\r\n      }\r\n      const scaleRatioX = toWidth / videoWidth;\r\n      const scaleRatioY = toHeight / videoHeight;\r\n      const scaleImageX = toImgWidth / videoWidth;\r\n      const scaleImageY = toImgHeight / videoHeight;\r\n      let toX = 0;\r\n      let toY = 0;\r\n      if (toWidth > document.documentElement.clientWidth) {\r\n        toX = -(toWidth - document.documentElement.clientWidth) / 2;\r\n      }\r\n      let toImgX = 0;\r\n      let toImgY = 0;\r\n      if (toWidth > document.documentElement.clientWidth) {\r\n        toImgX = -(toImgWidth - document.documentElement.clientWidth) / 2;\r\n      }\r\n\r\n      return {\r\n        videoWidth,\r\n        videoHeight,\r\n        toWidth,\r\n        toHeight,\r\n        toX,\r\n        toY,\r\n        scaleRatioX,\r\n        scaleRatioY,\r\n        toImgWidth,\r\n        toImgHeight,\r\n        toImgX,\r\n        toImgY,\r\n        scaleImageX,\r\n        scaleImageY,\r\n      };\r\n    },\r\n    [videoWrapper]\r\n  );\r\n\r\n  const renderMedia = React.useCallback(async () => {\r\n    const media = await getMedia();\r\n    // debugger;\r\n    if (media && videoRef.current) {\r\n      if (\"srcObject\" in videoRef.current) {\r\n        videoRef.current.srcObject = media.stream;\r\n      } else {\r\n        videoRef.src = window.URL.createObjectURL(media.stream);\r\n      }\r\n      setMediaSettings(media.settings);\r\n      const {\r\n        videoWidth,\r\n        videoHeight,\r\n        toWidth,\r\n        toHeight,\r\n        toX,\r\n        toY,\r\n        scaleRatioX,\r\n        scaleRatioY,\r\n        toImgWidth,\r\n        toImgHeight,\r\n        toImgX,\r\n        toImgY,\r\n        scaleImageX,\r\n        scaleImageY,\r\n      } = getTargetDimensions(media.settings);\r\n\r\n      videoRef.current.width = videoWidth;\r\n      videoRef.current.height = videoHeight;\r\n      imageRef.current.width = toImgWidth; //toImgWidth;\r\n      imageRef.current.height = toImgHeight; //toImgHeight;\r\n      if (toWidth < document.documentElement.clientWidth) {\r\n        videoRef.current.style.transform = `translate(${-videoRef.current\r\n          .offsetLeft}px, ${-videoRef.current\r\n          .offsetTop}px) scale(${scaleRatioX}, ${scaleRatioY})`;\r\n      } else {\r\n        console.log(\r\n          `translate(${-toX}px, ${-toY}px) scale(${scaleRatioX}, ${scaleRatioY})`\r\n        );\r\n        videoRef.current.style.transform = `translate(${toX}px, ${-videoRef\r\n          .current.offsetTop}px) scale(${scaleRatioX}, ${scaleRatioY})`;\r\n      }\r\n\r\n      videoRef.current.style.transformOrigin = \"top left\";\r\n      imageCanvasRef.current.width = toImgWidth; //;toImgWidth; //media.settings.width; //window.innerWidth;\r\n      imageCanvasRef.current.height = toImgHeight; //; //media.settings.height; //window.innerHeight;\r\n      const ctx = imageCanvasRef.current.getContext(\"2d\");\r\n      ctx.scale(scaleImageX, scaleImageY);\r\n      imageCanvasRef.current.style.width = `${toWidth}px`;\r\n      imageCanvasRef.current.style.height = `${toHeight}px`;\r\n      const newDebugData = {\r\n        video: `${videoWidth} x ${videoHeight} (${getReso(\r\n          videoWidth,\r\n          videoHeight\r\n        )})`,\r\n        scale: `${scaleRatioX} x ${scaleRatioY}`,\r\n        media: `${media.settings.width} x ${media.settings.height}`,\r\n        target: `${toWidth} x ${toHeight}`,\r\n        targetXY: `${toX} x ${toY}`,\r\n      };\r\n      // setInterval(() => readBarcode(toWidth, toHeight), 2000)\r\n      setDebugData(newDebugData);\r\n    }\r\n  }, [videoRef, videoWrapper, canvasRef, imageCanvasRef]);\r\n\r\n  window.addEventListener(\"orientationchange\", function (event) {\r\n    renderMedia();\r\n  });\r\n\r\n  useEffect(async () => {\r\n    renderMedia();\r\n  }, [videoRef, videoWrapper, canvasRef, imageCanvasRef]);\r\n\r\n  const captureImage = async () => {\r\n    const {\r\n      videoWidth,\r\n      videoHeight,\r\n      toWidth,\r\n      toHeight,\r\n      toX,\r\n      toY,\r\n      scaleRatioX,\r\n      scaleRatioY,\r\n      toImgWidth,\r\n      toImgHeight,\r\n    } = getTargetDimensions(mediaSettings);\r\n\r\n    const ctx = imageCanvasRef.current.getContext(\"2d\");\r\n    setCapturing(true);\r\n\r\n    // videoRef.current.currentTime = 0;\r\n    // ctx.scale(scaleRatioX, scaleRatioY);\r\n    ctx.drawImage(videoRef.current, 2, 0);\r\n\r\n    const url = imageCanvasRef.current.toDataURL(\"image/png\");\r\n    const imgData = ctx.getImageData(0, 0, toImgWidth, toImgHeight);\r\n    const thumbWidth = 480;\r\n    const ctxt = thumbnail.current.getContext(\"2d\");\r\n    thumbnail.current.width = thumbWidth; //imageCanvasRef.current.width;\r\n    thumbnail.current.height = thumbWidth / mediaSettings.aspectRatio; //imageCanvasRef.current.width;\r\n    // ctxt.scale(\r\n    //   thumbWidth / imageCanvasRef.current.width,\r\n    //   thumbWidth / mediaSettings.aspectRatio / imageCanvasRef.current.height\r\n    // );\r\n    ctxt.drawImage(\r\n      imageCanvasRef.current,\r\n      0,\r\n      0,\r\n      imageCanvasRef.current.width,\r\n      imageCanvasRef.current.height,\r\n      0,\r\n      0,\r\n      thumbnail.current.width,\r\n      thumbnail.current.height\r\n    );\r\n    // thumbnail.current.width = thumbWidth;\r\n    // thumbnail.current.height = thumbWidth / mediaSettings.aspectRatio;\r\n    const thumbnailUrl = thumbnail.current.toDataURL(\"image/png\");\r\n\r\n    // props.nextAction({ thumbnail: thumbnailUrl });\r\n    // downloadAnchor.current.href = thumbnailUrl;\r\n    // downloadAnchor.current.download = \"MyPhoto.png\";\r\n    // downloadAnchor.current.click();\r\n    imageCanvasRef.current.toBlob(async (blob) => {\r\n      // imageRef.current.style.display = \"block\";\r\n      const [md5Data] = await getMD5(blob);\r\n      console.log(\"BLOB\", blob);\r\n      if (props.toggleWaiting) {\r\n        props.toggleWaiting();\r\n      }\r\n      GeneratePresignedUrl$(\r\n        9994,\r\n        carData.login.assessment_id,\r\n        \"b04d837c-3539-430e-b9ae-159dcbe1e96b\",\r\n        \"PNG\",\r\n        md5Data\r\n      ).subscribe((response) => {\r\n        console.log(\"Uploading the Image to the URL \", response.data);\r\n        //   const parsed = s3Client.URLParse(response.data.uploadUrl);\r\n        try {\r\n          UploadImageToS3$(\r\n            response.data.uploadUrl,\r\n            blob,\r\n            md5Data,\r\n            \"image/png\"\r\n            // params\r\n          ).subscribe((uploadResponse) => {\r\n            if (uploadResponse.status === 200 && props.nextAction) {\r\n              //  otp,assessmentId,deviceId,imageRequestId, gps, originalImageResolution,tags,uploadDone\r\n              UpdateImageFileMetaDataArea$(\r\n                9994,\r\n                carData.login.assessment_id,\r\n                \"b04d837c-3539-430e-b9ae-159dcbe1e96b\",\r\n                response.data.id,\r\n                carData.geoLocation,\r\n                {\r\n                  height: toImgHeight,\r\n                  width: toImgWidth,\r\n                },\r\n                [\r\n                  {\r\n                    tag_type: \"AREA\",\r\n                    value: props.side,\r\n                  },\r\n                ],\r\n                true\r\n              );\r\n              if (videoRef.current) {\r\n                videoRef.current.play();\r\n              }\r\n              props.nextAction({ ...response.data, thumbnail: thumbnailUrl });\r\n            } else {\r\n              if (props.toggleWaiting) {\r\n                props.toggleWaiting();\r\n              }\r\n            }\r\n          });\r\n        } catch (e) {\r\n          if (props.toggleWaiting) {\r\n            props.toggleWaiting();\r\n          }\r\n          console.error(\"Error\", e);\r\n        }\r\n      });\r\n    });\r\n    setTimeout(() => setCapturing(false), 3000);\r\n    // setStage(\"CAPTURED\");\r\n  };\r\n\r\n  const captureBox = () => {\r\n    const {\r\n      videoWidth,\r\n      videoHeight,\r\n      toWidth,\r\n      toHeight,\r\n      toX,\r\n      toY,\r\n      scaleRatioX,\r\n      scaleRatioY,\r\n      toImgWidth,\r\n      toImgHeight,\r\n    } = getTargetDimensions(mediaSettings);\r\n    const ctx = imageCanvasRef.current.getContext(\"2d\");\r\n    videoRef.current.pause();\r\n    // videoRef.current.currentTime = 0;\r\n    // ctx.scale(scaleRatioX, scaleRatioY);\r\n    ctx.drawImage(videoRef.current, 2, 0);\r\n    // videoRef.current.style.display = \"none\";\r\n    // imageCanvasRef.current.style.display = \"block\";\r\n    if (props.toggleOverlay) {\r\n      props.toggleOverlay();\r\n    }\r\n    setStage(\"CAPTURED\");\r\n    captureState.next(\"CAPTURED\");\r\n    // ctx.drawImage(vi)\r\n    // ctx.lineWidth = \"2\";\r\n\r\n    // ctx.globalAlpha = 0.2;\r\n    // ctx.fillStyle = \"#FFD600\";\r\n\r\n    // ctx.fillRect(\r\n    //   bboxWrapper.current.offsetLeft / scaleRatioX,\r\n    //   bboxWrapper.current.offsetTop / scaleRatioY,\r\n    //   bboxWrapper.current.offsetWidth / scaleRatioX,\r\n    //   bboxWrapper.current.offsetHeight / scaleRatioY\r\n    // );\r\n    // ctx.globalAlpha = 1;\r\n    // ctx.strokeStyle = \"#ff7300\";\r\n    // ctx.stroke();\r\n    setCapturing(true);\r\n    // videoRef.current.pause();\r\n    // videoRef.current.currentTime = 0;\r\n    // // ctx.scale(scaleRatioX, scaleRatioY);\r\n    // ctx.drawImage(videoRef.current, 0, 0);\r\n\r\n    // const url = imageCanvasRef.current.toDataURL(\"image/png\");\r\n    // imageBboxRef.current.src = url;\r\n    // videoRef.current.style.display = \"none\";\r\n    // imageBboxRef.current.style.display = \"block\";\r\n    // imageRef.current.style.display = \"none\";\r\n    // // videoWrapper.current.style.oveflor ='auto';\r\n    // // imageRef.current.style.transform = `translate(${-videoRef.current.offsetLeft}px, ${-videoRef.current\r\n    // // .offsetTop}px) scale(${scaleRatioX}, ${scaleRatioY})`;\r\n    // imageBboxRef.current.style.transformOrigin = \"top left\";\r\n    // videoRef.current.style.display = \"none\";\r\n    // imageBboxRef.current.style.display = \"block\";\r\n    // // photo.current.setAttribute('src', url);\r\n    // // downloadAnchor.current.href = url;\r\n    // // downloadAnchor.current.download = 'MyPhoto.png';\r\n    // // downloadAnchor.current.click();\r\n    // // //\r\n    // // window.URL.revokeObjectURL(url);\r\n    // setTimeout(() => setCapturing(false), 3000);\r\n  };\r\n  React.useEffect(() => {\r\n    monitor.subscribeToOffsetChange(() => {\r\n      const offset = monitor.getClientOffset();\r\n      const initialClientOffset = monitor.getInitialClientOffset();\r\n      const initialSourceClientOffset = monitor.getInitialSourceClientOffset();\r\n      if (initialClientOffset && initialSourceClientOffset) {\r\n        setDragInitPositionDiff({\r\n          x: initialClientOffset.x - initialSourceClientOffset.x,\r\n          y: initialClientOffset.y - initialSourceClientOffset.y,\r\n        });\r\n        setCurrentPosition(offset);\r\n      }\r\n\r\n      // do stuff like setState, though consider directly updating style through refs for performance\r\n    });\r\n  }, [monitor]);\r\n  const reset = () => {\r\n    videoRef.current.style.display = \"block\";\r\n    const ctx = imageCanvasRef.current.getContext(\"2d\");\r\n    ctx.clearRect(\r\n      0,\r\n      0,\r\n      imageCanvasRef.current.width,\r\n      imageCanvasRef.current.height\r\n    );\r\n    ctx.globalAlpha = 1;\r\n    imageBboxRef.current.style.display = \"none\";\r\n    imageRef.current.style.display = \"none\";\r\n    // imageCanvasRef.current.style.display = \"none\";\r\n    videoRef.current.play();\r\n    captureState.next(\"INIT\");\r\n    setStage(\"INIT\");\r\n  };\r\n  console.log(\"STAGE\", stage);\r\n  return (\r\n    <div ref={drop}>\r\n      {debug && (\r\n        <div id=\"debug\">\r\n          <DebugData debugData={debugData} />\r\n        </div>\r\n      )}\r\n      <div\r\n        ref={videoWrapper}\r\n        className=\"videoWrapper\"\r\n        style={{ overflow: stage === \"CAPTURED\" ? \"auto\" : \"hidden\" }}\r\n      >\r\n        {/* <div ref={videoWrapper}> */}\r\n        <video\r\n          ref={videoRef}\r\n          id=\"camvideo\"\r\n          autoPlay\r\n          playsInline\r\n          // onLoadedMetadata={metaDataLoadHandle}\r\n          // style={{ display: 'none' }}\r\n          // className=\"videosize\"\r\n          style={{ display: stage === \"INIT\" ? \"block\" : \"none\" }}\r\n        ></video>\r\n        <img\r\n          ref={imageRef}\r\n          style={{ border: \"solid 2px red\", display: \"none\" }}\r\n        ></img>\r\n        <img\r\n          ref={imageBboxRef}\r\n          style={{ border: \"solid 2px red\", display: \"none\" }}\r\n        ></img>\r\n      </div>\r\n\r\n      <div style={{ position: \"absolute\" }}>\r\n        <canvas\r\n          ref={canvasRef}\r\n          style={{ border: \"solid 2px red\", display: \"none\" }}\r\n        ></canvas>\r\n        <canvas\r\n          ref={imageCanvasRef}\r\n          style={{ display: stage === \"INIT\" ? \"none\" : \"block\" }}\r\n        ></canvas>\r\n        <canvas\r\n          ref={thumbnail}\r\n          style={{\r\n            border: \"solid 2px orange\",\r\n            position: \"absolute\",\r\n            top: \"0px\",\r\n            display: \"none\",\r\n          }}\r\n        ></canvas>\r\n      </div>\r\n      <a\r\n        id=\"downloadAnchor\"\r\n        href=\"http://chetandr.github.com\"\r\n        ref={downloadAnchor}\r\n        style={{ display: \"none\" }}\r\n      >\r\n        image\r\n      </a>\r\n      {stage === \"BBOX\" && (\r\n        <div\r\n          className=\"boundingBoxWrapper\"\r\n          id=\"bbox\"\r\n          ref={bboxWrapper}\r\n          onTouchStart={() => setCurrentBBox(bboxWrapper)}\r\n          onMouseDown={() => setCurrentBBox(bboxWrapper)}\r\n          style={{ opacity: isDragging ? 0 : 1 }}\r\n        >\r\n          <div\r\n            className=\"boundingBox\"\r\n            ref={bbox}\r\n            style={{\r\n              cursor: \"move\",\r\n              display: \"inline-block\",\r\n            }}\r\n          ></div>\r\n        </div>\r\n      )}\r\n      <a\r\n        id=\"downloadAnchor\"\r\n        href=\"http://chetandr.github.com\"\r\n        ref={downloadAnchor}\r\n        style={{ display: \"none\" }}\r\n      >\r\n        image\r\n      </a>\r\n      <MyPreview />\r\n      {stage === \"INIT\" && <CaptureButton onClick={captureBox} />}\r\n      {stage === \"CAPTURED\" && <AcceptButton onClick={captureImage} />}\r\n      <Box\r\n        style={{\r\n          bottom: \"10px\",\r\n          position: \"absolute\",\r\n          width: \"200px\",\r\n          right: \"10px\",\r\n        }}\r\n      >\r\n        {stage === \"CAPTURED\" && (\r\n          <RoundedButton\r\n            onClick={reset}\r\n            label={t(\"Retake\")}\r\n            color=\"tertiary\"\r\n          ></RoundedButton>\r\n        )}\r\n      </Box>\r\n    </div>\r\n  );\r\n};\r\n\r\nMediaStream.defaultProps = {\r\n  nextAction: () => {},\r\n  side: \"\",\r\n};\r\nexport default MediaStream;\r\n","import { DndProvider } from \"react-dnd\";\r\nimport MediaStream from \"../MediaStream\";\r\nimport { TouchBackend } from \"react-dnd-touch-backend\";\r\nimport { LinearProgress } from \"@material-ui/core\";\r\nfunction MediaStreamWithDnD(props) {\r\n  if (props.side) {\r\n    return (\r\n      <DndProvider backend={TouchBackend} options={{ enableMouseEvents: true }}>\r\n        <MediaStream\r\n          nextAction={props.nextAction}\r\n          side={props.side}\r\n          toggleWaiting={props.toggleWaiting}\r\n          toggleOverlay={props.toggleOverlay}\r\n          reset={props.reset}\r\n        />\r\n      </DndProvider>\r\n    );\r\n  } else {\r\n    return <LinearProgress />;\r\n  }\r\n}\r\n\r\nMediaStreamWithDnD.defaultProps = {\r\n  nextAction: () => {},\r\n  side: \"\",\r\n};\r\n\r\nexport default MediaStreamWithDnD;\r\n","import React from 'react';\r\n\r\nconst OverlayImage = (props) => {\r\n\tconst imageName = `/images/overlays/${props.image}`;\r\n\treturn <img src={imageName} width={props.width} />;\r\n};\r\n\r\nOverlayImage.defaultProps = {\r\n\timage: 'FrontFull.png',\r\n\twidth: '60%',\r\n};\r\n\r\nexport default OverlayImage;\r\n","import React from \"react\";\r\nimport Backdrop from \"@material-ui/core/Backdrop\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport OverlayWindow from \"../../../OverlayWindow\";\r\nimport MediaStreamWithDnD from \"../../../MediaStreamWithDnD\";\r\nimport OverlayImage from \"../../../OverlayImage\";\r\nimport RoundedButton from \"../../../RoundedButton\";\r\nimport { Typography } from \"@material-ui/core\";\r\nimport PhotoCameraRounded from \"@material-ui/icons/PhotoCameraRounded\";\r\nimport CaptureIcon from \"../../../CaptureIcon\";\r\nimport CaptureButton from \"../../../CaptureButton\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nconst Front = (props) => {\r\n  const { t } = useTranslation();\r\n  const [showOverlay, setShowOverlay] = React.useState(true);\r\n  const [resetRnd, setResetRnd] = React.useState(true);\r\n  const toggleOverlay = () => {\r\n    setShowOverlay(!showOverlay);\r\n  };\r\n  const handleClicked = (data) => {\r\n    console.log(\"next Clicked\", props.nextAction);\r\n    props.nextAction(data);\r\n  };\r\n\r\n  const reset = () => {\r\n\t setResetRnd(false); \r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Box\r\n        p={4}\r\n        style={{\r\n          // display: 'none',\r\n          width: \"100%\",\r\n          position: \"absolute\",\r\n          top: \"10px\",\r\n          zIndex: 200,\r\n          textAlign: \"center\",\r\n          color: \"white\",\r\n        }}\r\n      >\r\n        <Typography> {t(\"capture\", { side: t(\"front\") })}</Typography>\r\n      </Box>\r\n\r\n      <MediaStreamWithDnD\r\n        nextAction={handleClicked}\r\n        side=\"FRONT_SIDE\"\r\n        toggleWaiting={props.toggleWaiting}\r\n        toggleOverlay={toggleOverlay}\r\n\t\tresetRnd={resetRnd}\r\n\t\treset={reset}\r\n      />\r\n      {/* <Box style={{ postion: 'absolute', top: 0, left: 0 }}>\r\n\t\t\t\t<OverlayWindow windowSize={24} />\r\n\t\t\t</Box> */}\r\n      {/* <CaptureButton onClick={handleClicked}/> */}\r\n      <Box\r\n        style={{\r\n          // display: 'none',\r\n          width: \"100%\",\r\n          position: \"absolute\",\r\n          top: \"20%\",\r\n          zIndex: 200,\r\n          textAlign: \"center\",\r\n          color: \"white\",\r\n        }}\r\n      >\r\n        {showOverlay && <OverlayImage image=\"FrontFull.png\" width=\"50%\" />}\r\n      </Box>\r\n    </React.Fragment>\r\n  );\r\n  // return <Backdrop open={true}></Backdrop>\r\n};\r\n\r\nexport default Front;\r\n","import React from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport MediaStreamWithDnD from \"../../../MediaStreamWithDnD\";\r\nimport OverlayImage from \"../../../OverlayImage\";\r\nimport { Typography } from \"@material-ui/core\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nconst License = (props) => {\r\n  const { t } = useTranslation();\r\n  const handleClicked = (data) => {\r\n    console.log(\"next Clicked\", props.nextAction);\r\n    props.nextAction(data);\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Box\r\n        p={4}\r\n        style={{\r\n          display: \"block\",\r\n          width: \"100%\",\r\n          position: \"absolute\",\r\n          top: \"10px\",\r\n          zIndex: 200,\r\n          textAlign: \"center\",\r\n          color: \"white\",\r\n        }}\r\n      >\r\n        <Typography> {t(\"capture\", { side: t(\"driver side\") })}</Typography>\r\n      </Box>\r\n\r\n      <MediaStreamWithDnD\r\n        nextAction={handleClicked}\r\n        side=\"DRIVER_SIDE\"\r\n        toggleWaiting={props.toggleWaiting}\r\n      />\r\n      {/* <Box style={{ postion: 'absolute', top: 0, left: 0 }}>\r\n\t\t\t\t<OverlayWindow windowSize={24} />\r\n\t\t\t</Box> */}\r\n      {/* <CaptureButton onClick={handleClicked}/> */}\r\n      <Box\r\n        style={{\r\n          display: \"block\",\r\n          width: \"100%\",\r\n          position: \"absolute\",\r\n          top: \"35%\",\r\n          zIndex: 200,\r\n          textAlign: \"center\",\r\n          color: \"white\",\r\n        }}\r\n      >\r\n        <OverlayImage image=\"DriverSideFull.png\" />\r\n      </Box>\r\n    </React.Fragment>\r\n  );\r\n  // return <Backdrop open={true}></Backdrop>\r\n};\r\n\r\nexport default License;\r\n","import React from 'react';\r\nimport Backdrop from '@material-ui/core/Backdrop';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Button from '@material-ui/core/Button';\r\nimport OverlayWindow from '../../../OverlayWindow';\r\nimport MediaStreamWithDnD from '../../../MediaStreamWithDnD';\r\nimport OverlayImage from '../../../OverlayImage';\r\nimport RoundedButton from '../../../RoundedButton';\r\nimport { Typography } from '@material-ui/core';\r\nimport PhotoCameraRounded from '@material-ui/icons/PhotoCameraRounded';\r\nimport CaptureIcon from '../../../CaptureIcon';\r\nimport CaptureButton from '../../../CaptureButton';\r\nimport { useTranslation } from \"react-i18next\";\r\nconst License = (props) => {\r\n\tconst { t } = useTranslation();\r\n\tconst handleClicked = (data) => {\r\n\t\tconsole.log('next Clicked', props.nextAction);\r\n\t\tprops.nextAction(data);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<React.Fragment>\r\n\t\t\t<Box\r\n\t\t\t\tp={4}\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tdisplay: 'block',\r\n\t\t\t\t\twidth: '100%',\r\n\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\ttop: '10px',\r\n\t\t\t\t\tzIndex: 200,\r\n\t\t\t\t\ttextAlign: 'center',\r\n\t\t\t\t\tcolor: 'white',\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t <Typography> {t(\"capture\", { side: t(\"passenger side\") })}</Typography>\r\n\t\t\t</Box>\r\n\r\n\t\t\t<MediaStreamWithDnD nextAction={handleClicked} side=\"PASSENGER_SIDE\" toggleWaiting={props.toggleWaiting}/>\r\n\t\t\t{/* <Box style={{ postion: 'absolute', top: 0, left: 0 }}>\r\n\t\t\t\t<OverlayWindow windowSize={24} />\r\n\t\t\t</Box> */}\r\n\t\t\t{/* <CaptureButton onClick={handleClicked}/> */}\r\n\t\t\t<Box\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tdisplay: 'block',\r\n\t\t\t\t\twidth: '100%',\r\n\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\ttop: '35%',\r\n\t\t\t\t\tzIndex: 200,\r\n\t\t\t\t\ttextAlign: 'center',\r\n\t\t\t\t\tcolor: 'white',\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<OverlayImage image=\"PassengerSideFull.png\"/>\r\n\t\t\t</Box>\r\n\t\t</React.Fragment>\r\n\t);\r\n\t// return <Backdrop open={true}></Backdrop>\r\n};\r\n\r\nexport default License;\r\n","import React from 'react';\r\nimport Backdrop from '@material-ui/core/Backdrop';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Button from '@material-ui/core/Button';\r\nimport OverlayWindow from '../../../OverlayWindow';\r\nimport MediaStreamWithDnD from '../../../MediaStreamWithDnD';\r\nimport OverlayImage from '../../../OverlayImage';\r\nimport RoundedButton from '../../../RoundedButton';\r\nimport { Typography } from '@material-ui/core';\r\nimport PhotoCameraRounded from '@material-ui/icons/PhotoCameraRounded';\r\nimport CaptureIcon from '../../../CaptureIcon';\r\nimport CaptureButton from '../../../CaptureButton';\r\nimport { useTranslation } from \"react-i18next\";\r\nconst License = (props) => {\r\n\tconst { t } = useTranslation();\r\n\tconst handleClicked = (data) => {\r\n\t\tconsole.log('next Clicked', props.nextAction);\r\n\t\tprops.nextAction(data);\r\n\t};\r\n\treturn (\r\n\t\t<React.Fragment>\r\n\t\t\t<Box\r\n\t\t\t\tp={4}\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tdisplay: 'block',\r\n\t\t\t\t\twidth: '100%',\r\n\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\ttop: '10px',\r\n\t\t\t\t\tzIndex: 200,\r\n\t\t\t\t\ttextAlign: 'center',\r\n\t\t\t\t\tcolor: 'white',\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t <Typography> {t(\"capture\", { side: t(\"rear\") })}</Typography>\r\n\t\t\t</Box>\r\n\r\n\t\t\t<MediaStreamWithDnD nextAction={handleClicked} side=\"REAR_SIDE\" toggleWaiting={props.toggleWaiting}/>\r\n\t\t\t{/* <Box style={{ postion: 'absolute', top: 0, left: 0 }}>\r\n\t\t\t\t<OverlayWindow windowSize={24} />\r\n\t\t\t</Box> */}\r\n\t\t\t{/* <CaptureButton onClick={handleClicked}/> */}\r\n\t\t\t<Box\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tdisplay: 'block',\r\n\t\t\t\t\twidth: '100%',\r\n\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\ttop: '20%',\r\n\t\t\t\t\tzIndex: 200,\r\n\t\t\t\t\ttextAlign: 'center',\r\n\t\t\t\t\tcolor: 'white',\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<OverlayImage image='RearFull.png' width=\"50%\"/>\r\n\t\t\t</Box>\r\n\t\t</React.Fragment>\r\n\t);\r\n\t// return <Backdrop open={true}></Backdrop>\r\n};\r\n\r\nexport default License;\r\n","import React from \"react\";\r\nimport Backdrop from \"@material-ui/core/Backdrop\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport OverlayWindow from \"../../../OverlayWindow\";\r\nimport MediaStreamWithDnD from \"../../../MediaStreamWithDnD\";\r\nimport OverlayImage from \"../../../OverlayImage\";\r\nimport RoundedButton from \"../../../RoundedButton\";\r\nimport { Typography } from \"@material-ui/core\";\r\nimport PhotoCameraRounded from \"@material-ui/icons/PhotoCameraRounded\";\r\nimport CaptureIcon from \"../../../CaptureIcon\";\r\nimport CaptureButton from \"../../../CaptureButton\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport captureState from \"../../../../states/captureState\";\r\nimport startCase from \"lodash/startCase\";\r\nconst Pre = (props) => {\r\n  const { t } = useTranslation();\r\n  const [showOverlay, setShowOverlay] = React.useState(true);\r\n  const [resetRnd, setResetRnd] = React.useState(true);\r\n  const [mediaCaptureState, setMediaCaptureState] = React.useState('INIT');\r\n  const toggleOverlay = () => {\r\n    setShowOverlay(!showOverlay);\r\n  };\r\n  const handleClicked = (data) => {\r\n    console.log(\"next Clicked\", props.nextAction);\r\n    props.nextAction(data);\r\n  };\r\n\r\n  const reset = () => {\r\n    setResetRnd(false);\r\n  };\r\n  console.log(\"mediaCaptureState\", mediaCaptureState);\r\n  captureState.subscribe((state) => {\r\n    console.log(\"mediaCaptureState\", state, mediaCaptureState);\r\n    setMediaCaptureState(state);\r\n  });\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Box\r\n        p={4}\r\n        style={{\r\n          // display: 'none',\r\n          width: \"100%\",\r\n          position: \"absolute\",\r\n          top: \"10px\",\r\n          zIndex: 200,\r\n          textAlign: \"center\",\r\n          color: \"white\",\r\n        }}\r\n      >\r\n        {mediaCaptureState === \"INIT\" &&<Typography> {t(\"capture\", { side: startCase(t(props.side).toLowerCase()) })}</Typography>}\r\n      </Box>\r\n\r\n      <MediaStreamWithDnD\r\n        nextAction={handleClicked}\r\n        side={props.side}\r\n        toggleWaiting={props.toggleWaiting}\r\n        toggleOverlay={toggleOverlay}\r\n        resetRnd={resetRnd}\r\n        reset={reset}\r\n      />\r\n      {/* <Box style={{ postion: 'absolute', top: 0, left: 0 }}>\r\n\t\t\t\t<OverlayWindow windowSize={24} />\r\n\t\t\t</Box> */}\r\n      {/* <CaptureButton onClick={handleClicked}/> */}\r\n      <Box\r\n        style={{\r\n          // display: 'none',\r\n          width: \"100%\",\r\n          position: \"absolute\",\r\n          top: props.overlayImagePosition || \"20%\",\r\n          zIndex: 200,\r\n          textAlign: \"center\",\r\n          color: \"white\",\r\n        }}\r\n      >\r\n        {mediaCaptureState === \"INIT\" && <OverlayImage image={props.overlayImage} width={props.overlayImageSize || \"50%\"} />}\r\n      </Box>\r\n    </React.Fragment>\r\n  );\r\n  // return <Backdrop open={true}></Backdrop>\r\n};\r\n\r\nexport default Pre;\r\n","import React from \"react\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport OverlayWindow from \"../../../OverlayWindow\";\r\nimport OverlayMessageBox from \"../../../OverlayMessageBox\";\r\nimport RoundedButton from \"../../../RoundedButton\";\r\nimport { DialogTitle, Typography } from \"@material-ui/core\";\r\nimport { Dialog, DialogActions } from \"@material-ui/core\";\r\nimport styled from \"@material-ui/core/styles/styled\";\r\nimport GeneratePresignedUrl$ from \"../../../../APIConfig/GeneratePresignedUrl\";\r\nimport UploadImageToS3$ from \"../../../../APIConfig/UploadImageToS3\";\r\nimport UpdateImageFileMetaDataBarcode$ from \"../../../../APIConfig/UpdateImageFileMetaDataBarcode\";\r\nimport CarDataContext from \"../../../../CarDataContext\";\r\nimport captureState from \"../../../../states/captureState\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport {\r\n  BrowserMultiFormatReader,\r\n  NotFoundException,\r\n  Result,\r\n} from \"@zxing/library\";\r\n\r\nimport { getMD5 } from \"../../../MediaStream/helper\";\r\nimport { useEffect } from \"react\";\r\nimport MediaStreamWithDnD from \"../../../MediaStreamWithDnD\";\r\n// import geoLocation from \"../../../../utils/geoLocation\";\r\nconst Divider = styled(Box)({\r\n  height: \"1px\",\r\n  backgroundColor: \"#EBEBEB\",\r\n});\r\nconst Odometer = (props) => {\r\n  const { t } = useTranslation();\r\n  const [licenseData, setLicenseData] = React.useState([]);\r\n  const [stage, setStage] = React.useState(\"INIT\");\r\n  const codeReader = new BrowserMultiFormatReader();\r\n  const result = React.useRef();\r\n  const video = React.useRef();\r\n  const handleClicked = () => {\r\n    console.log(\"next Clicked\", props.nextAction);\r\n    props.nextAction(licenseData);\r\n  };\r\n  const handleReset = () => {\r\n    console.log(\"RESET\");\r\n    setLicenseData([]);\r\n    codeReader.reset();\r\n  };\r\n\r\n  let carData = React.useContext(CarDataContext);\r\n  if (Object.keys(carData).length === 0 && carData.constructor === Object) {\r\n    carData = {\r\n      login: JSON.parse(sessionStorage.getItem(\"login\")),\r\n      geoLocation: JSON.parse(sessionStorage.getItem(\"geoLocation\")),\r\n    };\r\n  }\r\n  useEffect(() => {\r\n    captureState.subscribe((state) => setStage(state));\r\n  }, []);\r\n  console.log(\"STAGE\", stage);\r\n  return (\r\n    <React.Fragment>\r\n      <Box\r\n        p={2}\r\n        style={{ display: \"block\", width: \"100%\", position: \"absolute\" }}\r\n      ></Box>\r\n      <Box\r\n        p={4}\r\n        style={{\r\n          display: \"block\",\r\n          width: \"100%\",\r\n          position: \"absolute\",\r\n          top: \"10%\",\r\n          zIndex: 200,\r\n          textAlign: \"center\",\r\n          color: \"white\",\r\n        }}\r\n      >\r\n        <Typography>{t(\"Position the Odometer within the box.\")}</Typography>\r\n      </Box>\r\n      <Box>\r\n        <MediaStreamWithDnD\r\n          nextAction={handleClicked}\r\n          side=\"odometer\"\r\n          // toggleWaiting={props.toggleWaiting}\r\n          // toggleOverlay={toggleOverlay}\r\n          // resetRnd={resetRnd}\r\n          // reset={reset}\r\n        />\r\n      </Box>\r\n\r\n      {stage === \"INIT\" && (\r\n        <Box style={{ top: 0, left: 0 }}>\r\n          <OverlayWindow\r\n            windowSize={40}\r\n            windowXScale={8}\r\n            edged={false}\r\n            borderWidth={4}\r\n            borderRadius={4}\r\n            title=\"Odometer\"\r\n          />\r\n        </Box>\r\n      )}\r\n      <Box\r\n        p={4}\r\n        style={{\r\n          display: \"block\",\r\n          width: \"100%\",\r\n          position: \"absolute\",\r\n          top: \"64%\",\r\n          zIndex: 200,\r\n          textAlign: \"center\",\r\n          color: \"white\",\r\n        }}\r\n      >\r\n        {/* <Typography>{t(\"Move Closer to the scan area.\")}</Typography> */}\r\n      </Box>\r\n    </React.Fragment>\r\n  );\r\n  // return <Backdrop open={true}></Backdrop>\r\n};\r\n\r\nexport default Odometer;\r\n","import Axios from '../Axios';\r\nimport { from } from 'rxjs';\r\n\r\nconst FinalAsessmentSubmission$ = (otp, assessmentId, deviceId, assessmentLocation, preferredLocation) => from(Axios.post(`/cardata/external/companies/${otp}/assessments/${assessmentId}/submit`, {\r\n  \"assessment_location\": assessmentLocation,\r\n  \"preferred_location\": preferredLocation\r\n}, { headers: { \"device-id\": deviceId }, 'Content-Type': 'application/json' }));\r\n\r\nexport default FinalAsessmentSubmission$;\r\n","import Typography from \"@material-ui/core/Typography\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport React from \"react\";\r\nimport Card from \"@material-ui/core/Card\";\r\nimport CardContent from \"@material-ui/core/CardContent\";\r\nimport CardHeader from \"@material-ui/core/CardHeader\";\r\nimport CardMedia from \"@material-ui/core/CardMedia\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport styled from \"@material-ui/core/styles/styled\";\r\nimport RoundedButton from \"../../../RoundedButton\";\r\nimport { DialogTitle } from \"@material-ui/core\";\r\nimport { Dialog, DialogActions, DialogContent } from \"@material-ui/core\";\r\nimport CarDataContext from \"../../../../CarDataContext\";\r\nimport { useContext } from \"react\";\r\nimport FinalAsessmentSubmission$ from \"../../../../APIConfig/FinalAsessmentSubmission\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useHistory } from \"react-router-dom\";\r\nconst StyledPaper = styled(Paper)({\r\n  margin: \"16px 8px 16px 8px\",\r\n  borderRadius: \"16px\",\r\n  border: \"solid 1px #DADCE6\",\r\n});\r\n\r\nconst StyledCard = styled(Card)({\r\n  margin: \"8px\",\r\n  // backgroundColor: \"#F0F1F5\",\r\n});\r\nconst Report = (props) => {\r\n  const { t } = useTranslation();\r\n  let carData = useContext(CarDataContext);\r\n  const history = useHistory();\r\n  if (!Object.keys(carData).length) {\r\n    carData = JSON.parse(sessionStorage.getItem(\"carData\"));\r\n  }\r\n\r\n  console.log(\"carData\", carData);\r\n  const [ackOpen, setAckOpen] = React.useState(false);\r\n\r\n  const onSubmit = () => {\r\n    if (props.toggleWaiting) {\r\n      props.toggleWaiting();\r\n    }\r\n    // otp, assessmentId, deviceId, assessmentLocation, preferredLocation\r\n    FinalAsessmentSubmission$(\r\n      9994,\r\n      carData.login.assessment_id,\r\n      \"b04d837c-3539-430e-b9ae-159dcbe1e96b\",\r\n      carData.geoLocation,\r\n      carData.geoLocation\r\n    ).subscribe((response) => setAckOpen(true));\r\n  };\r\n\r\n  const onOK = () => {\r\n    if (props.nextAction) {\r\n      props.nextAction();\r\n    }\r\n  };\r\n  return (\r\n    <Box>\r\n      <Typography variant=\"h4\" className=\"label\">\r\n        {t(\"Assessment Summary\")}\r\n      </Typography>\r\n      <Box alignContent=\"center\" alignItems=\"center\" textAlign=\"center\" mb={2}>\r\n        <Typography variant=\"body2\" component=\"span\" className=\"label\">\r\n          {t(\"Request Date\")} :\r\n        </Typography>\r\n        <Typography variant=\"body1\" className=\"text\" component=\"span\">\r\n          {new Intl.DateTimeFormat(\"en-ZA\").format(new Date())}\r\n        </Typography>\r\n      </Box>\r\n\r\n      <Box my={2}>\r\n      <Grid container spacing={1}>\r\n        <Grid item xs={4}>\r\n          <Box p={2}>\r\n            <Typography variant=\"body2\" className=\"label\">\r\n              {t(\"Make\")}\r\n            </Typography>\r\n            <Typography variant=\"body1\" className=\"text\">\r\n              {carData.license[9]}\r\n            </Typography>\r\n          </Box>\r\n        </Grid>\r\n        <Grid item xs={4}>\r\n          <Box p={2}>\r\n            <Typography variant=\"body2\" className=\"label\">\r\n              {t(\"Model\")}\r\n            </Typography>\r\n            <Typography variant=\"body1\" className=\"text\">\r\n              {carData.license[8]}\r\n            </Typography>\r\n          </Box>\r\n        </Grid>\r\n        <Grid item xs={4}>\r\n          <Box p={2}>\r\n            <Typography variant=\"body2\" className=\"label\">\r\n              {t(\"License Plate\")}\r\n            </Typography>\r\n            <Typography variant=\"body1\" className=\"text\">\r\n              {carData.license[6]}\r\n            </Typography>\r\n          </Box>\r\n        </Grid>\r\n      </Grid>\r\n      <Grid container spacing={1}>\r\n        <Grid item xs={4}>\r\n          <Box p={2}>\r\n            <Typography variant=\"body2\" className=\"label\">\r\n              {t(\"Vin Number\")}\r\n            </Typography>\r\n            <Typography variant=\"body1\" className=\"text\">\r\n              {carData.license[12]}\r\n            </Typography>\r\n          </Box>\r\n        </Grid>\r\n        <Grid item xs={4}></Grid>\r\n      </Grid>\r\n      </Box>\r\n      <Typography variant=\"body1\" className=\"text\">\r\n        {t(\"Tap the images of damaged parts\")}\r\n      </Typography>\r\n      <Grid container spacing={0}>\r\n        <Grid item xs={3}>\r\n          <StyledPaper>\r\n            <CardMedia\r\n              component=\"img\"\r\n              alt=\"Front Side\"\r\n              height=\"100%\"\r\n              image={carData.pre.front.thumbnail}\r\n              title=\"Front Side\"\r\n            />\r\n            <CardContent style={{padding: '4px'}}>\r\n              <Typography variant=\"body1\" className=\"text\">\r\n                Front Side\r\n              </Typography>\r\n            </CardContent>\r\n          </StyledPaper>\r\n        </Grid>\r\n        <Grid item xs={3}>\r\n          <StyledPaper>\r\n            <CardMedia\r\n              component=\"img\"\r\n              alt=\"Passenger Side\"\r\n              height=\"100%\"\r\n              image={carData.pre.passengerside.thumbnail}\r\n              title=\"Passenger Side\"\r\n            />\r\n            <CardContent style={{padding: '4px'}}>\r\n              <Typography variant=\"body1\" className=\"text\">\r\n                Passenger Side\r\n              </Typography>\r\n            </CardContent>\r\n          </StyledPaper>\r\n        </Grid>\r\n        <Grid item xs={3}>\r\n          <StyledPaper>\r\n            <CardMedia\r\n              component=\"img\"\r\n              alt=\"Rear Side\"\r\n              height=\"100%\"\r\n              image={carData.pre.rear.thumbnail}\r\n              title=\"Rear Side\"\r\n            />\r\n            <CardContent style={{padding: '4px'}}>\r\n              <Typography variant=\"body1\" className=\"text\">\r\n                Rear Side\r\n              </Typography>\r\n            </CardContent>\r\n          </StyledPaper>\r\n        </Grid>\r\n        <Grid item xs={3}>\r\n          <StyledPaper>\r\n            <CardMedia\r\n              component=\"img\"\r\n              alt=\"Driver Side\"\r\n              height=\"100%\"\r\n              image={carData.pre.driverside.thumbnail}\r\n              title=\"Driver Side\"\r\n            />\r\n            <CardContent style={{padding: '4px'}}>\r\n              <Typography variant=\"body1\" className=\"text\">\r\n                Driver Side\r\n              </Typography>\r\n            </CardContent>\r\n          </StyledPaper>\r\n        </Grid>\r\n      </Grid>\r\n      {/* </StyledCard> */}\r\n      <Box p={1} m={2} textAlign=\"right\">\r\n        <RoundedButton label=\"Submit\" fullWidth={false} onClick={onSubmit} />\r\n      </Box>\r\n      <Dialog open={ackOpen} size=\"md\">\r\n        <DialogTitle style={{ textAlign: \"center\" }}>Thank you !</DialogTitle>\r\n        <DialogContent>\r\n          <Typography style={{ textAlign: \"center\" }}>\r\n            Your vehicle assessment is now complete!\r\n          </Typography>\r\n          <Typography style={{ textAlign: \"center\" }}>\r\n            We will be in touch with you soon.\r\n          </Typography>\r\n        </DialogContent>\r\n        <DialogActions style={{ justifyContent: \"center\" }}>\r\n          <RoundedButton\r\n            label=\"Ok\"\r\n            onClick={onOK}\r\n            fullWidth={false}\r\n          ></RoundedButton>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default Report;\r\n","export const mockJourney = [\r\n  { type: \"Onboard\", sub: \"login\", contained: true },\r\n  { type: \"Onboard\", sub: \"license\" },\r\n  {\r\n    type: \"Inspection\",\r\n    sub: \"pre\",\r\n    step: \"front\",\r\n    overlayImage: \"FrontFull.png\",\r\n    overlayImageSize: \"50%\",\r\n    side: \"FRONT_SIDE\",\r\n  },\r\n  {\r\n    type: \"Inspection\",\r\n    sub: \"pre\",\r\n    step: \"passengerside\",\r\n    overlayImage: \"PassengerSideFull.png\",\r\n    overlayImageSize: \"60%\",\r\n    overlayImagePosition: \"40%\",\r\n    side: \"PASSENGER_SIDE\",\r\n  },\r\n  {\r\n    type: \"Inspection\",\r\n    sub: \"pre\",\r\n    step: \"rear\",\r\n    overlayImage: \"RearFull.png\",\r\n    overlayImageSize: \"50%\",\r\n    side: \"REAR_SIDE\",\r\n  },\r\n  {\r\n    type: \"Inspection\",\r\n    sub: \"pre\",\r\n    step: \"driverside\",\r\n    overlayImage: \"DriverSideFull.png\",\r\n    overlayImageSize: \"60%\",\r\n    overlayImagePosition: \"40%\",\r\n    side: \"DRIVER_SIDE\",\r\n  },\r\n  {\r\n    type: \"Offboard\",\r\n    sub: \"Odometer\",\r\n    overlayImage: \"DriverSideFull.png\",\r\n    overlayImageSize: \"60%\",\r\n    overlayImagePosition: \"40%\",\r\n    side: \"ODOMETER\",\r\n  },\r\n  { type: \"Summary\", sub: \"report\" },\r\n];\r\n","import { ThemeOptions, createMuiTheme } from '@material-ui/core/styles';\r\n\r\nconst CSAItheme = createMuiTheme({\r\n\ttypography: {\r\n\t\tfontFamily: [\r\n\t\t\t'Roboto',\r\n\t\t\t'\"Helvetica Neue\"',\r\n\t\t\t'Arial',\r\n\t\t\t'sans-serif',\r\n\t\t\t'\"Apple Color Emoji\"',\r\n\t\t\t'\"Segoe UI Emoji\"',\r\n\t\t\t'\"Segoe UI Symbol\"',\r\n\t\t].join(','),\r\n\t},\r\n\tpalette: {\r\n\t\tprimary: {\r\n\t\t\tmain: '#EDA03A',\r\n\t\t},\r\n\t\tsecondary: {\r\n\t\t\tmain: 'rgb(126, 244, 36)',\r\n\t\t},\r\n\t},\r\n\toverrides: {\r\n\t\tMuiButton : {\r\n\t\t\ttextSecondary: {\r\n\t\t\t\tcolor: '#FFF',\r\n\t\t\t},\r\n\t\t},\r\n\t\tMuiCardMedia : {\r\n\t\t\timg : {\r\n\t\t\t\tborderTopLeftRadius : '16px',\r\n\t\t\t\tborderTopRightRadius : '16px'\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n});\r\n\r\nexport default CSAItheme;\r\n","import React, { Component } from \"react\";\r\nimport Alert from \"@material-ui/lab/Alert\"\r\nclass ErrorBoundary extends Component {\r\n    state = {\r\n        error: null,\r\n        errorInfo: null,\r\n    }\r\n\r\n    componentDidCatch(error, errorInfo) {\r\n        this.setState(error, errorInfo);\r\n    }\r\n\r\n    render() {\r\n        const { errorInfo } = this.state;\r\n        if (errorInfo) {\r\n            return <Alert severity=\"error\">Error Rendering the Component</Alert>\r\n        }\r\n        return this.props.children;\r\n    }\r\n}\r\n\r\nexport default ErrorBoundary;","import {Subject} from \"rxjs\";\r\n\r\nconst carDataStore = new Subject();\r\ncarDataStore.next({sub: \"pre\"});\r\n\r\nexport default carDataStore;\r\n","import React from \"react\";\r\n\r\nimport * as JourneyModule from \"../components/Journey\";\r\n\r\nimport { mockJourney } from \"../mockconfig/journey1\";\r\n\r\nimport CSAItheme from \"../Theme\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\n// import MuiThemeProvider from \"@material-ui/core/styles/MuiThemeProvider\";\r\nimport { ThemeProvider as MuiThemeProvider } from \"@material-ui/core/styles\";\r\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport findIndex from \"lodash/findIndex\";\r\nimport startCase from \"lodash/startCase\";\r\n// import { useRouter } from 'next/router';\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\n// import useFullscreen from '../utils/useFullScreen';\r\nimport CarDataContext from \"../CarDataContext\";\r\nimport ErrorBoundary from \"../components/ErrorBoundary\";\r\nimport geoLocation from \"../utils/geoLocation\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport Backdrop from \"@material-ui/core/Backdrop\";\r\nimport captureState from \"../states/captureState\";\r\nimport carDataStore from \"../states/carDataStore\";\r\nimport { useEffect } from \"react\";\r\nconst useStyles = makeStyles((theme) => ({\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    color: \"#EDA03A\",\r\n  },\r\n}));\r\n\r\nconst getCurrentAndNext = (type, sub, step) => {\r\n  // findIndex(mockJourney, (mj:StepData) => mj.type === type && mj.step == step);\r\n  // debugger;\r\n  const currentIndex = findIndex(mockJourney, (mj) => {\r\n    if (mj.step) {\r\n      return (\r\n        mj.type.toLowerCase() === type.toLowerCase() &&\r\n        mj.sub.toLowerCase() === sub.toLowerCase() &&\r\n        mj.step.toLowerCase() === step.toLowerCase()\r\n      );\r\n    } else {\r\n      return (\r\n        mj.type.toLowerCase() === type.toLowerCase() &&\r\n        mj.sub.toLowerCase() === sub.toLowerCase()\r\n      );\r\n    }\r\n  });\r\n  const prevIndex = currentIndex - 1;\r\n  const nextIndex = currentIndex === mockJourney.length - 1 ? 0 : currentIndex + 1;\r\n  return { prevIndex, currentIndex, nextIndex };\r\n};\r\n\r\nconst Journey = () => {\r\n  console.log(\"JOURNEYSTART\");\r\n  const container = React.useRef();\r\n  const classes = useStyles();\r\n  const [carData, setCarData] = React.useState({});\r\n  let { type, sub, step } = useParams();\r\n\r\n  const [waiting, setWaiting] = React.useState(false);\r\n  const [mediaCaptureState, setMediaCaptureState] = React.useState(null);\r\n  captureState.subscribe((state) => {\r\n    console.log(\"mediaCaptureState\", state, mediaCaptureState);\r\n    setMediaCaptureState(state);\r\n  });\r\n  if (!type && !sub) {\r\n    type = mockJourney[0].type;\r\n    sub = mockJourney[0].sub;\r\n    step = mockJourney[0].step;\r\n  }\r\n  console.log(\"ACTIONS\", type, sub, step);\r\n  const { currentIndex, nextIndex } = getCurrentAndNext(type, sub, step);\r\n  // For the root route i.e \"/\" load the first type and step\r\n  useEffect(() => {\r\n    carDataStore.subscribe(data => setCarData(data));\r\n  },[])\r\n  // Method called when the next action is to be laoded\r\n  const nextAction = (data) => {\r\n    captureState.next(\"INIT\");\r\n\r\n    let href = `/journey/${mockJourney[nextIndex].type}/${mockJourney[nextIndex].sub}`;\r\n    if (mockJourney[nextIndex].step) {\r\n      href += `/${mockJourney[nextIndex].step}`;\r\n    }\r\n    let storeKey = sub.toLowerCase();\r\n    if (data) {\r\n      let newCarData = { ...carData };\r\n      if(!newCarData[sub]) {\r\n        newCarData[sub] = {};\r\n      }\r\n      if (step) {\r\n        newCarData[sub][step] = data;\r\n      } else {\r\n        newCarData[sub] = data;\r\n      }\r\n      console.log(\"newSubData\", newCarData)\r\n      setCarData(newCarData);\r\n      sessionStorage.setItem(\"carData\", JSON.stringify(newCarData));\r\n    }\r\n\r\n    console.log(\"nextAction\", mockJourney[nextIndex].type.toLowerCase());\r\n    // if (mockJourney[nextIndex].type.toLowerCase() === 'inspection') {\r\n    // \tsetIsFullscreen();\r\n    // } else {\r\n    // \texitFullscreen();\r\n    // }\r\n    setWaiting(false);\r\n    history.push(href);\r\n  };\r\n\r\n  const toggleWaiting = () => {\r\n    setWaiting(true);\r\n  };\r\n\r\n  // Get the Component to be rendered currently\r\n  const getComposed = ({ type, sub, step }) => {\r\n    let Component = [];\r\n    console.log(\"Module\", startCase(type), startCase(sub).split(\" \").join(\"\"));\r\n    if (type) {\r\n      const newComponent = React.createElement(\r\n        JourneyModule[startCase(type)][startCase(sub)].default,\r\n        {\r\n          nextAction,\r\n          toggleWaiting,\r\n          mediaCaptureState,\r\n          ...mockJourney[currentIndex],\r\n        }\r\n      );\r\n      Component.push(newComponent);\r\n    }\r\n    return Component;\r\n  };\r\n\r\n  // try {\r\n  // \t[isFullscreen, setIsFullscreen, exitFullscreen] = useFullscreen(container);\r\n  // } catch (e) {\r\n  // \tconsole.log('Fullscreen not supported');\r\n  // \tisFullscreen = false;\r\n  // \tsetIsFullscreen = undefined;\r\n  // }\r\n  const history = useHistory();\r\n  const Loader = () => (\r\n    <Box>\r\n      <Backdrop className={classes.backdrop} open={waiting}>\r\n        <CircularProgress color=\"inherit\" thickness={4} size={60} />\r\n        <img\r\n          src=\"/carScan_icon.png\"\r\n          width=\"40px\"\r\n          style={{ marginLeft: \"-50px\" }}\r\n          alt=\"CarScan\"\r\n        />\r\n      </Backdrop>\r\n    </Box>\r\n  );\r\n\r\n  if (mockJourney[currentIndex].step === \"license\") {\r\n    if (!carData.geoLocation) {\r\n      geoLocation().then((geoData) => {\r\n        setCarData({ ...carData, geoLocation: geoData });\r\n        sessionStorage.setItem(\"geoLocation\", JSON.stringify(geoData));\r\n      });\r\n    }\r\n  }\r\n  const currentAction = mockJourney[currentIndex];\r\n  if (type && sub) {\r\n    return (\r\n      <React.Fragment>\r\n        <CssBaseline />\r\n        <MuiThemeProvider theme={CSAItheme}>\r\n          <CarDataContext.Provider value={carData}>\r\n            {currentAction.container ? (\r\n              <Container>\r\n                <ErrorBoundary>\r\n                  {Loader()}\r\n                  {type && sub && getComposed({ type, sub, step })}\r\n                </ErrorBoundary>\r\n              </Container>\r\n            ) : (\r\n              type &&\r\n              sub && (\r\n                <ErrorBoundary>\r\n                  {Loader()}\r\n                  <Box ref={container}>\r\n                    {getComposed({\r\n                      type,\r\n                      sub,\r\n                      step,\r\n                    })}\r\n                  </Box>\r\n                </ErrorBoundary>\r\n              )\r\n            )}\r\n          </CarDataContext.Provider>\r\n        </MuiThemeProvider>\r\n      </React.Fragment>\r\n    );\r\n  } else {\r\n    return <LinearProgress />;\r\n  }\r\n};\r\n\r\nexport default Journey;\r\n","export default function geoLocation() {\r\n  return new Promise((resolve, reject) => {\r\n    function success(position) {\r\n      const latitude = position.coords.latitude;\r\n      const longitude = position.coords.longitude;\r\n\r\n      resolve({\r\n        lat: latitude,\r\n        long: longitude,\r\n      });\r\n    }\r\n\r\n    function error() {\r\n      console.error(\"Unable to retrieve your location\");\r\n    }\r\n    if (!navigator.geolocation) {\r\n      console.info(\"Geolocation is not supported by your browser\");\r\n    } else {\r\n      navigator.geolocation.getCurrentPosition(success, error);\r\n    }\r\n  });\r\n}\r\n"],"sourceRoot":""}