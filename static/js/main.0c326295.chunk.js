(this["webpackJsonpchetandr.github.io.src"]=this["webpackJsonpchetandr.github.io.src"]||[]).push([[0],{60:function(e,t,r){},61:function(e,t,r){},77:function(e,t,r){"use strict";r.r(t);r(60),r(61);var n=r(5),a=r(97),c=r(20),s=r.n(c),i=r(28),o=r(34),l=r(44),u=r(15),d=r(0),h=r.n(d),p=function(e,t){switch("".concat(e,"x").concat(t)){case"4032x3024":return"DCI 4K (iCAM 12MP)";case"3840x2160":return"4K (iCAM 12MP)";case"4096x2160":return"DCI 4K";case"3840x2160":return"4K";case"2048x1152":return"2K";case"1920x1080":return"Full HD";case"1280x720":return"HD";case"640x480":return"SD";default:switch(e){case 4032:return"DCI 4K";case 3840:return"4K";case 2048:return"2K";case 1920:return"Full HD";case 1280:case 640:return"HD";default:return"Non SD"}}};function f(){return x.apply(this,arguments)}function x(){return(x=Object(i.a)(s.a.mark((function e(){var t,r,n,a,c,i,o,l,u,d,h,p,f,x,b,g,j;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,e.prev=1,e.prev=2,e.next=5,navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:{exact:"environment"}}});case 5:t=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:{exact:"user"}}});case 12:t=e.sent;case 13:return e.next=15,t.getVideoTracks();case 15:if(r=e.sent,n=r[0],r[0].getCapabilities(),n.getSettings(),a="",!(navigator.platform.indexOf("Mac")>-1)){e.next=78;break}return e.prev=21,a="DCI 4K",c={width:{ideal:4032},height:{ideal:3024}},e.next=26,n.applyConstraints(c);case 26:e.next=76;break;case 28:return e.prev=28,e.t1=e.catch(21),e.prev=30,a="DCI 4K",i={width:{ideal:3840},height:{ideal:2160}},e.next=35,n.applyConstraints(i);case 35:e.next=76;break;case 37:return e.prev=37,e.t2=e.catch(30),e.prev=39,a="DCI 4K",o={width:{ideal:3840},height:{ideal:2160}},e.next=44,n.applyConstraints(o);case 44:e.next=76;break;case 46:return e.prev=46,e.t3=e.catch(39),e.prev=48,a="Full HD",l={width:{ideal:1920},height:{ideal:1080}},e.next=53,n.applyConstraints(l);case 53:e.next=76;break;case 55:return e.prev=55,e.t4=e.catch(48),e.prev=57,a="HD",u={width:{ideal:1280},height:{ideal:720}},e.next=62,n.applyConstraints(u);case 62:e.next=76;break;case 64:return e.prev=64,e.t5=e.catch(57),e.prev=66,a="SD",d={width:{ideal:640},height:{ideal:480}},e.next=71,n.applyConstraints(d);case 71:e.next=76;break;case 73:e.prev=73,e.t6=e.catch(66),alert(e.t6);case 76:e.next=133;break;case 78:return e.prev=78,a="DCI 4K",h={width:{ideal:4096},height:{ideal:2160}},e.next=83,n.applyConstraints(h);case 83:e.next=133;break;case 85:return e.prev=85,e.t7=e.catch(78),e.prev=87,a="UHD",p={width:{ideal:3840},height:{ideal:2160}},e.next=92,n.applyConstraints(p);case 92:e.next=133;break;case 94:return e.prev=94,e.t8=e.catch(87),e.prev=96,a="2K",f={width:{ideal:2048},height:{ideal:1152}},e.next=101,n.applyConstraints(f);case 101:e.next=133;break;case 103:return e.prev=103,e.t9=e.catch(96),e.prev=105,a="Full HD",x={width:{ideal:1920},height:{ideal:1080}},e.next=110,n.applyConstraints(x);case 110:e.next=133;break;case 112:return e.prev=112,e.t10=e.catch(105),e.prev=114,a="HD",b={width:{ideal:1280},height:{ideal:720}},e.next=119,n.applyConstraints(b);case 119:e.next=133;break;case 121:return e.prev=121,e.t11=e.catch(114),e.prev=123,a="SD",g={width:{ideal:640},height:{ideal:480}},e.next=128,n.applyConstraints(g);case 128:e.next=133;break;case 130:e.prev=130,e.t12=e.catch(123),alert(e.t12);case 133:return(j=n.getSettings()).reso=a,e.abrupt("return",{stream:t,settings:j,reso:a});case 138:e.prev=138,e.t13=e.catch(1),console.error(e.t13);case 141:case"end":return e.stop()}}),e,null,[[1,138],[2,8],[21,28],[30,37],[39,46],[48,55],[57,64],[66,73],[78,85],[87,94],[96,103],[105,112],[114,121],[123,130]])})))).apply(this,arguments)}var b=r(8),g=r(98),j=r(99),y=r(55),v=r.n(y),O=r(3),m=r(100),w=r(54),C=r.n(w),k=r(57),D="boundry",S=function(){var e=h.a.useRef(),t=h.a.useRef(),r=(h.a.useRef(),h.a.useRef()),n=h.a.useRef(),a=h.a.useRef(),c=h.a.useRef(),x=h.a.useState(),y=Object(u.a)(x,2),w=y[0],S=y[1],M=h.a.useRef(),I=h.a.useState({}),R=Object(u.a)(I,2),T=R[0],K=R[1],B=h.a.useState({}),F=Object(u.a)(B,2),H=(F[0],F[1]),L=h.a.useState(!1),N=Object(u.a)(L,2),A=(N[0],N[1]),U=h.a.useState(),W=Object(u.a)(U,2),E=W[0],P=W[1],X=h.a.useState("INIT"),G=Object(u.a)(X,2),z=G[0],J=G[1],V=Object(b.a)().getMonitor(),Y=h.a.useRef(),q=h.a.useState({x:0,y:0}),Q=Object(u.a)(q,2),Z=Q[0],$=Q[1],_=h.a.useState({x:0,y:0}),ee=Object(u.a)(_,2),te=ee[0],re=ee[1],ne=Object(g.a)((function(){return{type:D,collect:function(e){return{isDragging:!!e.isDragging()}}}})),ae=Object(u.a)(ne,2),ce=ae[0].isDragging,se=ae[1],ie=Object(j.a)((function(){return{accept:D,drop:function(){return ue(w,Z,te)},collect:function(e){return{isOver:!!e.isOver()}}}}),[Z,te,w]),oe=Object(u.a)(ie,2),le=(oe[0].isOver,oe[1]),ue=function(e,t,r){var n=t.x-r.x,a=t.y-r.y;console.log(e,t,r);var c=e.current.getClientRects(),s=n+c[0].width,i=a+c[0].height;e.current.style.left="".concat(n,"px"),e.current.style.top="".concat(a,"px");var u=Object(l.a)(Object(l.a)({},E),{},Object(o.a)({},e.current.id,[{x:n,y:a},{x:s,y:i}]));P(u)},de=function(){var e=Object(k.a)(),t=e.display,r=(e.itemType,e.item,e.style);return t?Object(O.jsx)("div",{className:"boundingBoxWrapper",style:r,children:Object(O.jsx)("div",{className:"boundingBox"})}):null},he=h.a.useCallback(Object(i.a)(s.a.mark((function n(){var a,i,o,l,u,d,h,x,b,g;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f();case 2:a=n.sent,e.current&&("srcObject"in e.current?e.current.srcObject=a.stream:e.src=window.URL.createObjectURL(a.stream),K(a.settings),i=a.settings.width,o=a.settings.height,l=t.current.offsetWidth,u=Math.floor(l*o/i),a.settings.aspectRatio,d=u/o,h=l/i,x=0,b=0,i>l?(x=-Math.ceil(100*h),b=-Math.ceil(100*d)):(x=-Math.ceil(i/l*100),b=-Math.ceil(o/u*100)),e.current.width=i,e.current.height=o,r.current.width=i,r.current.height=o,e.current.style.transform="translate(".concat(-e.current.offsetLeft,"px, ").concat(-e.current.offsetTop,"px) scale(").concat(h,", ").concat(d,")"),e.current.style.transformOrigin="top left",c.current.width=i,c.current.height=o,c.current.style.width="".concat(l,"px"),c.current.style.height="".concat(u,"px"),g={video:"".concat(i," x ").concat(o," (").concat(p(i,o),")"),scale:"".concat(h," x ").concat(d),media:"".concat(a.settings.width," x ").concat(a.settings.height),target:"".concat(l," x ").concat(u),targetXY:"".concat(x," x ").concat(b)},H(g));case 4:case"end":return n.stop()}}),n)}))),[e,t,a,c]);window.addEventListener("orientationchange",(function(e){he()})),Object(d.useEffect)(Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:he();case 1:case"end":return e.stop()}}),e)}))),[e,t,a,c]);return h.a.useEffect((function(){V.subscribeToOffsetChange((function(){var e=V.getClientOffset(),t=V.getInitialClientOffset(),r=V.getInitialSourceClientOffset();t&&r&&(re({x:t.x-r.x,y:t.y-r.y}),$(e))}))}),[V]),console.log("DRAGGING",ce),Object(O.jsxs)("div",{ref:le,children:[!1,Object(O.jsxs)("div",{ref:t,className:"videoWrapper",children:[Object(O.jsx)("video",{ref:e,id:"camvideo",autoPlay:!0,playsInline:!0}),Object(O.jsx)("img",{ref:r,style:{border:"solid 2px red",display:"none"}}),Object(O.jsx)("img",{ref:Y,style:{border:"solid 2px red",display:"none"}})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("canvas",{ref:a,style:{border:"solid 2px red",display:"none"}}),Object(O.jsx)("canvas",{ref:c,style:{border:"solid 2px red",display:"none"}})]}),Object(O.jsx)("a",{id:"downloadAnchor",href:"http://chetandr.github.com",ref:M,style:{display:"none"},children:"image"}),"BBOX"===z&&Object(O.jsx)("div",{className:"boundingBoxWrapper",id:"bbox",ref:n,onTouchStart:function(){return S(n)},onMouseDown:function(){return S(n)},style:{opacity:ce?0:1},children:Object(O.jsx)("div",{className:"boundingBox",ref:se,style:{cursor:"move",display:"inline-block"}})}),Object(O.jsxs)("div",{id:"changeVideo",children:["INIT"===z&&Object(O.jsx)(m.a,{color:"primary","aria-label":"upload picture",component:"span",variant:"contained",onClick:function(){var n=T.width,a=T.height,s=t.current.offsetWidth,i=Math.floor(s*a/n)/a,o=s/n,l=c.current.getContext("2d");A(!0),e.current.pause(),l.drawImage(e.current,0,0);var u=c.current.toDataURL("image/png");r.current.src=u,e.current.style.display="none",r.current.style.display="block",r.current.style.transform="translate(".concat(-e.current.offsetLeft,"px, ").concat(-e.current.offsetTop,"px) scale(").concat(o,", ").concat(i,")"),r.current.style.transformOrigin="top left",e.current.style.display="none",r.current.style.display="block",setTimeout((function(){return A(!1)}),3e3),J("BBOX")},children:Object(O.jsx)(C.a,{style:{fontSize:64}})}),"BBOX"===z&&Object(O.jsx)(m.a,{color:"primary","aria-label":"upload picture",component:"span",variant:"contained",onClick:function(){var a=T.width,s=T.height,i=t.current.offsetWidth,o=Math.floor(i*s/a)/s,l=i/a,u=c.current.getContext("2d");u.lineWidth="2",u.globalAlpha=.2,u.fillStyle="#FFD600",u.fillRect(n.current.offsetLeft/l,n.current.offsetTop/o,n.current.offsetWidth/l,n.current.offsetHeight/o),u.globalAlpha=.2,u.strokeStyle="#ff7300",u.stroke(),A(!0);var d=c.current.toDataURL("image/png");Y.current.src=d,e.current.style.display="none",Y.current.style.display="block",r.current.style.display="none",Y.current.style.transformOrigin="top left",e.current.style.display="none",Y.current.style.display="block",setTimeout((function(){return A(!1)}),3e3),J("CAPTURED")},children:Object(O.jsx)(v.a,{style:{fontSize:64}})})]}),Object(O.jsx)("a",{id:"downloadAnchor",href:"http://chetandr.github.com",ref:M,style:{display:"none"},children:"image"}),Object(O.jsx)(de,{})]})},M=r(43),I=r(56);var R=function(){return Object(O.jsx)(M.a,{children:Object(O.jsx)(n.c,{children:Object(O.jsx)(n.a,{exact:!0,path:"/",children:Object(O.jsx)("div",{children:Object(O.jsx)("header",{children:Object(O.jsx)(a.a,{backend:I.a,options:{enableMouseEvents:!0},children:Object(O.jsx)(S,{})})})})})})})},T=r(23),K=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,101)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),n(e),a(e),c(e),s(e)}))};r.n(T).a.render(Object(O.jsx)(h.a.StrictMode,{children:Object(O.jsx)(R,{})}),document.getElementById("root")),K()}},[[77,1,2]]]);
//# sourceMappingURL=main.0c326295.chunk.js.map