(this["webpackJsonpchetandr.github.io.src"]=this["webpackJsonpchetandr.github.io.src"]||[]).push([[4],{496:function(e,t){},498:function(e,t){},509:function(e,t){},511:function(e,t){},538:function(e,t){},540:function(e,t){},541:function(e,t){},546:function(e,t){},548:function(e,t){},567:function(e,t){},579:function(e,t){},582:function(e,t){},761:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"default",(function(){return G}));var r={};n.r(r),n.d(r,"default",(function(){return ve}));var c={};n.r(c),n.d(c,"Login",(function(){return a})),n.d(c,"License",(function(){return r}));var i={};n.r(i),n.d(i,"default",(function(){return Ve}));var o={};n.r(o),n.d(o,"default",(function(){return Ge}));var s={};n.r(s),n.d(s,"default",(function(){return qe}));var l={};n.r(l),n.d(l,"default",(function(){return Ze}));var d={};n.r(d),n.d(d,"default",(function(){return et}));var u={};n.r(u),n.d(u,"Front",(function(){return i})),n.d(u,"Driverside",(function(){return o})),n.d(u,"Passengerside",(function(){return s})),n.d(u,"Rear",(function(){return l})),n.d(u,"Pre",(function(){return d}));var b={};n.r(b),n.d(b,"default",(function(){return tt}));var j={};n.r(j),n.d(j,"Odometer",(function(){return b}));var g={};n.r(g),n.d(g,"default",(function(){return lt}));var x={};n.r(x),n.d(x,"Report",(function(){return g}));var h={};n.r(h),n.d(h,"Onboard",(function(){return c})),n.d(h,"Inspection",(function(){return u})),n.d(h,"Offboard",(function(){return j})),n.d(h,"Summary",(function(){return x}));var p=n(324),O=n(152),f=n(1),m=n.n(f),v=n(106),y=n(747),w=n(741),C=n(744),I=n(745),S=n(746),A=n(763),R=n(3),k=function(e){return Object(R.jsx)(v.a,{p:4,children:Object(R.jsx)("img",{src:e.imageURL,alt:e.alt,style:{marginLeft:"auto",marginRight:"auto",display:"block",width:"80vw"}})})};k.defaultProps={imageURL:"/logos/carScan_logo.png",alt:"Carscan"};var D=k,E=n(734),N=n(737),W=n(739),T=function(){return Object(R.jsx)("img",{src:"/images/car.png",style:{width:"95vw"}})},_=n(769),L=n(442),F=n(443),P=n.n(F);P.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded";var z=P.a.create({baseURL:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_CARDATA_API||"https://cardata.devinternal.carscan.ai\u200b\u200b",timeout:6e4}),U=n(764),M=function(e){return Object(U.a)(z.get("/cardata/companies/".concat(e,"/settings")))},H=function(e,t){return Object(U.a)(z.post("/cardata/companies/".concat(e,"/assessments"),{captcha_id:"60cb91e6a1673b6e53f595fa",captcha_token:"cu2wy",device_id:"b04d837c-3539-430e-b9ae-159dcbe1e96b",field_one:t||"9876567654",notification_reg_id:"123456789"}))},B=function(e,t,n){return Object(U.a)(z.patch("/cardata/external/companies/".concat(e,"/assessments/").concat(t),{assessment_type:"PRE_INSPECTION"},{headers:{"device-id":n},"Content-Type":"application/json"}))},X=n(767),K=n(771),Y=n(733),J=Object(Y.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:e.palette.primary.main}}})),V=function(e){var t=Object(K.a)().t,n=(J(),m.a.useState(!1)),a=Object(O.a)(n,2),r=a[0],c=a[1],i=m.a.useState(null),o=Object(O.a)(i,2),s=o[0],l=o[1],d=m.a.useState(null),u=Object(O.a)(d,2),b=u[0],j=u[1],g=m.a.useState([]),x=Object(O.a)(g,2),h=x[0],p=x[1],k=m.a.useRef(),F=m.a.useState(!1),P=Object(O.a)(F,2),z=(P[0],P[1],m.a.useState(!1)),U=Object(O.a)(z,2),Y=U[0],V=U[1];Object(f.useEffect)((function(){try{M(9994).subscribe((function(e){return l(e.data)}))}catch(e){console.log(e)}}),[]);return console.log(null===s||void 0===s?void 0:s.logo_thumbnail_file_path),Object(R.jsxs)(m.a.Fragment,{children:[null!==s&&Object(R.jsx)(D,{imageURL:null===s||void 0===s?void 0:s.logo_thumbnail_file_path}),Object(R.jsx)(v.a,{pt:2,px:4,children:Object(R.jsx)(E.a,{style:{textAlign:"center"},children:t("welcome",{company_name:null!==s?s.company_name:"our Shop"})})}),Object(R.jsx)(v.a,{pt:2,px:4,children:Object(R.jsx)(A.a,{id:"standard-full-width",placeholder:t("Enter Your Contact Number"),fullWidth:!0,margin:"normal",variant:"outlined",onChange:function(e){return j(e.target.value)},InputProps:{style:{borderRadius:"28px"}}})}),Object(R.jsx)(v.a,{pt:4,pl:4,children:Object(R.jsx)(W.a,{children:Object(R.jsxs)(N.a,{children:[Object(R.jsx)(_.a,{color:"primary",checked:r,onChange:function(){c(!r)},name:"Agreed",style:{float:"left"}}),Object(R.jsxs)(E.a,{variant:"caption",children:[t("I have read, understood and agreed with your")," ",Object(R.jsxs)(E.a,{color:"primary",variant:"caption",style:{cursor:"pointer",display:"inline-block"},onClick:function(){return V(!0)},children:[" ",t("Terms and Conditions")]})]})]})})}),Object(R.jsx)(v.a,{p:2,children:Object(R.jsx)(T,{})}),Object(R.jsx)(v.a,{pt:4,px:4,children:Object(R.jsx)(L.a,{text:t("Swipe to Login"),color:"#EDA03A",onSuccess:function(){var n=[];null===b&&n.push(t("Enter the Contact number")),r||n.push(t("Agree to the terms and coditions by selecting the checkbox below")),n.length?(p(n),k.current.reset()):(e.toggleWaiting&&e.toggleWaiting(),H(9994,b).subscribe((function(t){return B(9994,t.data.assessment_id,"b04d837c-3539-430e-b9ae-159dcbe1e96b").subscribe((function(){e.toggleWaiting&&e.toggleWaiting(),e.nextAction(t.data)}))})))},ref:k})}),null!==s&&Object(R.jsxs)(w.a,{open:Y,fullScreen:!0,fullWidth:!0,children:[Object(R.jsx)(C.a,{children:t("Terms and Conditions")}),Object(R.jsx)(I.a,{style:{overflow:"hidden",padding:0,paddingLeft:16},children:Object(R.jsx)("iframe",{src:s.terms_and_conditions_url,style:{width:"100%",height:"100%",border:"none"}})}),Object(R.jsx)(S.a,{children:Object(R.jsx)(y.a,{variant:"contained",color:"primary",onClick:function(){return V(!1)},children:t("Close")})})]}),0!==h.length&&Object(R.jsxs)(w.a,{open:h.length,maxWidth:"lg",style:{width:"80vw",height:"60vw"},children:[Object(R.jsx)(C.a,{children:"Error!!"}),Object(R.jsx)(I.a,{style:{overflow:"hidden"},children:h.map((function(e){return Object(R.jsx)(v.a,{p:1,children:Object(R.jsx)(X.a,{severity:"error",children:e})})}))}),Object(R.jsx)(S.a,{children:Object(R.jsx)(y.a,{variant:"contained",color:"primary",onClick:function(){return p([])},children:"Ok"})})]})]})};V.defaultProps={nextAction:function(){},prevAction:function(){}};var G=V,q=n(251),Z=n.n(q),Q=n(252),$=n(748),ee=function(e){return Object(R.jsx)(m.a.Fragment,{children:Object(R.jsxs)($.a,{container:!0,style:{height:"100vh"},children:[Object(R.jsx)($.a,{item:!0,xs:12,className:"translucent",style:{height:"".concat((100-e.windowSize)/2,"%")}}),Object(R.jsx)($.a,{item:!0,xs:12,style:{height:"".concat(e.windowSize,"%")},children:Object(R.jsxs)($.a,{container:!0,style:{height:"100%"},children:[Object(R.jsx)($.a,{item:!0,xs:(12-e.windowXScale)/2,className:"translucent"}),Object(R.jsxs)($.a,{item:!0,xs:e.windowXScale,className:"window",style:{borderColor:e.borderColor,borderWidth:e.borderWidth,borderRadius:e.borderRadius},children:[e.title&&Object(R.jsx)(E.a,{style:{textAlign:"center",color:"rgb(126, 244, 36)",fontWeight:700,marginTop:"-24px"},children:e.title}),e.edged&&Object(R.jsx)("div",{className:"windowCorner topLeftWindowCorner",style:{borderColor:e.borderColor}}),e.edged&&Object(R.jsx)("div",{className:"windowCorner topRightWindowCorner",style:{borderColor:e.borderColor}}),e.edged&&Object(R.jsx)("div",{className:"windowCorner bottomLeftWindowCorner",style:{borderColor:e.borderColor}}),e.edged&&Object(R.jsx)("div",{className:"windowCorner bottomRightWindowCorner",style:{borderColor:e.borderColor}})]}),Object(R.jsx)($.a,{item:!0,xs:(12-e.windowXScale)/2,className:"translucent"})]})}),Object(R.jsx)($.a,{item:!0,xs:12,className:"translucent",style:{height:"".concat((100-e.windowSize)/2,"%")}})]})})};ee.defaultProps={windowSize:15,borderColor:"#7EF424",borderWidth:2,borderRadius:"0px",windowXScale:10,edged:!0};var te=ee,ne=n(208),ae=n.n(ne),re=ae()(v.a)({position:"relative",width:"100%",textAlign:"center",color:"#fff",zIndex:2002,backgroundColor:"#000",maxSize:"640px",borderRadius:"8px"}),ce=function(e){return Object(R.jsx)(y.a,{variant:e.variant,color:e.color,fullWidth:e.fullWidth,size:e.size,style:{borderRadius:"28px",height:"0.05%",textTransform:"none",paddingLeft:"16px",paddingRight:"16px"},onClick:function(){e.onClick()},children:e.label})};ce.defaultProps={label:"",color:"primary",onClick:function(){},fullWidth:!0,size:"medium",variant:"contained"};var ie=ce,oe=function(e,t,n,a,r){return Object(U.a)(z.post("/cardata/external/companies/".concat(e,"/assessments/").concat(t,"/files"),{fileExtension:a,md5s:r},{headers:{"device-id":n},"Content-Type":"application/json"}))},se=function(e,t,n,a,r){return console.log("IMGMD5 UPLOAD",t),Object(U.a)(z.request({method:"PUT",url:e,data:t,headers:{"Content-MD5":n,"Content-Type":a}}))},le=function(e,t,n,a,r,c,i,o){return Object(U.a)(z.put("/cardata/external/companies/".concat(e,"/assessments/").concat(t,"/files/").concat(a),{gps:r,original_image_resolution:c,tags:i,upload_done:o},{headers:{"device-id":n},"Content-Type":"application/json"}))},de=m.a.createContext([]),ue=n(341),be=n(491),je=n.n(be),ge=(n(585),n(586),n(587)),xe=n.n(ge),he=function(e,t){switch("".concat(e,"x").concat(t)){case"4032x3024":return"DCI 4K (iCAM 12MP)";case"3840x2160":return"4K (iCAM 12MP)";case"4096x2160":return"DCI 4K";case"3840x2160":return"4K";case"2048x1152":return"2K";case"1920x1080":return"Full HD";case"1280x720":return"HD";case"640x480":return"SD";default:switch(e){case 4032:return"DCI 4K";case 3840:return"4K";case 2048:return"2K";case 1920:return"Full HD";case 1280:case 640:return"HD";default:return"Non SD"}}};function pe(){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(Q.a)(Z.a.mark((function e(){var t,n,a,r,c,i,o,s,l,d,u,b,j,g,x,h,p,O;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,n=navigator.mediaDevices.getSupportedConstraints(),console.log("Supported Constraints",n),e.prev=3,e.prev=4,e.next=7,navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:{exact:"environment"}}});case 7:t=e.sent,e.next=23;break;case 10:return e.prev=10,e.t0=e.catch(4),e.prev=12,e.next=15,navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:{exact:"user"}}});case 15:t=e.sent,e.next=23;break;case 18:return e.prev=18,e.t1=e.catch(12),e.next=22,navigator.mediaDevices.getUserMedia({audio:!1,video:!0});case 22:t=e.sent;case 23:return e.next=25,t.getVideoTracks();case 25:if(a=e.sent,r=a[0],"getCapabilities"in a[0]&&a[0].getCapabilities(),r.getSettings(),c="",!(navigator.platform.indexOf("Mac")>-1)){e.next=88;break}return e.prev=31,c="DCI 4K",i={width:{ideal:4032},height:{ideal:3024}},e.next=36,r.applyConstraints(i);case 36:e.next=86;break;case 38:return e.prev=38,e.t2=e.catch(31),e.prev=40,c="DCI 4K",o={width:{ideal:3840},height:{ideal:2160}},e.next=45,r.applyConstraints(o);case 45:e.next=86;break;case 47:return e.prev=47,e.t3=e.catch(40),e.prev=49,c="DCI 4K",s={width:{ideal:3840},height:{ideal:2160}},e.next=54,r.applyConstraints(s);case 54:e.next=86;break;case 56:return e.prev=56,e.t4=e.catch(49),e.prev=58,c="Full HD",l={width:{ideal:1920},height:{ideal:1080}},e.next=63,r.applyConstraints(l);case 63:e.next=86;break;case 65:return e.prev=65,e.t5=e.catch(58),e.prev=67,c="HD",d={width:{ideal:1280},height:{ideal:720}},e.next=72,r.applyConstraints(d);case 72:e.next=86;break;case 74:return e.prev=74,e.t6=e.catch(67),e.prev=76,c="SD",u={width:{ideal:640},height:{ideal:480}},e.next=81,r.applyConstraints(u);case 81:e.next=86;break;case 83:e.prev=83,e.t7=e.catch(76),alert(e.t7);case 86:e.next=149;break;case 88:return e.prev=88,c="DCI 4K",b={width:{ideal:4096},height:{ideal:2160}},console.log("DCI 4k",b),e.next=94,r.applyConstraints(b);case 94:e.next=149;break;case 96:return e.prev=96,e.t8=e.catch(88),e.prev=98,c="UHD",j={width:{ideal:3840},height:{ideal:2160}},console.log("UHD",j),e.next=104,r.applyConstraints(j);case 104:e.next=149;break;case 106:return e.prev=106,e.t9=e.catch(98),e.prev=108,c="2K",g={width:{ideal:2048},height:{ideal:1152}},console.log("2K",g),e.next=114,r.applyConstraints(g);case 114:e.next=149;break;case 116:return e.prev=116,e.t10=e.catch(108),e.prev=118,c="Full HD",x={width:{ideal:1920},height:{ideal:1080}},console.log("Full HD",x),e.next=124,r.applyConstraints(x);case 124:e.next=149;break;case 126:return e.prev=126,e.t11=e.catch(118),e.prev=128,c="HD",h={width:{ideal:1280},height:{ideal:720}},console.log("HD",h),e.next=134,r.applyConstraints(h);case 134:e.next=149;break;case 136:return e.prev=136,e.t12=e.catch(128),e.prev=138,c="SD",p={width:{ideal:640},height:{ideal:480}},console.log("SD",p),e.next=144,r.applyConstraints(p);case 144:e.next=149;break;case 146:e.prev=146,e.t13=e.catch(138),alert(e.t13);case 149:return(O=r.getSettings()).reso=c,e.abrupt("return",{stream:t,settings:O,reso:c});case 154:e.prev=154,e.t14=e.catch(3),console.error(e.t14);case 157:case"end":return e.stop()}}),e,null,[[3,154],[4,10],[12,18],[31,38],[40,47],[49,56],[58,65],[67,74],[76,83],[88,96],[98,106],[108,116],[118,126],[128,136],[138,146]])})))).apply(this,arguments)}var fe=function(e,t){return new Promise((function(t,n){console.log("dataURL",e);var a=new FileReader;je()(e);a.onloadend=function(){var e=Object(Q.a)(Z.a.mark((function e(n){var r;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"sample",new Uint8Array(a.result),console.log(a.result),r=btoa(xe.a.ArrayBuffer.hash(a.result,!0)),console.log("dataURL",r,a.result),t([r,a.result]);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.readAsArrayBuffer(e)}))},me=ae()(v.a)({height:"1px",backgroundColor:"#EBEBEB"}),ve=function(e){var t=Object(K.a)().t,n=m.a.useState([]),a=Object(O.a)(n,2),r=a[0],c=a[1],i=new ue.BrowserMultiFormatReader,o=m.a.useRef(),s=m.a.useRef(),l=m.a.useContext(de);return 0===Object.keys(l).length&&l.constructor===Object&&(l={login:JSON.parse(sessionStorage.getItem("login")),geoLocation:JSON.parse(sessionStorage.getItem("geoLocation"))}),Object(f.useEffect)(Object(Q.a)(Z.a.mark((function t(){var n;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n=i.decodeFromConstraints({audio:!1,video:{facingMode:{exact:"environment"}}})}catch(a){try{n=i.decodeFromConstraints({audio:!1,video:{facingMode:{exact:"user"}}})}catch(r){n=i.decodeFromConstraints({audio:!1,video:!0})}}console.log("codeReader",i),console.log("Started continous decode from camera with id ".concat(n[0])),console.log(o.current),i.decodeFromVideoDevice(n[0],s.current,(function(t,n){if(t){i.stream.getTracks().forEach((function(e){"live"==e.readyState&&e.stop()}));var a=t.text.split("%");console.log("carInfo",a),c(a),i.captureCanvas.toBlob(function(){var t=Object(Q.a)(Z.a.mark((function t(n){var c,o,s;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fe(n);case 2:c=t.sent,o=Object(O.a)(c,1),s=o[0],console.log("BLOB",n),e.toggleWaiting&&e.toggleWaiting(),oe(9994,l.login.assessment_id,"b04d837c-3539-430e-b9ae-159dcbe1e96b","PNG",s).subscribe((function(t){console.log("Uploading the Image to the URL ",t.data);try{se(t.data.uploadUrl,n,s,"image/png").subscribe((function(n){if(200===n.status&&e.nextAction){var r=[{tag_type:"VEHICLE_IDENTIFIER",value:"BAR_CODE",make:a[9],model:a[8],license_number:a[6],registration_number:a[7],engine_number:a[13],vin_number:a[12]}];le(9994,l.login.assessment_id,"b04d837c-3539-430e-b9ae-159dcbe1e96b",t.data.id,l.geoLocation,{height:i.captureCanvas.width,width:i.captureCanvas.width},r,!0)}}))}catch(r){console.error("Error",r)}}));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),i.stopStreams()}!n||n instanceof ue.NotFoundException||console.error(n)}));case 5:case"end":return t.stop()}}),t)}))),[]),Object(R.jsxs)(m.a.Fragment,{children:[Object(R.jsx)(v.a,{p:2,style:{display:"block",width:"100%",position:"absolute"},children:Object(R.jsx)(re,{children:Object(R.jsxs)(v.a,{p:2,children:[Object(R.jsx)(v.a,{p:1,children:Object(R.jsx)(E.a,{variant:"body1",children:t("Generate Vehicle Details")})}),Object(R.jsxs)($.a,{container:!0,children:[Object(R.jsx)($.a,{item:!0,xs:1}),Object(R.jsx)($.a,{item:!0,xs:4,children:Object(R.jsx)(v.a,{children:Object(R.jsx)(ie,{color:"secondary",size:"small",fullWidth:!1,label:t("License Disc")})})}),Object(R.jsx)($.a,{item:!0,xs:1}),Object(R.jsx)($.a,{item:!0,xs:4,children:Object(R.jsx)(v.a,{children:Object(R.jsx)(ie,{color:"secondary",size:"small",fullWidth:!1,label:t("Vin Number"),variant:"text"})})}),Object(R.jsx)($.a,{item:!0,xs:1})]})]})})}),Object(R.jsx)(v.a,{p:4,style:{display:"block",width:"100%",position:"absolute",top:"20%",zIndex:200,textAlign:"center",color:"white"},children:Object(R.jsx)(E.a,{children:t("Place our License disc within the frames and hold it there for a few seconds.")})}),Object(R.jsx)(v.a,{children:Object(R.jsx)("div",{children:Object(R.jsx)("video",{id:"video",width:"300",height:"200",ref:s})})}),Object(R.jsx)(v.a,{style:{top:0,left:0},children:Object(R.jsx)(te,{windowSize:24})}),Object(R.jsx)(v.a,{p:4,style:{display:"block",width:"100%",position:"absolute",top:"64%",zIndex:200,textAlign:"center",color:"white"},children:Object(R.jsx)(E.a,{children:t("Move Closer to the scan area.")})}),Object(R.jsxs)(w.a,{open:r.length>0,size:"md",children:[Object(R.jsx)(C.a,{disableTypography:"false",children:Object(R.jsx)(E.a,{variant:"h4",style:{textAlign:"center",padding:"8px"},children:t("Details found !")})}),Object(R.jsxs)(v.a,{p:1,m:2,textAlign:"center",children:[Object(R.jsx)(E.a,{variant:"h6",children:r[9]}),Object(R.jsx)(me,{}),Object(R.jsx)(E.a,{variant:"body2",textAlign:"center",children:t("Make")})]}),Object(R.jsxs)(v.a,{p:1,m:2,textAlign:"center",children:[Object(R.jsx)(E.a,{variant:"h6",children:r[8]}),Object(R.jsx)(me,{}),Object(R.jsx)(E.a,{variant:"body2",textAlign:"center",children:t("Model")})]}),Object(R.jsxs)(v.a,{p:1,m:2,textAlign:"center",children:[Object(R.jsx)(E.a,{variant:"h6",children:r[6]}),Object(R.jsx)(me,{}),Object(R.jsx)(E.a,{variant:"body2",textAlign:"center",children:t("License No")})]}),Object(R.jsxs)(v.a,{p:1,m:2,textAlign:"center",children:[Object(R.jsx)(E.a,{variant:"h6",children:r[12]}),Object(R.jsx)(me,{}),Object(R.jsx)(E.a,{variant:"body2",textAlign:"center",children:t("Vin No")})]}),Object(R.jsxs)(S.a,{children:[Object(R.jsx)(ie,{label:"Retake",color:"tertiary",onClick:function(){console.log("RESET"),c([]),i.reset()}}),Object(R.jsx)(ie,{label:t("Confirm"),onClick:function(){console.log("next Clicked",e.nextAction),e.nextAction(r)}})]})]})]})},ye=n(752),we=n(325),Ce=n(158),Ie=n(765),Se=n(766),Ae=n(699),Re=n(740),ke=n(750),De=function(e){return Object(R.jsx)(ke.a,{style:{height:"100%",width:"100%"},children:Object(R.jsx)("img",{src:"/images/CaptureButton.png",style:{textAlign:"center",width:"80px"}})})},Ee=function(e){return Object(R.jsx)(v.a,{p:4,style:{display:"block",position:"absolute",top:"40%",right:"0%",zIndex:205,textAlign:"center",color:"white"},children:Object(R.jsx)(Re.a,{onClick:e.onClick,children:Object(R.jsx)(De,{style:{width:"80px"}})})})},Ne=n(590),We=n.n(Ne),Te=function(e){return Object(R.jsx)(v.a,{p:4,style:{display:"block",position:"absolute",top:"40%",right:"0%",zIndex:205,textAlign:"center",color:"white"},children:Object(R.jsx)(Re.a,{onClick:e.onClick,children:Object(R.jsx)(We.a,{style:{fontSize:"80px",color:"rgb(126, 244, 36)"}})})})},_e=function(e,t,n,a,r,c,i,o){return Object(U.a)(z.put("/cardata/external/companies/".concat(e,"/assessments/").concat(t,"/files/").concat(a),{gps:r,original_image_resolution:c,tags:i,upload_done:o},{headers:{"device-id":n},"Content-Type":"application/json"}))},Le=n(772),Fe=new Le.a;Fe.next("INIT");var Pe=Fe,ze="boundry",Ue=function(e){var t=Object(K.a)().t,n=m.a.useRef(),a=m.a.useRef(),r=m.a.useRef(),c=m.a.useRef(),i=m.a.useRef(),o=m.a.useRef(),s=m.a.useRef(),l=m.a.useState(),d=Object(O.a)(l,2),u=d[0],b=d[1],j=m.a.useRef(),g=m.a.useState({}),x=Object(O.a)(g,2),h=x[0],y=x[1],w=m.a.useState({}),C=Object(O.a)(w,2),I=(C[0],C[1]),S=m.a.useState(!1),A=Object(O.a)(S,2),k=(A[0],A[1]),D=m.a.useState(),E=Object(O.a)(D,2),N=E[0],W=E[1],T=m.a.useState("INIT"),_=Object(O.a)(T,2),L=_[0],F=_[1],P=Object(Ce.a)().getMonitor(),z=m.a.useRef(),U=m.a.useState({x:0,y:0}),M=Object(O.a)(U,2),H=M[0],B=M[1],X=m.a.useState({x:0,y:0}),Y=Object(O.a)(X,2),J=Y[0],V=Y[1],G=m.a.useContext(de);0===Object.keys(G).length&&G.constructor===Object&&(G={login:JSON.parse(sessionStorage.getItem("login")),geoLocation:JSON.parse(sessionStorage.getItem("geoLocation"))}),Pe.subscribe((function(e){console.log("Capture Stage",e),F(e)})),console.log("carData",G);var q=Object(Ie.a)((function(){return{type:ze,collect:function(e){return{isDragging:!!e.isDragging()}}}})),$=Object(O.a)(q,2),ee=$[0].isDragging,te=$[1],ne=Object(Se.a)((function(){return{accept:ze,drop:function(){return ce(u,H,J)},collect:function(e){return{isOver:!!e.isOver()}}}}),[H,J,u]),ae=Object(O.a)(ne,2),re=(ae[0].isOver,ae[1]),ce=function(e,t,n){var a=t.x-n.x,r=t.y-n.y;console.log(e,t,n);var c=e.current.getClientRects(),i=a+c[0].width,o=r+c[0].height;e.current.style.left="".concat(a,"px"),e.current.style.top="".concat(r,"px");var s=Object(p.a)(Object(p.a)({},N),{},Object(we.a)({},e.current.id,[{x:a,y:r},{x:i,y:o}]));W(s)},le=function(){var e=Object(Ae.a)(),t=e.display,n=(e.itemType,e.item,e.style);return t?Object(R.jsx)("div",{className:"boundingBoxWrapper",style:n,children:Object(R.jsx)("div",{className:"boundingBox"})}):null},ue=m.a.useCallback((function(e){var t=e.width,n=e.height,r=1920,c=Math.floor(r*n/t),i=a.current.offsetWidth,o=a.current.offsetHeight;i>o?o=Math.floor(i*n/t):i=Math.floor(o*t/n);var s=i/t,l=o/n,d=r/t,u=c/n,b=0;i>document.documentElement.clientWidth&&(b=-(i-document.documentElement.clientWidth)/2);var j=0;return i>document.documentElement.clientWidth&&(j=-(r-document.documentElement.clientWidth)/2),{videoWidth:t,videoHeight:n,toWidth:i,toHeight:o,toX:b,toY:0,scaleRatioX:s,scaleRatioY:l,toImgWidth:r,toImgHeight:c,toImgX:j,toImgY:0,scaleImageX:d,scaleImageY:u}}),[a]),be=m.a.useCallback(Object(Q.a)(Z.a.mark((function e(){var t,a,c,i,o,l,d,u,b,j,g,x,h,p,O;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe();case 2:(t=e.sent)&&n.current&&("srcObject"in n.current?n.current.srcObject=t.stream:n.src=window.URL.createObjectURL(t.stream),y(t.settings),a=ue(t.settings),c=a.videoWidth,i=a.videoHeight,o=a.toWidth,l=a.toHeight,d=a.toX,u=a.toY,b=a.scaleRatioX,j=a.scaleRatioY,g=a.toImgWidth,x=a.toImgHeight,a.toImgX,a.toImgY,h=a.scaleImageX,p=a.scaleImageY,n.current.width=c,n.current.height=i,r.current.width=g,r.current.height=x,o<document.documentElement.clientWidth?n.current.style.transform="translate(".concat(-n.current.offsetLeft,"px, ").concat(-n.current.offsetTop,"px) scale(").concat(b,", ").concat(j,")"):(console.log("translate(".concat(-d,"px, ").concat(-u,"px) scale(").concat(b,", ").concat(j,")")),n.current.style.transform="translate(".concat(d,"px, ").concat(-n.current.offsetTop,"px) scale(").concat(b,", ").concat(j,")")),n.current.style.transformOrigin="top left",s.current.width=g,s.current.height=x,s.current.getContext("2d").scale(h,p),s.current.style.width="".concat(o,"px"),s.current.style.height="".concat(l,"px"),O={video:"".concat(c," x ").concat(i," (").concat(he(c,i),")"),scale:"".concat(b," x ").concat(j),media:"".concat(t.settings.width," x ").concat(t.settings.height),target:"".concat(o," x ").concat(l),targetXY:"".concat(d," x ").concat(u)},I(O));case 4:case"end":return e.stop()}}),e)}))),[n,a,o,s]);window.addEventListener("orientationchange",(function(e){be()})),Object(f.useEffect)(Object(Q.a)(Z.a.mark((function e(){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:be();case 1:case"end":return e.stop()}}),e)}))),[n,a,o,s]);var je=function(){var t=Object(Q.a)(Z.a.mark((function t(){var a,r,i,o,l,d;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=ue(h),a.videoWidth,a.videoHeight,a.toWidth,a.toHeight,a.toX,a.toY,a.scaleRatioX,a.scaleRatioY,r=a.toImgWidth,i=a.toImgHeight,o=s.current.getContext("2d"),k(!0),o.drawImage(n.current,2,0),s.current.toDataURL("image/png"),o.getImageData(0,0,r,i),480,l=c.current.getContext("2d"),c.current.width=480,c.current.height=480/h.aspectRatio,l.drawImage(s.current,0,0,s.current.width,s.current.height,0,0,c.current.width,c.current.height),d=c.current.toDataURL("image/png"),s.current.toBlob(function(){var t=Object(Q.a)(Z.a.mark((function t(a){var c,o,s;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fe(a);case 2:c=t.sent,o=Object(O.a)(c,1),s=o[0],console.log("BLOB",a),e.toggleWaiting&&e.toggleWaiting(),oe(9994,G.login.assessment_id,"b04d837c-3539-430e-b9ae-159dcbe1e96b","PNG",s).subscribe((function(t){console.log("Uploading the Image to the URL ",t.data);try{se(t.data.uploadUrl,a,s,"image/png").subscribe((function(a){200===a.status&&e.nextAction?(_e(9994,G.login.assessment_id,"b04d837c-3539-430e-b9ae-159dcbe1e96b",t.data.id,G.geoLocation,{height:i,width:r},[{tag_type:"AREA",value:e.side}],!0),n.current&&n.current.play(),e.nextAction(Object(p.a)(Object(p.a)({},t.data),{},{thumbnail:d}))):e.toggleWaiting&&e.toggleWaiting()}))}catch(c){e.toggleWaiting&&e.toggleWaiting(),console.error("Error",c)}}));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),setTimeout((function(){return k(!1)}),3e3);case 14:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();m.a.useEffect((function(){P.subscribeToOffsetChange((function(){var e=P.getClientOffset(),t=P.getInitialClientOffset(),n=P.getInitialSourceClientOffset();t&&n&&(V({x:t.x-n.x,y:t.y-n.y}),B(e))}))}),[P]);return console.log("STAGE",L),Object(R.jsxs)("div",{ref:re,children:[!1,Object(R.jsxs)("div",{ref:a,className:"videoWrapper",style:{overflow:"CAPTURED"===L?"auto":"hidden"},children:[Object(R.jsx)("video",{ref:n,id:"camvideo",autoPlay:!0,playsInline:!0,style:{display:"INIT"===L?"block":"none"}}),Object(R.jsx)("img",{ref:r,style:{border:"solid 2px red",display:"none"}}),Object(R.jsx)("img",{ref:z,style:{border:"solid 2px red",display:"none"}})]}),Object(R.jsxs)("div",{style:{position:"absolute"},children:[Object(R.jsx)("canvas",{ref:o,style:{border:"solid 2px red",display:"none"}}),Object(R.jsx)("canvas",{ref:s,style:{display:"INIT"===L?"none":"block"}}),Object(R.jsx)("canvas",{ref:c,style:{border:"solid 2px orange",position:"absolute",top:"0px",display:"none"}})]}),Object(R.jsx)("a",{id:"downloadAnchor",href:"http://chetandr.github.com",ref:j,style:{display:"none"},children:"image"}),"BBOX"===L&&Object(R.jsx)("div",{className:"boundingBoxWrapper",id:"bbox",ref:i,onTouchStart:function(){return b(i)},onMouseDown:function(){return b(i)},style:{opacity:ee?0:1},children:Object(R.jsx)("div",{className:"boundingBox",ref:te,style:{cursor:"move",display:"inline-block"}})}),Object(R.jsx)("a",{id:"downloadAnchor",href:"http://chetandr.github.com",ref:j,style:{display:"none"},children:"image"}),Object(R.jsx)(le,{}),"INIT"===L&&Object(R.jsx)(Ee,{onClick:function(){var t=ue(h),a=(t.videoWidth,t.videoHeight,t.toWidth,t.toHeight,t.toX,t.toY,t.scaleRatioX,t.scaleRatioY,t.toImgWidth,t.toImgHeight,s.current.getContext("2d"));n.current.pause(),a.drawImage(n.current,2,0),e.toggleOverlay&&e.toggleOverlay(),F("CAPTURED"),Pe.next("CAPTURED"),k(!0)}}),"CAPTURED"===L&&Object(R.jsx)(Te,{onClick:je}),Object(R.jsx)(v.a,{style:{bottom:"10px",position:"absolute",width:"200px",right:"10px"},children:"CAPTURED"===L&&Object(R.jsx)(ie,{onClick:function(){n.current.style.display="block";var e=s.current.getContext("2d");e.clearRect(0,0,s.current.width,s.current.height),e.globalAlpha=1,z.current.style.display="none",r.current.style.display="none",n.current.play(),Pe.next("INIT"),F("INIT")},label:t("Retake"),color:"tertiary"})})]})};Ue.defaultProps={nextAction:function(){},side:""};var Me=Ue,He=n(697),Be=n(753);function Xe(e){return e.side?Object(R.jsx)(ye.a,{backend:He.a,options:{enableMouseEvents:!0},children:Object(R.jsx)(Me,{nextAction:e.nextAction,side:e.side,toggleWaiting:e.toggleWaiting,toggleOverlay:e.toggleOverlay,reset:e.reset})}):Object(R.jsx)(Be.a,{})}Xe.defaultProps={nextAction:function(){},side:""};var Ke=Xe,Ye=function(e){var t="/images/overlays/".concat(e.image);return Object(R.jsx)("img",{src:t,width:e.width})};Ye.defaultProps={image:"FrontFull.png",width:"60%"};var Je=Ye,Ve=function(e){var t=Object(K.a)().t,n=m.a.useState(!0),a=Object(O.a)(n,2),r=a[0],c=a[1],i=m.a.useState(!0),o=Object(O.a)(i,2),s=o[0],l=o[1];return Object(R.jsxs)(m.a.Fragment,{children:[Object(R.jsx)(v.a,{p:4,style:{width:"100%",position:"absolute",top:"10px",zIndex:200,textAlign:"center",color:"white"},children:Object(R.jsxs)(E.a,{children:[" ",t("capture",{side:t("front")})]})}),Object(R.jsx)(Ke,{nextAction:function(t){console.log("next Clicked",e.nextAction),e.nextAction(t)},side:"FRONT_SIDE",toggleWaiting:e.toggleWaiting,toggleOverlay:function(){c(!r)},resetRnd:s,reset:function(){l(!1)}}),Object(R.jsx)(v.a,{style:{width:"100%",position:"absolute",top:"20%",zIndex:200,textAlign:"center",color:"white"},children:r&&Object(R.jsx)(Je,{image:"FrontFull.png",width:"50%"})})]})},Ge=function(e){var t=Object(K.a)().t;return Object(R.jsxs)(m.a.Fragment,{children:[Object(R.jsx)(v.a,{p:4,style:{display:"block",width:"100%",position:"absolute",top:"10px",zIndex:200,textAlign:"center",color:"white"},children:Object(R.jsxs)(E.a,{children:[" ",t("capture",{side:t("driver side")})]})}),Object(R.jsx)(Ke,{nextAction:function(t){console.log("next Clicked",e.nextAction),e.nextAction(t)},side:"DRIVER_SIDE",toggleWaiting:e.toggleWaiting}),Object(R.jsx)(v.a,{style:{display:"block",width:"100%",position:"absolute",top:"35%",zIndex:200,textAlign:"center",color:"white"},children:Object(R.jsx)(Je,{image:"DriverSideFull.png"})})]})},qe=function(e){var t=Object(K.a)().t;return Object(R.jsxs)(m.a.Fragment,{children:[Object(R.jsx)(v.a,{p:4,style:{display:"block",width:"100%",position:"absolute",top:"10px",zIndex:200,textAlign:"center",color:"white"},children:Object(R.jsxs)(E.a,{children:[" ",t("capture",{side:t("passenger side")})]})}),Object(R.jsx)(Ke,{nextAction:function(t){console.log("next Clicked",e.nextAction),e.nextAction(t)},side:"PASSENGER_SIDE",toggleWaiting:e.toggleWaiting}),Object(R.jsx)(v.a,{style:{display:"block",width:"100%",position:"absolute",top:"35%",zIndex:200,textAlign:"center",color:"white"},children:Object(R.jsx)(Je,{image:"PassengerSideFull.png"})})]})},Ze=function(e){var t=Object(K.a)().t;return Object(R.jsxs)(m.a.Fragment,{children:[Object(R.jsx)(v.a,{p:4,style:{display:"block",width:"100%",position:"absolute",top:"10px",zIndex:200,textAlign:"center",color:"white"},children:Object(R.jsxs)(E.a,{children:[" ",t("capture",{side:t("rear")})]})}),Object(R.jsx)(Ke,{nextAction:function(t){console.log("next Clicked",e.nextAction),e.nextAction(t)},side:"REAR_SIDE",toggleWaiting:e.toggleWaiting}),Object(R.jsx)(v.a,{style:{display:"block",width:"100%",position:"absolute",top:"20%",zIndex:200,textAlign:"center",color:"white"},children:Object(R.jsx)(Je,{image:"RearFull.png",width:"50%"})})]})},Qe=n(415),$e=n.n(Qe),et=function(e){var t=Object(K.a)().t,n=m.a.useState(!0),a=Object(O.a)(n,2),r=a[0],c=a[1],i=m.a.useState(!0),o=Object(O.a)(i,2),s=o[0],l=o[1],d=m.a.useState("INIT"),u=Object(O.a)(d,2),b=u[0],j=u[1];return console.log("mediaCaptureState",b),Pe.subscribe((function(e){console.log("mediaCaptureState",e,b),j(e)})),Object(R.jsxs)(m.a.Fragment,{children:[Object(R.jsx)(v.a,{p:4,style:{width:"100%",position:"absolute",top:"10px",zIndex:200,textAlign:"center",color:"white"},children:"INIT"===b&&Object(R.jsxs)(E.a,{children:[" ",t("capture",{side:$e()(t(e.side).toLowerCase())})]})}),Object(R.jsx)(Ke,{nextAction:function(t){console.log("next Clicked",e.nextAction),e.nextAction(t)},side:e.side,toggleWaiting:e.toggleWaiting,toggleOverlay:function(){c(!r)},resetRnd:s,reset:function(){l(!1)}}),Object(R.jsx)(v.a,{style:{width:"100%",position:"absolute",top:e.overlayImagePosition||"20%",zIndex:200,textAlign:"center",color:"white"},children:"INIT"===b&&Object(R.jsx)(Je,{image:e.overlayImage,width:e.overlayImageSize||"50%"})})]})},tt=(ae()(v.a)({height:"1px",backgroundColor:"#EBEBEB"}),function(e){var t=Object(K.a)().t,n=m.a.useState([]),a=Object(O.a)(n,2),r=a[0],c=(a[1],m.a.useState("INIT")),i=Object(O.a)(c,2),o=i[0],s=i[1],l=(new ue.BrowserMultiFormatReader,m.a.useRef(),m.a.useRef(),m.a.useContext(de));return 0===Object.keys(l).length&&l.constructor===Object&&(l={login:JSON.parse(sessionStorage.getItem("login")),geoLocation:JSON.parse(sessionStorage.getItem("geoLocation"))}),Object(f.useEffect)((function(){Pe.subscribe((function(e){return s(e)}))}),[]),console.log("STAGE",o),Object(R.jsxs)(m.a.Fragment,{children:[Object(R.jsx)(v.a,{p:2,style:{display:"block",width:"100%",position:"absolute"}}),Object(R.jsx)(v.a,{p:4,style:{display:"block",width:"100%",position:"absolute",top:"10%",zIndex:200,textAlign:"center",color:"white"},children:Object(R.jsx)(E.a,{children:t("Position the Odometer within the box.")})}),Object(R.jsx)(v.a,{children:Object(R.jsx)(Ke,{nextAction:function(){console.log("next Clicked",e.nextAction),e.nextAction(r)},side:"odometer"})}),"INIT"===o&&Object(R.jsx)(v.a,{style:{top:0,left:0},children:Object(R.jsx)(te,{windowSize:40,windowXScale:8,edged:!1,borderWidth:4,borderRadius:4,title:"Odometer"})}),Object(R.jsx)(v.a,{p:4,style:{display:"block",width:"100%",position:"absolute",top:"64%",zIndex:200,textAlign:"center",color:"white"}})]})}),nt=n(754),at=n(756),rt=n(755),ct=n(738),it=function(e,t,n,a,r){return Object(U.a)(z.post("/cardata/external/companies/".concat(e,"/assessments/").concat(t,"/submit"),{assessment_location:a,preferred_location:r},{headers:{"device-id":n},"Content-Type":"application/json"}))},ot=n(4),st=ae()(ct.a)({margin:"16px 8px 16px 8px",borderRadius:"16px",border:"solid 1px #DADCE6"}),lt=(ae()(nt.a)({margin:"8px"}),function(e){var t=Object(K.a)().t,n=Object(f.useContext)(de);Object(ot.f)();Object.keys(n).length||(n=JSON.parse(sessionStorage.getItem("carData"))),console.log("carData",n);var a=m.a.useState(!1),r=Object(O.a)(a,2),c=r[0],i=r[1];return Object(R.jsxs)(v.a,{children:[Object(R.jsx)(E.a,{variant:"h4",className:"label",children:t("Assessment Summary")}),Object(R.jsxs)(v.a,{alignContent:"center",alignItems:"center",textAlign:"center",mb:2,children:[Object(R.jsxs)(E.a,{variant:"body2",component:"span",className:"label",children:[t("Request Date")," :"]}),Object(R.jsx)(E.a,{variant:"body1",className:"text",component:"span",children:new Intl.DateTimeFormat("en-ZA").format(new Date)})]}),Object(R.jsxs)(v.a,{my:2,children:[Object(R.jsxs)($.a,{container:!0,spacing:1,children:[Object(R.jsx)($.a,{item:!0,xs:4,children:Object(R.jsxs)(v.a,{p:2,children:[Object(R.jsx)(E.a,{variant:"body2",className:"label",children:t("Make")}),Object(R.jsx)(E.a,{variant:"body1",className:"text",children:n.license[9]})]})}),Object(R.jsx)($.a,{item:!0,xs:4,children:Object(R.jsxs)(v.a,{p:2,children:[Object(R.jsx)(E.a,{variant:"body2",className:"label",children:t("Model")}),Object(R.jsx)(E.a,{variant:"body1",className:"text",children:n.license[8]})]})}),Object(R.jsx)($.a,{item:!0,xs:4,children:Object(R.jsxs)(v.a,{p:2,children:[Object(R.jsx)(E.a,{variant:"body2",className:"label",children:t("License Plate")}),Object(R.jsx)(E.a,{variant:"body1",className:"text",children:n.license[6]})]})})]}),Object(R.jsxs)($.a,{container:!0,spacing:1,children:[Object(R.jsx)($.a,{item:!0,xs:4,children:Object(R.jsxs)(v.a,{p:2,children:[Object(R.jsx)(E.a,{variant:"body2",className:"label",children:t("Vin Number")}),Object(R.jsx)(E.a,{variant:"body1",className:"text",children:n.license[12]})]})}),Object(R.jsx)($.a,{item:!0,xs:4})]})]}),Object(R.jsx)(E.a,{variant:"body1",className:"text",children:t("Tap the images of damaged parts")}),Object(R.jsxs)($.a,{container:!0,spacing:0,children:[Object(R.jsx)($.a,{item:!0,xs:3,children:Object(R.jsxs)(st,{children:[Object(R.jsx)(rt.a,{component:"img",alt:"Front Side",height:"100%",image:n.pre.front.thumbnail,title:"Front Side"}),Object(R.jsx)(at.a,{style:{padding:"4px"},children:Object(R.jsx)(E.a,{variant:"body1",className:"text",children:"Front Side"})})]})}),Object(R.jsx)($.a,{item:!0,xs:3,children:Object(R.jsxs)(st,{children:[Object(R.jsx)(rt.a,{component:"img",alt:"Passenger Side",height:"100%",image:n.pre.passengerside.thumbnail,title:"Passenger Side"}),Object(R.jsx)(at.a,{style:{padding:"4px"},children:Object(R.jsx)(E.a,{variant:"body1",className:"text",children:"Passenger Side"})})]})}),Object(R.jsx)($.a,{item:!0,xs:3,children:Object(R.jsxs)(st,{children:[Object(R.jsx)(rt.a,{component:"img",alt:"Rear Side",height:"100%",image:n.pre.rear.thumbnail,title:"Rear Side"}),Object(R.jsx)(at.a,{style:{padding:"4px"},children:Object(R.jsx)(E.a,{variant:"body1",className:"text",children:"Rear Side"})})]})}),Object(R.jsx)($.a,{item:!0,xs:3,children:Object(R.jsxs)(st,{children:[Object(R.jsx)(rt.a,{component:"img",alt:"Driver Side",height:"100%",image:n.pre.driverside.thumbnail,title:"Driver Side"}),Object(R.jsx)(at.a,{style:{padding:"4px"},children:Object(R.jsx)(E.a,{variant:"body1",className:"text",children:"Driver Side"})})]})})]}),Object(R.jsx)(v.a,{p:1,m:2,textAlign:"right",children:Object(R.jsx)(ie,{label:"Submit",fullWidth:!1,onClick:function(){e.toggleWaiting&&e.toggleWaiting(),it(9994,n.login.assessment_id,"b04d837c-3539-430e-b9ae-159dcbe1e96b",n.geoLocation,n.geoLocation).subscribe((function(e){return i(!0)}))}})}),Object(R.jsxs)(w.a,{open:c,size:"md",children:[Object(R.jsx)(C.a,{style:{textAlign:"center"},children:"Thank you !"}),Object(R.jsxs)(I.a,{children:[Object(R.jsx)(E.a,{style:{textAlign:"center"},children:"Your vehicle assessment is now complete!"}),Object(R.jsx)(E.a,{style:{textAlign:"center"},children:"We will be in touch with you soon."})]}),Object(R.jsx)(S.a,{style:{justifyContent:"center"},children:Object(R.jsx)(ie,{label:"Ok",onClick:function(){e.nextAction&&e.nextAction()},fullWidth:!1})})]})]})}),dt=[{type:"Onboard",sub:"login",contained:!0},{type:"Onboard",sub:"license"},{type:"Inspection",sub:"pre",step:"front",overlayImage:"FrontFull.png",overlayImageSize:"50%",side:"FRONT_SIDE"},{type:"Inspection",sub:"pre",step:"passengerside",overlayImage:"PassengerSideFull.png",overlayImageSize:"60%",overlayImagePosition:"40%",side:"PASSENGER_SIDE"},{type:"Inspection",sub:"pre",step:"rear",overlayImage:"RearFull.png",overlayImageSize:"50%",side:"REAR_SIDE"},{type:"Inspection",sub:"pre",step:"driverside",overlayImage:"DriverSideFull.png",overlayImageSize:"60%",overlayImagePosition:"40%",side:"DRIVER_SIDE"},{type:"Offboard",sub:"Odometer",overlayImage:"DriverSideFull.png",overlayImageSize:"60%",overlayImagePosition:"40%",side:"ODOMETER"},{type:"Summary",sub:"report"}],ut=n(56),bt=Object(ut.a)({typography:{fontFamily:["Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")},palette:{primary:{main:"#EDA03A"},secondary:{main:"rgb(126, 244, 36)"}},overrides:{MuiButton:{textSecondary:{color:"#FFF"}},MuiCardMedia:{img:{borderTopLeftRadius:"16px",borderTopRightRadius:"16px"}}}}),jt=n(759),gt=n(758),xt=n(749),ht=n(614),pt=n.n(ht),Ot=n(695),ft=n(696),mt=n(701),vt=n(698),yt=function(e){Object(mt.a)(n,e);var t=Object(vt.a)(n);function n(){var e;Object(Ot.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={error:null,errorInfo:null},e}return Object(ft.a)(n,[{key:"componentDidCatch",value:function(e,t){this.setState(e,t)}},{key:"render",value:function(){return this.state.errorInfo?Object(R.jsx)(X.a,{severity:"error",children:"Error Rendering the Component"}):this.props.children}}]),n}(f.Component);var wt=n(757),Ct=n(743),It=new Le.a;It.next({sub:"pre"});var St=It,At=Object(Y.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#EDA03A"}}}));t.default=function(){console.log("JOURNEYSTART");var e=m.a.useRef(),t=At(),n=m.a.useState({}),a=Object(O.a)(n,2),r=a[0],c=a[1],i=Object(ot.g)(),o=i.type,s=i.sub,l=i.step,d=m.a.useState(!1),u=Object(O.a)(d,2),b=u[0],j=u[1],g=m.a.useState(null),x=Object(O.a)(g,2),y=x[0],w=x[1];Pe.subscribe((function(e){console.log("mediaCaptureState",e,y),w(e)})),o||s||(o=dt[0].type,s=dt[0].sub,l=dt[0].step),console.log("ACTIONS",o,s,l);var C=function(e,t,n){var a=pt()(dt,(function(a){return a.step?a.type.toLowerCase()===e.toLowerCase()&&a.sub.toLowerCase()===t.toLowerCase()&&a.step.toLowerCase()===n.toLowerCase():a.type.toLowerCase()===e.toLowerCase()&&a.sub.toLowerCase()===t.toLowerCase()}));return{prevIndex:a-1,currentIndex:a,nextIndex:a===dt.length-1?0:a+1}}(o,s,l),I=C.currentIndex,S=C.nextIndex;Object(f.useEffect)((function(){St.subscribe((function(e){return c(e)}))}),[]);var A=function(e){Pe.next("INIT");var t="/journey/".concat(dt[S].type,"/").concat(dt[S].sub);dt[S].step&&(t+="/".concat(dt[S].step));s.toLowerCase();if(e){var n=Object(p.a)({},r);n[s]||(n[s]={}),l?n[s][l]=e:n[s]=e,console.log("newSubData",n),c(n),sessionStorage.setItem("carData",JSON.stringify(n))}console.log("nextAction",dt[S].type.toLowerCase()),j(!1),E.push(t)},k=function(){j(!0)},D=function(e){var t=e.type,n=e.sub,a=(e.step,[]);if(console.log("Module",$e()(t),$e()(n).split(" ").join("")),t){var r=m.a.createElement(h[$e()(t)][$e()(n)].default,Object(p.a)({nextAction:A,toggleWaiting:k,mediaCaptureState:y},dt[I]));a.push(r)}return a},E=Object(ot.f)(),N=function(){return Object(R.jsx)(v.a,{children:Object(R.jsxs)(Ct.a,{className:t.backdrop,open:b,children:[Object(R.jsx)(wt.a,{color:"inherit",thickness:4,size:60}),Object(R.jsx)("img",{src:"/carScan_icon.png",width:"40px",style:{marginLeft:"-50px"},alt:"CarScan"})]})})};"license"===dt[I].step&&(r.geoLocation||new Promise((function(e,t){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){var n=t.coords.latitude,a=t.coords.longitude;e({lat:n,long:a})}),(function(){console.error("Unable to retrieve your location")})):console.info("Geolocation is not supported by your browser")})).then((function(e){c(Object(p.a)(Object(p.a)({},r),{},{geoLocation:e})),sessionStorage.setItem("geoLocation",JSON.stringify(e))})));var W=dt[I];return o&&s?Object(R.jsxs)(m.a.Fragment,{children:[Object(R.jsx)(gt.a,{}),Object(R.jsx)(xt.a,{theme:bt,children:Object(R.jsx)(de.Provider,{value:r,children:W.container?Object(R.jsx)(jt.a,{children:Object(R.jsxs)(yt,{children:[N(),o&&s&&D({type:o,sub:s,step:l})]})}):o&&s&&Object(R.jsxs)(yt,{children:[N(),Object(R.jsx)(v.a,{ref:e,children:D({type:o,sub:s,step:l})})]})})})]}):Object(R.jsx)(Be.a,{})}}}]);
//# sourceMappingURL=4.7193d9b7.chunk.js.map