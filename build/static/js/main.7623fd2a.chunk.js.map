{"version":3,"sources":["components/capture/index.jsx","App.js","reportWebVitals.js","index.js"],"names":["ItemTypes","Capture","video","useRef","canvas","downloadAnchor","photo","snap","bboxWrapper0","bboxWrapper1","bboxWrapper2","bboxWrapper3","bboxWrapper4","bboxWrapper5","useState","bboxProperties","setBboxProperties","disp0","disp1","disp2","disp3","disp4","disp5","displayBox","setDisplayBox","x","y","currentPosition","setCurrentPosition","dragInitPositionDiff","setDragInitPositionDiff","debugData","setDebugData","monitor","useDragDropManager","getMonitor","bboxCount","setBBoxCount","currentBBox","setCurrentBBox","useDrag","type","collect","isDragging","bbox0","isDragging0","bbox1","isDragging1","bbox2","isDragging2","bbox3","isDragging3","bbox4","isDragging4","bbox5","isDragging5","React","useEffect","subscribeToOffsetChange","offset","getClientOffset","initialClientOffset","getInitialClientOffset","initialSourceClientOffset","getInitialSourceClientOffset","useDrop","accept","drop","moveBox","isOver","cbbox","cp","diff","rbox","current","getClientRects","x1","width","y1","height","style","left","top","newBboxProperties","id","getVideo","useCallback","constraint","a","navigator","mediaDevices","getUserMedia","mediaStream","srcObject","getCamera","enumerateDevices","devices","map","device","index","label","videoDevices","filter","kind","backDevice","indexOf","length","min","ideal","max","deviceId","className","ref","onMouseMove","e","screenX","screenY","playsInline","autoPlay","IconButton","color","aria-label","component","variant","onClick","context","getContext","window","innerWidth","innerHeight","drawImage","font","cnt","key","contentText","JSON","stringify","strokeText","url","toDataURL","setAttribute","href","download","click","URL","revokeObjectURL","fontSize","newDisplayBox","disabled","src","alt","onTouchStart","opacity","cursor","display","onMouseDown","App","DndProvider","backend","TouchBackend","options","enableMouseEvents","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.7623fd2a.chunk.js","sourcesContent":["import React, { useCallback, useEffect, useRef, useState } from 'react';\r\nimport { useDrag, useDragDropManager, useDrop } from 'react-dnd';\r\n\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport PhotoCamera from '@material-ui/icons/PhotoCamera';\r\nimport SettingsOverscanIcon from '@material-ui/icons/SettingsOverscan';\r\n\r\nconst ItemTypes = {\r\n\tBOUNDARY: 'boundry',\r\n};\r\n\r\nconst Capture = () => {\r\n\tconst debug = false;\r\n\tconst allowedBBoxes = 2;\r\n\tconst video = useRef();\r\n\tconst canvas = useRef();\r\n\tconst downloadAnchor = useRef();\r\n\tconst photo = useRef();\r\n\tconst snap = useRef();\r\n\tconst bboxWrapper0 = useRef();\r\n\tconst bboxWrapper1 = useRef();\r\n\tconst bboxWrapper2 = useRef();\r\n\tconst bboxWrapper3 = useRef();\r\n\tconst bboxWrapper4 = useRef();\r\n\tconst bboxWrapper5 = useRef();\r\n\tconst [bboxProperties, setBboxProperties] = useState();\r\n\tconst [displayBox, setDisplayBox] = useState({\r\n\t\tdisp0: false,\r\n\t\tdisp1: false,\r\n\t\tdisp2: false,\r\n\t\tdisp3: false,\r\n\t\tdisp4: false,\r\n\t\tdisp5: false,\r\n\t});\r\n\tconst [currentPosition, setCurrentPosition] = useState({ x: 0, y: 0 });\r\n\tconst [dragInitPositionDiff, setDragInitPositionDiff] = useState({ x: 0, y: 0 });\r\n\tconst [debugData, setDebugData] = useState([]);\r\n\tconst dragDropManager = useDragDropManager();\r\n\tconst monitor = dragDropManager.getMonitor();\r\n\tconst [bboxCount, setBBoxCount] = useState(0);\r\n\tconst [currentBBox, setCurrentBBox] = useState();\r\n\r\n\tconst [{ isDragging0 }, bbox0] = useDrag(() => ({\r\n\t\ttype: ItemTypes.BOUNDARY,\r\n\t\tcollect: (monitor) => ({\r\n\t\t\tisDragging: !!monitor.isDragging(),\r\n\t\t}),\r\n\t}));\r\n\tconst [{ isDragging1 }, bbox1] = useDrag(() => ({\r\n\t\ttype: ItemTypes.BOUNDARY,\r\n\t\tcollect: (monitor) => ({\r\n\t\t\tisDragging: !!monitor.isDragging(),\r\n\t\t}),\r\n\t}));\r\n\tconst [{ isDragging2 }, bbox2] = useDrag(() => ({\r\n\t\ttype: ItemTypes.BOUNDARY,\r\n\t\tcollect: (monitor) => ({\r\n\t\t\tisDragging: !!monitor.isDragging(),\r\n\t\t}),\r\n\t}));\r\n\tconst [{ isDragging3 }, bbox3] = useDrag(() => ({\r\n\t\ttype: ItemTypes.BOUNDARY,\r\n\t\tcollect: (monitor) => ({\r\n\t\t\tisDragging: !!monitor.isDragging(),\r\n\t\t}),\r\n\t}));\r\n\tconst [{ isDragging4 }, bbox4] = useDrag(() => ({\r\n\t\ttype: ItemTypes.BOUNDARY,\r\n\t\tcollect: (monitor) => ({\r\n\t\t\tisDragging: !!monitor.isDragging(),\r\n\t\t}),\r\n\t}));\r\n\tconst [{ isDragging5 }, bbox5] = useDrag(() => ({\r\n\t\ttype: ItemTypes.BOUNDARY,\r\n\t\tcollect: (monitor) => ({\r\n\t\t\tisDragging: !!monitor.isDragging(),\r\n\t\t}),\r\n\t}));\r\n\r\n\tReact.useEffect(() => {\r\n\t\tmonitor.subscribeToOffsetChange(() => {\r\n\t\t\tconst offset = monitor.getClientOffset();\r\n\t\t\tconst initialClientOffset = monitor.getInitialClientOffset();\r\n\t\t\tconst initialSourceClientOffset = monitor.getInitialSourceClientOffset();\r\n\t\t\tif (initialClientOffset && initialSourceClientOffset) {\r\n\t\t\t\tsetDragInitPositionDiff({\r\n\t\t\t\t\tx: initialClientOffset.x - initialSourceClientOffset.x,\r\n\t\t\t\t\ty: initialClientOffset.y - initialSourceClientOffset.y,\r\n\t\t\t\t});\r\n\t\t\t\tsetCurrentPosition(offset);\r\n\t\t\t}\r\n\r\n\t\t\t// do stuff like setState, though consider directly updating style through refs for performance\r\n\t\t});\r\n\t}, [monitor]);\r\n\r\n\tconst _onMouseMove = (e) => {\r\n\t\tsetCurrentPosition({ x: e.screenX, y: e.screenY });\r\n\t};\r\n\r\n\tconst [{ isOver }, drop] = useDrop(\r\n\t\t() => ({\r\n\t\t\taccept: ItemTypes.BOUNDARY,\r\n\t\t\tdrop: () => moveBox(currentBBox, currentPosition, dragInitPositionDiff),\r\n\t\t\tcollect: (monitor) => ({\r\n\t\t\t\tisOver: !!monitor.isOver(),\r\n\t\t\t}),\r\n\t\t}),\r\n\t\t[currentPosition, dragInitPositionDiff, currentBBox],\r\n\t);\r\n\tconst moveBox = (cbbox, cp, diff) => {\r\n\t\tconst x = cp.x - diff.x;\r\n\t\tconst y = cp.y - diff.y;\r\n\r\n\t\tconst rbox = cbbox.current.getClientRects();\r\n\t\tconst x1 = x + rbox[0].width;\r\n\t\tconst y1 = y + rbox[0].height;\r\n\t\tcbbox.current.style.left = `${x}px`;\r\n\t\tcbbox.current.style.top = `${y}px`;\r\n\t\tconst newBboxProperties = {\r\n\t\t\t...bboxProperties,\r\n\t\t\t[cbbox.current.id]: [\r\n\t\t\t\t{ x, y },\r\n\t\t\t\t{ x: x1, y: y1 },\r\n\t\t\t],\r\n\t\t};\r\n\t\tsetBboxProperties(newBboxProperties);\r\n\t\t// drag.current.left = `${currentPosition.x}px`;\r\n\t\t// drag.current.top = `${currentPosition.y}px`;\r\n\t};\r\n\tconst getDragRef = (count) => {\r\n\t\tswitch (count) {\r\n\t\t\tcase 0:\r\n\t\t\t\treturn bbox0;\r\n\t\t\tcase 1:\r\n\t\t\t\treturn bbox1;\r\n\t\t\tcase 2:\r\n\t\t\t\treturn bbox2;\r\n\t\t\tcase 3:\r\n\t\t\t\treturn bbox3;\r\n\t\t\tcase 4:\r\n\t\t\t\treturn bbox3;\r\n\t\t\tcase 5:\r\n\t\t\t\treturn bbox3;\r\n\t\t}\r\n\t};\r\n\tconst getDragWrapperRef = (count) => {\r\n\t\tswitch (count) {\r\n\t\t\tcase 0:\r\n\t\t\t\treturn bboxWrapper0;\r\n\t\t\tcase 1:\r\n\t\t\t\treturn bboxWrapper1;\r\n\t\t\tcase 2:\r\n\t\t\t\treturn bboxWrapper2;\r\n\t\t\tcase 3:\r\n\t\t\t\treturn bboxWrapper3;\r\n\t\t\tcase 4:\r\n\t\t\t\treturn bboxWrapper4;\r\n\t\t\tcase 5:\r\n\t\t\t\treturn bboxWrapper5;\r\n\t\t}\r\n\t};\r\n\tconst getBoundingBox = (count) => {\r\n\t\tconst retBoundingBox = (\r\n\t\t\t<div className='boundingBoxWrapper' ref={getDragWrapperRef[count]}>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName='boundingBox'\r\n\t\t\t\t\tref={getDragRef(count)}\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\topacity: isDragging0 ? 0.5 : 1,\r\n\t\t\t\t\t\tcursor: 'move',\r\n\t\t\t\t\t}}\r\n\t\t\t\t></div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t\treturn retBoundingBox;\r\n\t};\r\n\tconst getVideo = useCallback(\r\n\t\tasync (constraint) => {\r\n\t\t\tconst mediaStream = await navigator.mediaDevices.getUserMedia(constraint);\r\n\t\t\tvideo.current.srcObject = mediaStream;\r\n\t\t},\r\n\t\t[video, canvas, downloadAnchor, photo],\r\n\t);\r\n\r\n\tconst getCamera = useCallback(async () => {\r\n\t\tconst devices = await navigator.mediaDevices.enumerateDevices();\r\n\t\tdevices.map((device, index) => (debugData[`Devices Info ${index}`] = device.label));\r\n\t\tconst videoDevices = devices.filter((device) => device.kind === 'videoinput');\r\n\t\t// const debugData = { 'Devices Info': device };\r\n\t\tlet backDevice = videoDevices.filter((device) => device.label.indexOf('back') >= 0);\r\n\r\n\t\tif (backDevice.length === 0 && videoDevices.length > 1) {\r\n\t\t\tbackDevice = videoDevices[0];\r\n\t\t}\r\n\r\n\t\tdebugData['Has Back Camera'] = backDevice.length ? 'true' : 'false';\r\n\t\tsetDebugData(debugData);\r\n\t\t// debug.append(div);\r\n\t\tif (backDevice.length) {\r\n\t\t\tlet constraint = {\r\n\t\t\t\tvideo: {\r\n\t\t\t\t\twidth: {\r\n\t\t\t\t\t\tmin: 1280,\r\n\t\t\t\t\t\tideal: 1920,\r\n\t\t\t\t\t\tmax: 2560,\r\n\t\t\t\t\t},\r\n\t\t\t\t\theight: {\r\n\t\t\t\t\t\tmin: 720,\r\n\t\t\t\t\t\tideal: 1080,\r\n\t\t\t\t\t\tmax: 1440,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdeviceId: backDevice[0].deviceId,\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t\tgetVideo(constraint);\r\n\t\t} else {\r\n\t\t\tlet constraint = {\r\n\t\t\t\tvideo: {\r\n\t\t\t\t\twidth: {\r\n\t\t\t\t\t\tmin: 1280,\r\n\t\t\t\t\t\tideal: 1920,\r\n\t\t\t\t\t\tmax: 2560,\r\n\t\t\t\t\t},\r\n\t\t\t\t\theight: {\r\n\t\t\t\t\t\tmin: 720,\r\n\t\t\t\t\t\tideal: 1080,\r\n\t\t\t\t\t\tmax: 1440,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t\tgetVideo(constraint);\r\n\t\t}\r\n\t}, [getVideo]);\r\n\r\n\tuseEffect(() => {\r\n\t\tgetCamera();\r\n\t}, [debug, video, canvas, downloadAnchor, photo, getCamera, getVideo]);\r\n\tconst addBBox = () => {\r\n\t\tconst newDisplayBox = { ...displayBox, [`disp${bboxCount}`]: true };\r\n\t\tconst newCount = bboxCount + 1;\r\n\t\tsetBBoxCount(newCount);\r\n\t\tsetDisplayBox(newDisplayBox);\r\n\t};\r\n\tconst captureImage = () => {\r\n\t\tconst context = canvas.current.getContext('2d');\r\n\t\tcanvas.current.width = window.innerWidth;\r\n\t\tcanvas.current.height = window.innerHeight;\r\n\t\tcontext.drawImage(video.current, 0, 0, window.innerWidth, window.innerHeight);\r\n\t\tcontext.font = '20px Roboto';\r\n\t\tlet cnt = 0;\r\n\t\tfor (let key in bboxProperties) {\r\n\t\t\tconst contentText = `${key} : ${JSON.stringify(bboxProperties[key])}`;\r\n\t\t\tcontext.strokeText(contentText, 10, 20 + 20 * cnt, 1000);\r\n\t\t\tcnt++;\r\n\t\t}\r\n\t\tconst url = canvas.current.toDataURL('image/png');\r\n\t\tphoto.current.setAttribute('src', url);\r\n\t\tdownloadAnchor.current.href = url;\r\n\t\tdownloadAnchor.current.download = 'MyPhoto.png';\r\n\t\tdownloadAnchor.current.click();\r\n\t\t//\r\n\t\twindow.URL.revokeObjectURL(url);\r\n\t};\r\n\r\n\tconst getDebugData = () => {\r\n\t\tconst components = [];\r\n\t\tfor (let key in debugData) {\r\n\t\t\tcomponents.push(\r\n\t\t\t\t<div className='debugRow'>\r\n\t\t\t\t\t<span className='debugLabel'>{key} : </span>\r\n\t\t\t\t\t<span className='debugValue'>{debugData[key]}</span>\r\n\t\t\t\t</div>,\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn components;\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{debug && <div id='debug'>Debug {getDebugData()}</div>}\r\n\t\t\t<div className='container' ref={drop} onMouseMove={_onMouseMove}>\r\n\t\t\t\t<video ref={video} id='video' playsInline autoPlay></video>\r\n\t\t\t\t<div id='changeVideo'>\r\n\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\tcolor='secondary'\r\n\t\t\t\t\t\taria-label='upload picture'\r\n\t\t\t\t\t\tcomponent='span'\r\n\t\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\t\tref={snap}\r\n\t\t\t\t\t\tonClick={captureImage}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<PhotoCamera style={{ fontSize: 100 }} />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div id='additionalButtons'>\r\n\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\taria-label='upload picture'\r\n\t\t\t\t\t\tcomponent='span'\r\n\t\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\t\tref={snap}\r\n\t\t\t\t\t\tonClick={addBBox}\r\n\t\t\t\t\t\tdisabled={bboxCount >= allowedBBoxes}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<SettingsOverscanIcon style={{ fontSize: 100 }} />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div id='handlers'>\r\n\t\t\t\t\t<canvas id='canvas' ref={canvas}>\r\n\t\t\t\t\t\t{' '}\r\n\t\t\t\t\t</canvas>\r\n\t\t\t\t\t<a id='downloadAnchor' href='http://chetandr.github.com' ref={downloadAnchor}>\r\n\t\t\t\t\t\timage\r\n\t\t\t\t\t</a>\r\n\t\t\t\t\t<img id='photo' ref={photo} src='/logo.svg' alt='Donwload placeholder' />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName='boundingBoxWrapper0'\r\n\t\t\t\t\tid='bbox0'\r\n\t\t\t\t\tref={bboxWrapper0}\r\n\t\t\t\t\tonTouchStart={() => setCurrentBBox(bboxWrapper0)}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName='boundingBox'\r\n\t\t\t\t\t\tref={bbox0}\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\topacity: isDragging0 ? 1 : 1,\r\n\t\t\t\t\t\t\tcursor: 'move',\r\n\t\t\t\t\t\t\tdisplay: displayBox.disp0 ? 'inline-block' : 'none',\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t></div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName='boundingBoxWrapper1'\r\n\t\t\t\t\tid='bbox1'\r\n\t\t\t\t\tref={bboxWrapper1}\r\n\t\t\t\t\tonTouchStart={() => setCurrentBBox(bboxWrapper1)}\r\n\t\t\t\t\tonMouseDown={() => setCurrentBBox(bboxWrapper1)}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName='boundingBox'\r\n\t\t\t\t\t\tref={bbox1}\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\topacity: isDragging1 ? 1 : 1,\r\n\t\t\t\t\t\t\tcursor: 'move',\r\n\t\t\t\t\t\t\tdisplay: displayBox.disp1 ? 'inline-block' : 'none',\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t></div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName='boundingBoxWrapper2'\r\n\t\t\t\t\tid='bbox2'\r\n\t\t\t\t\tref={bboxWrapper2}\r\n\t\t\t\t\tonTouchStart={() => setCurrentBBox(bboxWrapper2)}\r\n\t\t\t\t\tonMouseDown={() => setCurrentBBox(bboxWrapper1)}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName='boundingBox'\r\n\t\t\t\t\t\tref={bbox2}\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\topacity: isDragging2 ? 1 : 1,\r\n\t\t\t\t\t\t\tcursor: 'move',\r\n\t\t\t\t\t\t\tdisplay: displayBox.disp2 ? 'inline-block' : 'none',\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t></div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName='boundingBoxWrapper3'\r\n\t\t\t\t\tid='bbox3'\r\n\t\t\t\t\tref={bboxWrapper3}\r\n\t\t\t\t\tonTouchStart={() => setCurrentBBox(bboxWrapper3)}\r\n\t\t\t\t\tonMouseDown={() => setCurrentBBox(bboxWrapper1)}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName='boundingBox'\r\n\t\t\t\t\t\tref={bbox3}\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\topacity: isDragging3 ? 1 : 1,\r\n\t\t\t\t\t\t\tcursor: 'move',\r\n\t\t\t\t\t\t\tdisplay: displayBox.disp3 ? 'inline-block' : 'none',\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t></div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName='boundingBoxWrapper4'\r\n\t\t\t\t\tid='bbox4'\r\n\t\t\t\t\tref={bboxWrapper4}\r\n\t\t\t\t\tonTouchStart={() => setCurrentBBox(bboxWrapper4)}\r\n\t\t\t\t\tonMouseDown={() => setCurrentBBox(bboxWrapper1)}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName='boundingBox'\r\n\t\t\t\t\t\tref={bbox4}\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\topacity: isDragging4 ? 1 : 1,\r\n\t\t\t\t\t\t\tcursor: 'move',\r\n\t\t\t\t\t\t\tdisplay: displayBox.disp4 ? 'inline-block' : 'none',\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t></div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName='boundingBoxWrapper5'\r\n\t\t\t\t\tid='bbox5'\r\n\t\t\t\t\tref={bboxWrapper5}\r\n\t\t\t\t\tonTouchStart={() => setCurrentBBox(bboxWrapper5)}\r\n\t\t\t\t\tonMouseDown={() => setCurrentBBox(bboxWrapper1)}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName='boundingBox'\r\n\t\t\t\t\t\tref={bbox5}\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\topacity: isDragging5 ? 1 : 1,\r\n\t\t\t\t\t\t\tcursor: 'move',\r\n\t\t\t\t\t\t\tdisplay: displayBox.disp5 ? 'inline-block' : 'none',\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t></div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default Capture;\r\n","import './App.css';\n\nimport { DndProvider, useDrag } from 'react-dnd';\n\nimport Capture from './components/capture';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport { TouchBackend } from 'react-dnd-touch-backend';\n\nfunction App() {\n\treturn (\n\t\t<DndProvider backend={TouchBackend} options={{ enableMouseEvents: true }}>\n\t\t\t<div className='App'>\n\t\t\t\t<header className='App-header'>\n\t\t\t\t\t<Capture />\n\t\t\t\t</header>\n\t\t\t</div>\n\t\t</DndProvider>\n\t);\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}